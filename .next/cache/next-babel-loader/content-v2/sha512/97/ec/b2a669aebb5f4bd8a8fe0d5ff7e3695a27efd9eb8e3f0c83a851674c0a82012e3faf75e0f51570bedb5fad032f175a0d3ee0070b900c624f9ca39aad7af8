{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _styled from \"@emotion/styled-base\";\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport h from 'react-hyperscript';\nimport { Box } from '../Layout';\nimport { colors } from '../Tokens';\nimport { useEffect } from 'react';\nimport { useLocalDiscounts, setDiscounts } from 'src/clientData';\nimport { callApi } from 'src/apiHelpers';\nimport Text from 'components/Text';\n\nvar Enroll = function Enroll(props) {\n  var _props$course, _props$course3, _props$course4, _props$course5, _props$course6, _props$course7;\n\n  var _useLocalDiscounts = useLocalDiscounts(),\n      discounts = _useLocalDiscounts.data;\n\n  var price = ((_props$course = props.course) === null || _props$course === void 0 ? void 0 : _props$course.cost) || 0;\n  var discount = discounts === null || discounts === void 0 ? void 0 : discounts.find(function (d) {\n    var _props$course2;\n\n    return d.course == ((_props$course2 = props.course) === null || _props$course2 === void 0 ? void 0 : _props$course2.id);\n  });\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!discount || !discounts)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              _context.next = 4;\n              return callApi('/api/discounts/' + discount.code);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status !== 200 || res.result.deleted || res.result.max_redeems !== 0 && res.result.max_redeems <= res.result.redeems) {\n                setDiscounts(discounts.filter(function (d) {\n                  return d.code !== (discount === null || discount === void 0 ? void 0 : discount.code);\n                }));\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, [discount, discounts]);\n\n  if (discount) {\n    if (discount.type === 'absolute') price = price - discount.amount;else price = price - Math.floor(discount.amount / 100 * price);\n  } //Laying out the Enroll Panel\n\n\n  return h(Box, {\n    gap: 16\n  }, [h(Box, {\n    gap: 8\n  }, [discount ? h(Cost, {\n    green: true\n  }, '$' + price) : null, h(Cost, {\n    discounted: !!discount\n  }, '$' + ((_props$course3 = props.course) === null || _props$course3 === void 0 ? void 0 : _props$course3.cost))]), h(Box, {\n    gap: 8,\n    style: {\n      color: colors.textSecondary\n    }\n  }, [h('b', (_props$course4 = props.course) === null || _props$course4 === void 0 ? void 0 : _props$course4.duration), ((_props$course5 = props.course) === null || _props$course5 === void 0 ? void 0 : _props$course5.cohort_max_size) === 0 ? null : h('b', \"Up to \".concat((_props$course6 = props.course) === null || _props$course6 === void 0 ? void 0 : _props$course6.cohort_max_size, \" learners\")), h(Box, {\n    gap: 4\n  }, [h('b', 'Prerequisites'), h(Text, {\n    source: (_props$course7 = props.course) === null || _props$course7 === void 0 ? void 0 : _props$course7.prerequisites,\n    disallowedTypes: [\"heading\"]\n  })])]), props.children]);\n};\n\nexport default Enroll;\n\nvar Cost = /*#__PURE__*/_styled('span', {\n  target: \"egkpgdv0\"\n})(\"width:min-content;line-height:56px;font-size:56px;font-weight:bold;\", function (props) {\n  return props.green ? \"color: \".concat(colors.accentSuccess, \";\") : '';\n}, \" \", function (props) {\n  return props.discounted ? \"\\nfont-size: 32px;\\nline-height: 32px;\\nbackground: linear-gradient(20deg, transparent 45.75%, currentColor 47.5%, currentColor 52.5%, transparent 53.25%);\\n\" : '';\n}, true ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvY29tcG9uZW50cy9Db3Vyc2UvRW5yb2xsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlEbUUiLCJmaWxlIjoiL1VzZXJzL2F5b29sdXdhYWxmb25zby9jb2RlL2tyYWtlbmVkdWFwcC9jb21wb25lbnRzL0NvdXJzZS9FbnJvbGwudHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaCBmcm9tICdyZWFjdC1oeXBlcnNjcmlwdCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJ1xuXG5pbXBvcnQgeyBCb3ggfSBmcm9tICcuLi9MYXlvdXQnXG5pbXBvcnQge2NvbG9yc30gZnJvbSAnLi4vVG9rZW5zJ1xuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSAnLi4vLi4vc3JjL2RhdGEnXG5pbXBvcnQgeyBSZWFjdEVsZW1lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlTG9jYWxEaXNjb3VudHMsIHNldERpc2NvdW50cyB9IGZyb20gJ3NyYy9jbGllbnREYXRhJ1xuaW1wb3J0IHsgY2FsbEFwaSB9IGZyb20gJ3NyYy9hcGlIZWxwZXJzJ1xuaW1wb3J0IHsgR2V0RGlzY291bnRSZXN1bHQgfSBmcm9tICdwYWdlcy9hcGkvZGlzY291bnRzL1tjb2RlXSdcbmltcG9ydCBUZXh0IGZyb20gJ2NvbXBvbmVudHMvVGV4dCdcblxudHlwZSBQcm9wcyA9IHtcbiAgY291cnNlOiBDb3Vyc2Vcbn1cblxuY29uc3QgRW5yb2xsOlJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xuICBsZXQge2RhdGE6IGRpc2NvdW50c30gPSB1c2VMb2NhbERpc2NvdW50cygpXG4gIGxldCBwcmljZSA9IHByb3BzLmNvdXJzZT8uY29zdCB8fCAwXG4gIGxldCBkaXNjb3VudCA9IGRpc2NvdW50cz8uZmluZChkPT5kLmNvdXJzZSA9PSBwcm9wcy5jb3Vyc2U/LmlkKVxuICB1c2VFZmZlY3QoKCk9PntcbiAgICAoYXN5bmMgZnVuY3Rpb24oKXtcbiAgICAgIGlmKCFkaXNjb3VudCB8fCAhZGlzY291bnRzKSByZXR1cm5cbiAgICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPG51bGwsIEdldERpc2NvdW50UmVzdWx0PignL2FwaS9kaXNjb3VudHMvJytkaXNjb3VudC5jb2RlKVxuICAgICAgaWYocmVzLnN0YXR1cyAhPT0gMjAwIHx8XG4gICAgICAgIHJlcy5yZXN1bHQuZGVsZXRlZCB8fFxuICAgICAgICAocmVzLnJlc3VsdC5tYXhfcmVkZWVtcyAhPT0gMFxuICAgICAgICAgICYmIHJlcy5yZXN1bHQubWF4X3JlZGVlbXMgPD0gcmVzLnJlc3VsdC5yZWRlZW1zKSkge1xuICAgICAgICBzZXREaXNjb3VudHMoZGlzY291bnRzLmZpbHRlcihkPT5kLmNvZGUhPT1kaXNjb3VudD8uY29kZSkpXG4gICAgICB9XG4gICAgfSkoKVxuICB9LCBbZGlzY291bnQsIGRpc2NvdW50c10pXG4gIGlmKGRpc2NvdW50KSB7XG4gICAgaWYoZGlzY291bnQudHlwZSA9PT0gJ2Fic29sdXRlJykgcHJpY2UgPSBwcmljZSAtIGRpc2NvdW50LmFtb3VudFxuICAgIGVsc2UgcHJpY2UgPSBwcmljZSAtIChNYXRoLmZsb29yKChkaXNjb3VudC5hbW91bnQvMTAwKSpwcmljZSkpXG4gIH1cbiAgLy9MYXlpbmcgb3V0IHRoZSBFbnJvbGwgUGFuZWxcbiAgcmV0dXJuIGgoQm94LCB7Z2FwOjE2fSwgW1xuICAgIGgoQm94LCB7Z2FwOjh9LCBbXG4gICAgICBkaXNjb3VudCA/IGgoQ29zdCwge2dyZWVuOiB0cnVlfSwgJyQnK3ByaWNlKSA6IG51bGwsXG4gICAgICBoKENvc3QsIHtkaXNjb3VudGVkOiAhIWRpc2NvdW50fSwgJyQnICsgcHJvcHMuY291cnNlPy5jb3N0KSxcbiAgICBdKSxcbiAgICBoKEJveCwge2dhcDogOCwgc3R5bGU6e2NvbG9yOiBjb2xvcnMudGV4dFNlY29uZGFyeX19LCBbXG4gICAgICBoKCdiJywgcHJvcHMuY291cnNlPy5kdXJhdGlvbiksXG4gICAgICBwcm9wcy5jb3Vyc2U/LmNvaG9ydF9tYXhfc2l6ZSA9PT0gMCA/IG51bGwgOiBoKCdiJywgYFVwIHRvICR7cHJvcHMuY291cnNlPy5jb2hvcnRfbWF4X3NpemV9IGxlYXJuZXJzYCksXG4gICAgICBoKEJveCwge2dhcDogNH0sIFtcbiAgICAgICAgaCgnYicsICdQcmVyZXF1aXNpdGVzJyksXG4gICAgICAgIGgoVGV4dCwge3NvdXJjZTogcHJvcHMuY291cnNlPy5wcmVyZXF1aXNpdGVzLCBkaXNhbGxvd2VkVHlwZXM6W1wiaGVhZGluZ1wiIGFzIGNvbnN0XX0pXG4gICAgICBdKSxcbiAgICBdKSxcbiAgICBwcm9wcy5jaGlsZHJlbiBhcyBSZWFjdEVsZW1lbnQgLFxuICBdKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnJvbGxcblxuXG5jb25zdCBDb3N0ID0gc3R5bGVkKCdzcGFuJyk8e2Rpc2NvdW50ZWQ/OmJvb2xlYW4sIGdyZWVuPzogYm9vbGVhbn0+YFxud2lkdGg6IG1pbi1jb250ZW50O1xubGluZS1oZWlnaHQ6IDU2cHg7XG5mb250LXNpemU6IDU2cHg7XG5mb250LXdlaWdodDogYm9sZDtcbiR7cHJvcHM9PnByb3BzLmdyZWVuPyBgY29sb3I6ICR7Y29sb3JzLmFjY2VudFN1Y2Nlc3N9O2A6Jyd9XG4ke3Byb3BzPT5wcm9wcy5kaXNjb3VudGVkID8gYFxuZm9udC1zaXplOiAzMnB4O1xubGluZS1oZWlnaHQ6IDMycHg7XG5iYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjBkZWcsIHRyYW5zcGFyZW50IDQ1Ljc1JSwgY3VycmVudENvbG9yIDQ3LjUlLCBjdXJyZW50Q29sb3IgNTIuNSUsIHRyYW5zcGFyZW50IDUzLjI1JSk7XG5gOiAnJ31cbmBcblxuLy8gQWRkIGEgd3JhcHBlciBhcm91bmQgRW5yb2xsIFBhbmVsIHNvIGFwcGx5IHRoZSBzdGlja3kgZmVhdHVyZSBvbiBzY3JlZW5zIGFib3ZlIDc2OHB4XG5leHBvcnQgY29uc3QgU3RpY2t5V3JhcHBlciA9IHN0eWxlZCgnZGl2JylgXG5wb3NpdGlvbjogc3RpY2t5O1xudG9wOiAzMnB4O1xuYFxuIl19 */\"); // Add a wrapper around Enroll Panel so apply the sticky feature on screens above 768px\n\n\nexport var StickyWrapper = /*#__PURE__*/_styled('div', {\n  target: \"egkpgdv1\"\n})(true ? {\n  name: \"h8kt2i\",\n  styles: \"position:sticky;top:32px;\"\n} : {\n  name: \"h8kt2i\",\n  styles: \"position:sticky;top:32px;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvY29tcG9uZW50cy9Db3Vyc2UvRW5yb2xsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVFMEMiLCJmaWxlIjoiL1VzZXJzL2F5b29sdXdhYWxmb25zby9jb2RlL2tyYWtlbmVkdWFwcC9jb21wb25lbnRzL0NvdXJzZS9FbnJvbGwudHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaCBmcm9tICdyZWFjdC1oeXBlcnNjcmlwdCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJ1xuXG5pbXBvcnQgeyBCb3ggfSBmcm9tICcuLi9MYXlvdXQnXG5pbXBvcnQge2NvbG9yc30gZnJvbSAnLi4vVG9rZW5zJ1xuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSAnLi4vLi4vc3JjL2RhdGEnXG5pbXBvcnQgeyBSZWFjdEVsZW1lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlTG9jYWxEaXNjb3VudHMsIHNldERpc2NvdW50cyB9IGZyb20gJ3NyYy9jbGllbnREYXRhJ1xuaW1wb3J0IHsgY2FsbEFwaSB9IGZyb20gJ3NyYy9hcGlIZWxwZXJzJ1xuaW1wb3J0IHsgR2V0RGlzY291bnRSZXN1bHQgfSBmcm9tICdwYWdlcy9hcGkvZGlzY291bnRzL1tjb2RlXSdcbmltcG9ydCBUZXh0IGZyb20gJ2NvbXBvbmVudHMvVGV4dCdcblxudHlwZSBQcm9wcyA9IHtcbiAgY291cnNlOiBDb3Vyc2Vcbn1cblxuY29uc3QgRW5yb2xsOlJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xuICBsZXQge2RhdGE6IGRpc2NvdW50c30gPSB1c2VMb2NhbERpc2NvdW50cygpXG4gIGxldCBwcmljZSA9IHByb3BzLmNvdXJzZT8uY29zdCB8fCAwXG4gIGxldCBkaXNjb3VudCA9IGRpc2NvdW50cz8uZmluZChkPT5kLmNvdXJzZSA9PSBwcm9wcy5jb3Vyc2U/LmlkKVxuICB1c2VFZmZlY3QoKCk9PntcbiAgICAoYXN5bmMgZnVuY3Rpb24oKXtcbiAgICAgIGlmKCFkaXNjb3VudCB8fCAhZGlzY291bnRzKSByZXR1cm5cbiAgICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPG51bGwsIEdldERpc2NvdW50UmVzdWx0PignL2FwaS9kaXNjb3VudHMvJytkaXNjb3VudC5jb2RlKVxuICAgICAgaWYocmVzLnN0YXR1cyAhPT0gMjAwIHx8XG4gICAgICAgIHJlcy5yZXN1bHQuZGVsZXRlZCB8fFxuICAgICAgICAocmVzLnJlc3VsdC5tYXhfcmVkZWVtcyAhPT0gMFxuICAgICAgICAgICYmIHJlcy5yZXN1bHQubWF4X3JlZGVlbXMgPD0gcmVzLnJlc3VsdC5yZWRlZW1zKSkge1xuICAgICAgICBzZXREaXNjb3VudHMoZGlzY291bnRzLmZpbHRlcihkPT5kLmNvZGUhPT1kaXNjb3VudD8uY29kZSkpXG4gICAgICB9XG4gICAgfSkoKVxuICB9LCBbZGlzY291bnQsIGRpc2NvdW50c10pXG4gIGlmKGRpc2NvdW50KSB7XG4gICAgaWYoZGlzY291bnQudHlwZSA9PT0gJ2Fic29sdXRlJykgcHJpY2UgPSBwcmljZSAtIGRpc2NvdW50LmFtb3VudFxuICAgIGVsc2UgcHJpY2UgPSBwcmljZSAtIChNYXRoLmZsb29yKChkaXNjb3VudC5hbW91bnQvMTAwKSpwcmljZSkpXG4gIH1cbiAgLy9MYXlpbmcgb3V0IHRoZSBFbnJvbGwgUGFuZWxcbiAgcmV0dXJuIGgoQm94LCB7Z2FwOjE2fSwgW1xuICAgIGgoQm94LCB7Z2FwOjh9LCBbXG4gICAgICBkaXNjb3VudCA/IGgoQ29zdCwge2dyZWVuOiB0cnVlfSwgJyQnK3ByaWNlKSA6IG51bGwsXG4gICAgICBoKENvc3QsIHtkaXNjb3VudGVkOiAhIWRpc2NvdW50fSwgJyQnICsgcHJvcHMuY291cnNlPy5jb3N0KSxcbiAgICBdKSxcbiAgICBoKEJveCwge2dhcDogOCwgc3R5bGU6e2NvbG9yOiBjb2xvcnMudGV4dFNlY29uZGFyeX19LCBbXG4gICAgICBoKCdiJywgcHJvcHMuY291cnNlPy5kdXJhdGlvbiksXG4gICAgICBwcm9wcy5jb3Vyc2U/LmNvaG9ydF9tYXhfc2l6ZSA9PT0gMCA/IG51bGwgOiBoKCdiJywgYFVwIHRvICR7cHJvcHMuY291cnNlPy5jb2hvcnRfbWF4X3NpemV9IGxlYXJuZXJzYCksXG4gICAgICBoKEJveCwge2dhcDogNH0sIFtcbiAgICAgICAgaCgnYicsICdQcmVyZXF1aXNpdGVzJyksXG4gICAgICAgIGgoVGV4dCwge3NvdXJjZTogcHJvcHMuY291cnNlPy5wcmVyZXF1aXNpdGVzLCBkaXNhbGxvd2VkVHlwZXM6W1wiaGVhZGluZ1wiIGFzIGNvbnN0XX0pXG4gICAgICBdKSxcbiAgICBdKSxcbiAgICBwcm9wcy5jaGlsZHJlbiBhcyBSZWFjdEVsZW1lbnQgLFxuICBdKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnJvbGxcblxuXG5jb25zdCBDb3N0ID0gc3R5bGVkKCdzcGFuJyk8e2Rpc2NvdW50ZWQ/OmJvb2xlYW4sIGdyZWVuPzogYm9vbGVhbn0+YFxud2lkdGg6IG1pbi1jb250ZW50O1xubGluZS1oZWlnaHQ6IDU2cHg7XG5mb250LXNpemU6IDU2cHg7XG5mb250LXdlaWdodDogYm9sZDtcbiR7cHJvcHM9PnByb3BzLmdyZWVuPyBgY29sb3I6ICR7Y29sb3JzLmFjY2VudFN1Y2Nlc3N9O2A6Jyd9XG4ke3Byb3BzPT5wcm9wcy5kaXNjb3VudGVkID8gYFxuZm9udC1zaXplOiAzMnB4O1xubGluZS1oZWlnaHQ6IDMycHg7XG5iYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjBkZWcsIHRyYW5zcGFyZW50IDQ1Ljc1JSwgY3VycmVudENvbG9yIDQ3LjUlLCBjdXJyZW50Q29sb3IgNTIuNSUsIHRyYW5zcGFyZW50IDUzLjI1JSk7XG5gOiAnJ31cbmBcblxuLy8gQWRkIGEgd3JhcHBlciBhcm91bmQgRW5yb2xsIFBhbmVsIHNvIGFwcGx5IHRoZSBzdGlja3kgZmVhdHVyZSBvbiBzY3JlZW5zIGFib3ZlIDc2OHB4XG5leHBvcnQgY29uc3QgU3RpY2t5V3JhcHBlciA9IHN0eWxlZCgnZGl2JylgXG5wb3NpdGlvbjogc3RpY2t5O1xudG9wOiAzMnB4O1xuYFxuIl19 */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n});","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/components/Course/Enroll.ts"],"names":["h","Box","colors","useEffect","useLocalDiscounts","setDiscounts","callApi","Text","Enroll","props","discounts","data","price","course","cost","discount","find","d","id","code","res","status","result","deleted","max_redeems","redeems","filter","type","amount","Math","floor","gap","Cost","green","discounted","style","color","textSecondary","duration","cohort_max_size","source","prerequisites","disallowedTypes","children","accentSuccess","StickyWrapper"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\nimport styled from '@emotion/styled'\n\nimport { Box } from '../Layout'\nimport {colors} from '../Tokens'\nimport { Course } from '../../src/data'\nimport { ReactElement, useEffect } from 'react'\nimport { useLocalDiscounts, setDiscounts } from 'src/clientData'\nimport { callApi } from 'src/apiHelpers'\nimport { GetDiscountResult } from 'pages/api/discounts/[code]'\nimport Text from 'components/Text'\n\ntype Props = {\n  course: Course\n}\n\nconst Enroll:React.FC<Props> = (props) => {\n  let {data: discounts} = useLocalDiscounts()\n  let price = props.course?.cost || 0\n  let discount = discounts?.find(d=>d.course == props.course?.id)\n  useEffect(()=>{\n    (async function(){\n      if(!discount || !discounts) return\n      let res = await callApi<null, GetDiscountResult>('/api/discounts/'+discount.code)\n      if(res.status !== 200 ||\n        res.result.deleted ||\n        (res.result.max_redeems !== 0\n          && res.result.max_redeems <= res.result.redeems)) {\n        setDiscounts(discounts.filter(d=>d.code!==discount?.code))\n      }\n    })()\n  }, [discount, discounts])\n  if(discount) {\n    if(discount.type === 'absolute') price = price - discount.amount\n    else price = price - (Math.floor((discount.amount/100)*price))\n  }\n  //Laying out the Enroll Panel\n  return h(Box, {gap:16}, [\n    h(Box, {gap:8}, [\n      discount ? h(Cost, {green: true}, '$'+price) : null,\n      h(Cost, {discounted: !!discount}, '$' + props.course?.cost),\n    ]),\n    h(Box, {gap: 8, style:{color: colors.textSecondary}}, [\n      h('b', props.course?.duration),\n      props.course?.cohort_max_size === 0 ? null : h('b', `Up to ${props.course?.cohort_max_size} learners`),\n      h(Box, {gap: 4}, [\n        h('b', 'Prerequisites'),\n        h(Text, {source: props.course?.prerequisites, disallowedTypes:[\"heading\" as const]})\n      ]),\n    ]),\n    props.children as ReactElement ,\n  ])\n}\n\nexport default Enroll\n\n\nconst Cost = styled('span')<{discounted?:boolean, green?: boolean}>`\nwidth: min-content;\nline-height: 56px;\nfont-size: 56px;\nfont-weight: bold;\n${props=>props.green? `color: ${colors.accentSuccess};`:''}\n${props=>props.discounted ? `\nfont-size: 32px;\nline-height: 32px;\nbackground: linear-gradient(20deg, transparent 45.75%, currentColor 47.5%, currentColor 52.5%, transparent 53.25%);\n`: ''}\n`\n\n// Add a wrapper around Enroll Panel so apply the sticky feature on screens above 768px\nexport const StickyWrapper = styled('div')`\nposition: sticky;\ntop: 32px;\n`\n"]},"metadata":{},"sourceType":"module"}