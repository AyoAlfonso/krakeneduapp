{"ast":null,"code":"import h from 'react-hyperscript';\nimport * as t from 'runtypes';\nimport { useState, useEffect, Fragment } from 'react';\nimport { CheckBox, Input } from './Form';\nlet TodoParser = t.Array(t.Boolean);\nexport function TodoList(props) {\n  let items = props.items.filter(i => !!i);\n  let {\n    0: checked,\n    1: setChecked\n  } = useState(new Array(items.length).fill(false));\n  useEffect(() => {\n    if (!props.persistKey) return;\n    let savedValue = localStorage.getItem(props.persistKey);\n\n    try {\n      let localData = TodoParser.check(JSON.parse(savedValue || ''));\n      setChecked(localData);\n    } catch (e) {}\n  }, []);\n  useEffect(() => {\n    if (!props.persistKey) return;\n    localStorage.setItem(props.persistKey, JSON.stringify(checked));\n  }, [checked]);\n  return h(Fragment, items.map((todo, index) => {\n    return h(CheckBox, [h(Input, {\n      type: 'checkbox',\n      checked: checked[index],\n      onChange: e => {\n        let newValues = checked.slice(0);\n        newValues[index] = e.currentTarget.checked;\n        setChecked(newValues);\n      }\n    }), todo]);\n  }));\n}","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/components/TodoList.ts"],"names":["h","t","useState","useEffect","Fragment","CheckBox","Input","TodoParser","Array","Boolean","TodoList","props","items","filter","i","checked","setChecked","length","fill","persistKey","savedValue","localStorage","getItem","localData","check","JSON","parse","e","setItem","stringify","map","todo","index","type","onChange","newValues","slice","currentTarget"],"mappings":"AAAA,OAAOA,CAAP,MAAc,mBAAd;AACA,OAAO,KAAKC,CAAZ,MAAmB,UAAnB;AACA,SAAQC,QAAR,EAAkBC,SAAlB,EAA6BC,QAA7B,QAA4C,OAA5C;AACA,SAASC,QAAT,EAAmBC,KAAnB,QAAgC,QAAhC;AAEA,IAAIC,UAAU,GAAGN,CAAC,CAACO,KAAF,CAAQP,CAAC,CAACQ,OAAV,CAAjB;AAEA,OAAO,SAASC,QAAT,CAAkBC,KAAlB,EAAmG;AACxG,MAAIC,KAAK,GAAGD,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBC,CAAC,IAAE,CAAC,CAACA,CAAxB,CAAZ;AACA,MAAI;AAAA,OAACC,OAAD;AAAA,OAAUC;AAAV,MAAwBd,QAAQ,CAAE,IAAIM,KAAJ,CAAUI,KAAK,CAACK,MAAhB,EAAwBC,IAAxB,CAA6B,KAA7B,CAAF,CAApC;AACAf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAG,CAACQ,KAAK,CAACQ,UAAV,EAAsB;AACtB,QAAIC,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqBX,KAAK,CAACQ,UAA3B,CAAjB;;AACA,QAAI;AACF,UAAII,SAAS,GAAGhB,UAAU,CAACiB,KAAX,CAAiBC,IAAI,CAACC,KAAL,CAAWN,UAAU,IAAI,EAAzB,CAAjB,CAAhB;AACAJ,MAAAA,UAAU,CAACO,SAAD,CAAV;AACD,KAHD,CAIA,OAAMI,CAAN,EAAQ,CAAE;AACX,GARQ,EAQP,EARO,CAAT;AASAxB,EAAAA,SAAS,CAAC,MAAI;AACZ,QAAG,CAACQ,KAAK,CAACQ,UAAV,EAAsB;AACtBE,IAAAA,YAAY,CAACO,OAAb,CAAqBjB,KAAK,CAACQ,UAA3B,EAAuCM,IAAI,CAACI,SAAL,CAAed,OAAf,CAAvC;AACD,GAHQ,EAGP,CAACA,OAAD,CAHO,CAAT;AAKA,SAAOf,CAAC,CAACI,QAAD,EAAWQ,KAAK,CAACkB,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,KAAe;AAC1C,WAAOhC,CAAC,CAACK,QAAD,EAAW,CACjBL,CAAC,CAACM,KAAD,EAAQ;AACP2B,MAAAA,IAAI,EAAE,UADC;AAEPlB,MAAAA,OAAO,EAAEA,OAAO,CAACiB,KAAD,CAFT;AAGPE,MAAAA,QAAQ,EAAEP,CAAC,IAAG;AACZ,YAAIQ,SAAS,GAAGpB,OAAO,CAACqB,KAAR,CAAc,CAAd,CAAhB;AACAD,QAAAA,SAAS,CAACH,KAAD,CAAT,GAAmBL,CAAC,CAACU,aAAF,CAAgBtB,OAAnC;AACAC,QAAAA,UAAU,CAACmB,SAAD,CAAV;AACD;AAPM,KAAR,CADgB,EAUjBJ,IAViB,CAAX,CAAR;AAYD,GAbkB,CAAX,CAAR;AAcD","sourcesContent":["import h from 'react-hyperscript'\nimport * as t from 'runtypes'\nimport {useState, useEffect, Fragment} from 'react'\nimport { CheckBox, Input } from './Form'\n\nlet TodoParser = t.Array(t.Boolean)\n\nexport function TodoList(props: {items: Array< string | React.ReactElement | null>, persistKey?: string}) {\n  let items = props.items.filter(i=>!!i)\n  let [checked, setChecked] = useState (new Array(items.length).fill(false))\n  useEffect(() => {\n    if(!props.persistKey) return\n    let savedValue = localStorage.getItem(props.persistKey)\n    try {\n      let localData = TodoParser.check(JSON.parse(savedValue || ''))\n      setChecked(localData)\n    }\n    catch(e){}\n  },[])\n  useEffect(()=>{\n    if(!props.persistKey) return\n    localStorage.setItem(props.persistKey, JSON.stringify(checked))\n  },[checked])\n\n  return h(Fragment, items.map((todo, index)=>{\n    return h(CheckBox, [\n      h(Input, {\n        type: 'checkbox',\n        checked: checked[index],\n        onChange: e=> {\n          let newValues = checked.slice(0)\n          newValues[index] = e.currentTarget.checked\n          setChecked(newValues)\n        }\n      }),\n      todo\n    ])\n  }))\n}\n"]},"metadata":{},"sourceType":"module"}