{"ast":null,"code":"import _defineProperty from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport h from 'react-hyperscript';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { Box, Seperator, FormBox, LabelBox } from 'components/Layout';\nimport { Secondary, Primary, BackButton } from 'components/Button';\nimport { useState, Fragment } from 'react';\nimport { Input } from 'components/Form';\nimport EditorWithPreview from 'components/EditorWithPreview';\nimport { PageLoader } from 'components/Loader';\nimport { useApi } from 'src/apiHelpers';\nimport { Modal } from 'components/Modal';\nimport { DISCOURSE_URL } from 'src/constants';\nimport { useFormData } from 'src/hooks';\nexport var __N_SSG = true;\nexport default CohortTemplatesPages;\n\nfunction CohortTemplatesPages(props) {\n  var _props$templates, _props$templates2;\n\n  var router = useRouter();\n  var template = (_props$templates = props.templates) === null || _props$templates === void 0 ? void 0 : _props$templates.find(function (t) {\n    return t.name === router.query.template;\n  });\n  if (!props.templates) return h(PageLoader);\n  if (template) return h(Box, {\n    gap: 64\n  }, [h(Box, {\n    gap: 16\n  }, [h(BackButton, {\n    href: \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/cohorts/\").concat(router.query.cohortId, \"/templates\"),\n    shallow: true\n  }, 'Templates'), h('h1', \"Post template\")]), h(TemplatePage, {\n    template: template\n  })]);\n  return h(Box, {\n    width: 640,\n    gap: 32\n  }, [h(Box, {\n    gap: 16\n  }, [h(BackButton, {\n    href: \"/courses/[slug]/[id]/cohorts/[cohortId]\",\n    as: \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/cohorts/\").concat(router.query.cohortId)\n  }, 'Cohort Details'), h('h1', \"Templates\"), h('p.big', [\"Use templates to easily post new topics in your cohort forum! You can create new templates in the \", h(Link, {\n    href: '/courses/[slug]/[id]/settings',\n    as: \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/settings\")\n  }, h('a', 'course settings')), \".\"])]), h(Box, {}, (_props$templates2 = props.templates) === null || _props$templates2 === void 0 ? void 0 : _props$templates2.filter(function (t) {\n    return t.type === 'triggered';\n  }).sort(function (a, b) {\n    return a.name > b.name ? 1 : -1;\n  }).flatMap(function (template) {\n    return [h(Box, {\n      h: true,\n      style: {\n        gridAutoColumns: 'auto'\n      }\n    }, [h('div', [h('h3', template.name), h('span.textSecondary', template.type === 'prepopulated' ? \"Prepopulated for all cohorts\" : \"Manually published by facilitator\")]), h(Box, {\n      h: true,\n      style: {\n        justifySelf: 'end',\n        alignItems: 'center'\n      }\n    }, [h(Link, {\n      href: \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/cohorts/\").concat(router.query.cohortId, \"/templates\") + '?template=' + template.name,\n      shallow: true\n    }, h(Secondary, 'Use'))])]), h(Seperator)];\n  }).slice(0, -1))]);\n}\n\nfunction TemplatePage(props) {\n  var _useFormData = useFormData(props.template),\n      form = _useFormData.form,\n      changed = _useFormData.changed,\n      reset = _useFormData.reset;\n\n  var _useState = useState(),\n      post = _useState[0],\n      setPost = _useState[1];\n\n  var _useApi = useApi([]),\n      _useApi2 = _slicedToArray(_useApi, 2),\n      status = _useApi2[0],\n      callPost = _useApi2[1];\n\n  var router = useRouter();\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return callPost(\"/api/cohorts/\".concat(router.query.cohortId, \"/postTopic\"), {\n                title: form.title.value,\n                body: form.content.value,\n                tags: []\n              });\n\n            case 3:\n              res = _context.sent;\n              if (res.status === 200) setPost(res.result.topic.topic_id);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return h(Fragment, [post && status === 'success' ? h(Modal, {\n    display: !!post,\n    onExit: function onExit() {\n      setPost(undefined);\n    }\n  }, h(Box, {\n    gap: 32\n  }, [h(Box, {\n    gap: 16,\n    style: {\n      textAlign: 'center'\n    }\n  }, [h('h1', \"Cool!\"), h('p', \"Your topic has been added\")]), h(Box, [h('a', {\n    style: {\n      justifySelf: \"center\"\n    },\n    href: \"\".concat(DISCOURSE_URL, \"/t/\").concat(post)\n  }, h(Primary, \"View it here\")), h(Link, {\n    href: \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/cohorts/\").concat(router.query.cohortId, \"/templates\")\n  }, h('a', {\n    style: {\n      justifySelf: \"center\"\n    }\n  }, h(Secondary, 'Back to Templates')))])])) : null, h(FormBox, {\n    onSubmit: onSubmit,\n    gap: 32\n  }, [h(LabelBox, {\n    width: 400\n  }, [h('h4', \"Title\"), h(Input, _objectSpread({\n    type: 'text',\n    name: 'title'\n  }, form.title))]), h(LabelBox, [h('h4', \"Body\"), h(EditorWithPreview, form.content)]), h(Box, {\n    h: true,\n    style: {\n      justifySelf: 'right'\n    }\n  }, [h(Secondary, {\n    disabled: !changed,\n    onClick: function onClick() {\n      return reset();\n    }\n  }, \"Reset Template\"), h(Primary, {\n    type: 'submit',\n    status: status\n  }, \"Post to the forum\")])])]);\n}","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/pages/courses/[slug]/[id]/cohorts/[cohortId]/templates.ts"],"names":["h","Link","useRouter","Box","Seperator","FormBox","LabelBox","Secondary","Primary","BackButton","useState","Fragment","Input","EditorWithPreview","PageLoader","useApi","Modal","DISCOURSE_URL","useFormData","CohortTemplatesPages","props","router","template","templates","find","t","name","query","gap","href","slug","id","cohortId","shallow","TemplatePage","width","as","filter","type","sort","a","b","flatMap","style","gridAutoColumns","justifySelf","alignItems","slice","form","changed","reset","post","setPost","status","callPost","onSubmit","e","preventDefault","title","value","body","content","tags","res","result","topic","topic_id","display","onExit","undefined","textAlign","disabled","onClick"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\nimport Link from 'next/link'\nimport { useRouter } from 'next/router'\nimport { getTemplatesQuery } from 'pages/api/courses/[id]/templates'\nimport { InferGetStaticPropsType } from 'next'\nimport { Box, Seperator, FormBox, LabelBox } from 'components/Layout'\nimport { Secondary, Primary, BackButton } from 'components/Button'\nimport { useState, Fragment } from 'react'\nimport { Input } from 'components/Form'\nimport EditorWithPreview from 'components/EditorWithPreview'\nimport { PageLoader } from 'components/Loader'\nimport { useApi } from 'src/apiHelpers'\nimport { PostTopicMsg, PostTopicResponse } from 'pages/api/cohorts/[cohortId]/postTopic'\nimport { Modal } from 'components/Modal'\nimport { DISCOURSE_URL } from 'src/constants'\nimport { useFormData } from 'src/hooks'\n\nexport default CohortTemplatesPages\ntype Props = InferGetStaticPropsType<typeof getStaticProps>\nfunction CohortTemplatesPages(props:Props) {\n  let router = useRouter()\n  let template = props.templates?.find(t=> t.name === router.query.template)\n  if(!props.templates) return h(PageLoader)\n\n  if(template) return h(Box, {gap: 64}, [\n    h(Box, {gap:16}, [\n      h(BackButton, {href: `/courses/${router.query.slug}/${router.query.id}/cohorts/${router.query.cohortId}/templates`, shallow:true}, 'Templates'),\n      h('h1', \"Post template\")\n    ]),\n    h(TemplatePage, {template})\n  ])\n\n  return h(Box, {width: 640, gap: 32},[\n    h(Box, {gap:16}, [\n      h(BackButton, {href: \"/courses/[slug]/[id]/cohorts/[cohortId]\", as: `/courses/${router.query.slug}/${router.query.id}/cohorts/${router.query.cohortId}`}, 'Cohort Details'),\n      h('h1', \"Templates\"),\n      h('p.big', [\n        `Use templates to easily post new topics in your cohort forum! You can create new templates in the `,\n        h(Link, {href: '/courses/[slug]/[id]/settings', as:`/courses/${router.query.slug}/${router.query.id}/settings`}, h('a', 'course settings')), `.`\n      ])\n    ]),\n    h(Box, {}, props.templates\n      ?.filter(t=>t.type === 'triggered')\n      .sort((a, b)=>  a.name > b.name ? 1 : -1)\n      .flatMap(template => {\n        return [\n          h(Box, {h: true, style: {gridAutoColumns: 'auto'}},[\n            h('div', [\n              h('h3', template.name),\n              h('span.textSecondary', template.type ==='prepopulated' ? \"Prepopulated for all cohorts\" : \"Manually published by facilitator\")\n            ]),\n            h(Box, {h: true, style:{justifySelf: 'end', alignItems: 'center'}}, [\n              h(Link, {\n                href: `/courses/${router.query.slug}/${router.query.id}/cohorts/${router.query.cohortId}/templates`+'?template='+template.name,\n                shallow: true,\n              }, h(Secondary, 'Use'))\n            ])\n          ]),\n          h(Seperator)\n        ]}).slice(0, -1))\n  ])\n}\n\nfunction TemplatePage(props: {template: Props['templates'][0]}) {\n  let {form, changed, reset} = useFormData(props.template)\n  let [post, setPost] = useState<number | undefined>()\n  let [status, callPost] = useApi<PostTopicMsg, PostTopicResponse>([])\n  let router = useRouter()\n\n  let onSubmit = async (e:React.FormEvent)=>{\n    e.preventDefault()\n    let res = await callPost(`/api/cohorts/${router.query.cohortId}/postTopic`, {title: form.title.value, body: form.content.value, tags:[]})\n    if(res.status===200) setPost(res.result.topic.topic_id)\n  }\n\n  return h(Fragment, [\n    post && status === 'success' ? h(Modal, {display: !!post, onExit: ()=>{setPost(undefined)}}, h(Box, {gap:32},[\n      h(Box, {gap:16, style:{textAlign: 'center'}}, [\n      h('h1', \"Cool!\"),\n        h('p', \"Your topic has been added\")\n      ]),\n      h(Box, [\n        h('a', {style:{justifySelf:\"center\"}, href: `${DISCOURSE_URL}/t/${post}`}, h(Primary, \"View it here\")),\n      h(Link, {\n        href: `/courses/${router.query.slug}/${router.query.id}/cohorts/${router.query.cohortId}/templates`\n      }, h('a', {style:{justifySelf:\"center\"}}, h(Secondary, 'Back to Templates')))\n      ])\n    ])) : null,\n    h(FormBox, {onSubmit, gap:32}, [\n      h(LabelBox, {width: 400}, [\n        h('h4', \"Title\"),\n        h(Input, {\n          type: 'text',\n          name: 'title',\n          ...form.title,\n        })\n      ]),\n      h(LabelBox, [\n        h('h4', \"Body\"),\n        h(EditorWithPreview, form.content)\n      ]),\n      h(Box, {h:true, style:{justifySelf: 'right'}}, [\n        h(Secondary, {disabled: !changed, onClick:()=>reset()}, \"Reset Template\"),\n        h(Primary, {type: 'submit', status}, \"Post to the forum\"),\n      ])\n    ])\n  ])\n}\n\nexport const getStaticProps = async (ctx:any)=>{\n  let cohortNum = (ctx.params?.cohortId || '' )as string\n  let courseId = parseInt(ctx.params?.id as string || '')\n\n  let templates = await getTemplatesQuery(courseId)\n  return {props: {templates, courseId, cohortNum}}\n}\n\nexport const getStaticPaths = async ()=>{\n  return {paths:[], fallback: true}\n}\n"]},"metadata":{},"sourceType":"module"}