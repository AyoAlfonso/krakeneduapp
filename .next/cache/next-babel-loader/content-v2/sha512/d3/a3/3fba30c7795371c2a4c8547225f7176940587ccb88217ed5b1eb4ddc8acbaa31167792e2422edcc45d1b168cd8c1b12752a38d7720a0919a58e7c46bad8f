{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _styled from \"@emotion/styled-base\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport h from 'react-hyperscript';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { useState, useEffect, Fragment } from 'react';\nimport { Tabs } from 'components/Tabs';\nimport { useApi, callApi } from 'src/apiHelpers';\nimport { useCourseData, useUserData } from 'src/data';\nimport { PageLoader } from 'components/Loader';\nimport { Box, Seperator, LabelBox, FormBox } from 'components/Layout';\nimport { Info, Error, Select, Input, Textarea, CheckBox } from 'components/Form';\nimport { Primary, Destructive, Secondary, BackButton, IconButton } from 'components/Button';\nimport { Discounts } from 'components/pages/courses/settings/Discounts';\nimport ErrorPage from 'pages/404';\nimport { useDebouncedEffect, useFormData } from 'src/hooks';\nimport { Modal } from 'components/Modal';\nimport { Cohort } from '..';\nimport { IconPicker } from 'components/IconPicker';\nimport { Cross } from 'components/Icons';\nimport { Pill } from 'components/Pill';\nvar COPY = {\n  cancelCohort: h(\"p.textSecondary\", [\"Contact us at \", h(\"a\", {\n    href: \"mailto:contact@krakenedu.com\"\n  }, \"contact@krakenedu.com\"), \" to cancel a cohort. Optionally,  let us know the reason you\\u2019re cancelling (we\\u2019re curious \\uD83E\\uDD13)\"])\n};\n\nvar WrappedCourseSettingsPage = function WrappedCourseSettingsPage(props) {\n  return props.notFound ? h(ErrorPage) : h(CourseSettings, props);\n};\n\nfunction CourseSettings(props) {\n  var _useCourseData = useCourseData(props.id, props.course || undefined),\n      course = _useCourseData.data,\n      mutate = _useCourseData.mutate;\n\n  var _useUserData = useUserData(),\n      user = _useUserData.data;\n\n  var router = useRouter();\n  useEffect(function () {\n    if (user === undefined) return;\n\n    if (course) {\n      var isMaintainer = !!course.course_maintainers.find(function (maintainer) {\n        return user && maintainer.maintainer === user.id;\n      });\n      if (!isMaintainer) router.push('/');\n    }\n  }, [user, course]);\n  if (!course || !user) return h(PageLoader);\n  return h(Box, {\n    gap: 64,\n    width: 640\n  }, [h(Box, {\n    gap: 16\n  }, [h(BackButton, {\n    href: \"/courses/[slug]/[id]\",\n    as: \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id)\n  }, course.type === \"club\" ? \"Club\" : \"Course\"), h(\"h1\", \"Settings\"), h(\"p.big\", [\"KrakenEdu is new and some things can only be done manually for now! To add a new maintainer, remove a cohort, or anything else you don't see here, please email \", h(\"a\", {\n    href: \"mailto:help@krakenedu.com\"\n  }, \"help@krakenedu.com\")])]), h(Tabs, {\n    tabs: {\n      Cohorts: h(CohortSettings, {\n        course: course,\n        mutate: mutate\n      }),\n      Details: h(EditDetails, {\n        course: course,\n        mutate: mutate\n      }),\n      Invites: h(Invites, {\n        course: course,\n        mutate: mutate\n      }),\n      Templates: h(CourseTemplates, {\n        course: course,\n        mutate: mutate\n      }),\n      Discounts: h(Discounts, {\n        course: course.id\n      })\n    }\n  })]);\n}\n\nexport var __N_SSG = true;\nexport default WrappedCourseSettingsPage;\n\nfunction CohortSettings(props) {\n  var _useUserData2 = useUserData(),\n      user = _useUserData2.data;\n\n  return h(Box, {\n    gap: 32\n  }, [h(AddCohort, props), h(Seperator), h(Box, {\n    gap: 16\n  }, [h('h3', \"Cancel a Cohort\"), COPY.cancelCohort]), h(Box, [h('h3', \"All Cohorts\"), h(Box, {\n    gap: 32\n  }, props.course.course_cohorts.map(function (cohort) {\n    var facilitating = !!cohort.cohort_facilitators.find(function (f) {\n      return user && f.facilitator === user.id;\n    });\n    return h(Cohort, {\n      cohort: cohort,\n      enrolled: false,\n      facilitating: facilitating,\n      slug: props.course.slug,\n      cohort_max_size: props.course.cohort_max_size,\n      invited: true\n    });\n  }))])]);\n} //feature to add a new cohort to a course\n\n\nvar AddCohort = function AddCohort(props) {\n  var _useState = useState({\n    start_date: '',\n    start_time: '',\n    facilitators: []\n  }),\n      newCohort = _useState[0],\n      setNewCohort = _useState[1];\n\n  var _useApi = useApi([newCohort]),\n      _useApi2 = _slicedToArray(_useApi, 2),\n      status = _useApi2[0],\n      callCreateCohort = _useApi2[1];\n\n  var timezone = new Date().toLocaleDateString('en-us', {\n    timeZoneName: \"short\"\n  }).split(', ')[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var date, time, start, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              date = newCohort.start_date.split('-').map(function (x) {\n                return parseInt(x);\n              });\n              time = newCohort.start_time.split(':').map(function (x) {\n                return parseInt(x);\n              });\n              start = new Date(date[0], date[1] - 1, date[2], time[0], time[1]);\n              _context.next = 6;\n              return callCreateCohort(\"/api/cohorts\", {\n                courseId: props.course.id,\n                facilitators: newCohort.facilitators,\n                start: start.toISOString()\n              });\n\n            case 6:\n              res = _context.sent;\n              if (res.status === 200) props.mutate(_objectSpread(_objectSpread({}, props.course), {}, {\n                course_cohorts: [].concat(_toConsumableArray(props.course.course_cohorts), [_objectSpread(_objectSpread({}, res.result), {}, {\n                  people_in_cohorts: [],\n                  courses: {\n                    name: props.course.name\n                  }\n                })])\n              }));\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return h(FormBox, {\n    onSubmit: onSubmit,\n    gap: 32,\n    style: {\n      width: 400\n    }\n  }, [h('h2', 'Add a new Cohort'), status === 'error' ? h(Error, 'An error occured') : null, status === 'success' ? h(Info, 'Cohort created!') : null, h(LabelBox, {\n    gap: 8\n  }, [h('h4', \"Facilitator\"), h(Select, {\n    required: true,\n    onChange: function onChange(e) {\n      return setNewCohort(_objectSpread(_objectSpread({}, newCohort), {}, {\n        facilitators: [].concat(_toConsumableArray(newCohort.facilitators), [e.currentTarget.value])\n      }));\n    }\n  }, [h('option', {\n    value: ''\n  }, \"Select a facilitator\")].concat(_toConsumableArray(props.course.course_maintainers.map(function (maintainer) {\n    return h('option', {\n      value: maintainer.maintainer\n    }, maintainer.people.display_name || maintainer.people.username);\n  }) || []))), h(Box, {\n    h: true\n  }, newCohort.facilitators.map(function (f) {\n    var facilitator = props.course.course_maintainers.find(function (m) {\n      return m.maintainer === f;\n    });\n    if (!facilitator) return null;\n    return h(Pill, {}, h(Box, {\n      h: true,\n      gap: 4\n    }, [h('p', facilitator.people.display_name || facilitator.people.username), h(IconButton, {\n      onClick: function onClick(e) {\n        e.preventDefault();\n        setNewCohort(_objectSpread(_objectSpread({}, newCohort), {}, {\n          facilitators: newCohort.facilitators.filter(function (f2) {\n            return f2 !== f;\n          })\n        }));\n      }\n    }, h(Cross, {\n      width: 10,\n      height: 10\n    }))]));\n  }))]), h(Box, {\n    h: true,\n    gap: 32\n  }, [h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Start Date'), h(Input, {\n    type: 'date',\n    placeholder: 'yyyy-mm-dd',\n    required: true,\n    value: newCohort.start_date,\n    onChange: function onChange(e) {\n      return setNewCohort(_objectSpread(_objectSpread({}, newCohort), {}, {\n        start_date: e.currentTarget.value\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', \"Start time (\".concat(timezone, \")\")), h(Input, {\n    type: 'time',\n    placeholder: '23:59',\n    required: true,\n    value: newCohort.start_time,\n    onChange: function onChange(e) {\n      return setNewCohort(_objectSpread(_objectSpread({}, newCohort), {}, {\n        start_time: e.currentTarget.value\n      }));\n    }\n  })])]), h(Primary, {\n    style: {\n      justifySelf: 'right'\n    },\n    status: status,\n    type: 'submit',\n    success: status === 'success',\n    disabled: !newCohort.start_date || newCohort.facilitators.length === 0\n  }, 'Add a new Cohort')]);\n};\n\nvar Invites = function Invites(props) {\n  var _useState2 = useState(''),\n      emailOrUsername = _useState2[0],\n      setEmailOrUsername = _useState2[1];\n\n  var _useState3 = useState(props.course.invite_only),\n      invite_only = _useState3[0],\n      setInviteOnly = _useState3[1];\n\n  var _useState4 = useState(null),\n      valid = _useState4[0],\n      setValid = _useState4[1];\n\n  var _useApi3 = useApi([emailOrUsername], function () {\n    return setEmailOrUsername('');\n  }),\n      _useApi4 = _slicedToArray(_useApi3, 2),\n      status = _useApi4[0],\n      callInviteToCourse = _useApi4[1];\n\n  var _useApi5 = useApi([]),\n      _useApi6 = _slicedToArray(_useApi5, 2),\n      updateStatus = _useApi6[0],\n      callUpdateCourse = _useApi6[1];\n\n  useDebouncedEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(emailOrUsername.includes('@') || emailOrUsername === '')) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", setValid(null));\n\n          case 2:\n            _context2.next = 4;\n            return callApi('/api/get/username/' + emailOrUsername);\n\n          case 4:\n            res = _context2.sent;\n            if (res.status === 404) setValid(false);else setValid(true);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), 500, [emailOrUsername]);\n  useEffect(function () {\n    return setValid(null);\n  }, [emailOrUsername]);\n\n  var onSubmitInvite = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      var x;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              x = emailOrUsername.includes('@') ? {\n                email: emailOrUsername\n              } : {\n                username: emailOrUsername\n              };\n              callInviteToCourse(\"/api/courses/\".concat(props.course.id, \"/invite\"), _objectSpread({}, x));\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onSubmitInvite(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onSubmitToggleInviteOnly = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.preventDefault();\n              _context4.next = 3;\n              return callUpdateCourse(\"/api/courses/\".concat(props.course.id), {\n                invite_only: invite_only\n              });\n\n            case 3:\n              res = _context4.sent;\n              if (res.status === 200) props.mutate(_objectSpread(_objectSpread({}, props.course), res.result));\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onSubmitToggleInviteOnly(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return h(Box, {\n    gap: 16,\n    width: 400\n  }, [h(\"h2\", \"Invites\"), h(Box, {\n    gap: 32\n  }, [h(FormBox, {\n    onSubmit: onSubmitToggleInviteOnly\n  }, [h(LabelBox, {\n    gap: 8,\n    width: 400\n  }, [h(\"div\", [h(\"h4\", \"Invite Only\"), h(\"small.textSecondary\", \"Learners cannot enroll in an invite only course unless you have sent them an\\ninvite. The invite allows them enroll in any cohort and does not expire.\")]), h(CheckBox, [h(Input, {\n    type: \"checkbox\",\n    checked: invite_only,\n    onChange: function onChange(e) {\n      return setInviteOnly(e.currentTarget.checked);\n    }\n  }), \"Make this course invite only\"])]), h(Primary, {\n    style: {\n      justifySelf: \"right\"\n    },\n    status: updateStatus,\n    type: \"submit\",\n    disabled: props.course.invite_only === invite_only\n  }, \"Change\")]), !props.course.invite_only ? null : h(FormBox, {\n    onSubmit: onSubmitInvite,\n    gap: 32,\n    width: 400\n  }, [h(LabelBox, {\n    gap: 8\n  }, [h(\"h4\", \"Invite someone to enroll\"), h(\"small.textSecondary\", \"Invite someone with their username or email. Invitee does not need a KrakenEdu account to be invited, but they will need an account to enroll.\"), h(Input, {\n    type: emailOrUsername.includes(\"@\") ? \"email\" : \"text\",\n    value: emailOrUsername,\n    onChange: function onChange(e) {\n      return setEmailOrUsername(e.currentTarget.value);\n    }\n  }), valid === null ? null : valid ? h(\"span.accentSuccess\", \"Great, found @\" + emailOrUsername) : h(\"span.accentRed\", \"We can't find a user with that username\")]), h(Primary, {\n    style: {\n      justifySelf: \"right\"\n    },\n    status: status,\n    type: \"submit\",\n    disabled: !emailOrUsername.includes(\"@\") && valid !== true\n  }, \"Invite\")])])]);\n};\n\nvar EditDetails = function EditDetails(props) {\n  var _useFormData = useFormData({\n    name: props.course.name,\n    card_image: props.course.card_image,\n    cohort_max_size: props.course.cohort_max_size,\n    description: props.course.description,\n    prerequisites: props.course.prerequisites,\n    cost: props.course.cost,\n    duration: props.course.duration\n  }, [props.course]),\n      state = _useFormData.state,\n      form = _useFormData.form,\n      changed = _useFormData.changed,\n      reset = _useFormData.reset,\n      setState = _useFormData.setState;\n\n  var _useApi7 = useApi([]),\n      _useApi8 = _slicedToArray(_useApi7, 2),\n      status = _useApi8[0],\n      callUpdateCourse = _useApi8[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              e.preventDefault();\n              _context5.next = 3;\n              return callUpdateCourse(\"/api/courses/\".concat(props.course.id), _objectSpread({}, state));\n\n            case 3:\n              res = _context5.sent;\n              if (res.status === 200) props.mutate(_objectSpread(_objectSpread({}, props.course), res.result));\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function onSubmit(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return h(FormBox, {\n    onSubmit: onSubmit,\n    gap: 32,\n    style: {\n      width: 400\n    }\n  }, [h('h2', 'Edit Details'), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Name'), h(Input, _objectSpread({\n    type: 'text',\n    maxLength: 50\n  }, form.name))]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Cost (USD)'), h(Input, _objectSpread({\n    type: 'number'\n  }, form.cost))]), props.course.type === 'course' ? null : h(Box, [h(\"div\", [h('h4', \"Emojis\"), h('small.textSecondary', \"Select three emojis to describe your club! Repeats ok.\")]), h(IconPicker, {\n    icons: state.card_image.split(','),\n    setIcons: function setIcons(icons) {\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        card_image: icons.join(',')\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('div', [h('h4', \"Cohort Size\"), h('small.textSecondary', \"How many learners can enroll in a cohort. Set to 0 for no limit.\")]), h(Input, _objectSpread({\n    type: 'number',\n    required: true\n  }, form.cohort_max_size))]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Description'), h(Textarea, _objectSpread({\n    maxLength: 200\n  }, form.description))]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Prerequisites'), h(Textarea, form.prerequisites)]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Duration'), h(Input, form.duration)]), h(SubmitButtons, [h(Destructive, {\n    disabled: !changed,\n    onClick: function onClick(e) {\n      e.preventDefault();\n      reset();\n    }\n  }, \"Discard Changes\"), h(Primary, {\n    type: 'submit',\n    disabled: !changed,\n    status: status\n  }, 'Save Changes')]), h(Maintainers, props)]);\n};\n\nfunction Maintainers(props) {\n  var _useState5 = useState(''),\n      newMaintainer = _useState5[0],\n      setNewMaintainer = _useState5[1];\n\n  return h(Box, [h('h3', \"Maintainers\")].concat(_toConsumableArray(props.course.course_maintainers.map(function (m) {\n    return m.people.display_name || m.people.username;\n  })), [h('h4', \"Add a maintainer\"), h(FormBox, [h(Input, {\n    value: newMaintainer,\n    onChange: function onChange(e) {\n      return setNewMaintainer(e.currentTarget.value);\n    }\n  }), h(Primary, {\n    type: 'submit'\n  }, \"Add\")])]));\n}\n\nfunction CourseTemplates(props) {\n  return h(Box, {\n    gap: 32\n  }, [h(Box, [h('p', \"Each cohort comes with its own community space, and templates to help you populate its structure with topics.\"), h('ul', {\n    style: {\n      'margin': 'auto 0'\n    }\n  }, [h('li', [h('b', 'Prepopulated'), h('span', ' topics are automatically posted when each new cohort is created')]), h('li', [h('b', 'Triggered'), h('span', ' topics can be posted by the facilitator from the cohort settings (editable before publishing, so useful for creating multiple topics from one template)')])]), h('p', \"You can edit the default templates we've provided below, or add new ones!\"), h(Link, {\n    href: '/courses/[slug]/[id]/settings/templates/[templateId]',\n    as: \"/courses/\".concat(props.course.slug, \"/\").concat(props.course.id, \"/settings/templates/new\")\n  }, h('a', {}, h(Primary, \"+ Add A New Template\")))]), h(Box, {}, props.course.course_templates.sort(function (a, b) {\n    return a.name > b.name ? 1 : -1;\n  }).sort(function (a) {\n    return a.required ? -1 : 1;\n  }).flatMap(function (template) {\n    return [h(Box, {\n      h: true,\n      style: {\n        gridAutoColumns: 'auto'\n      }\n    }, [h('div', [h('h3', template.name), h('span.textSecondary', template.type === 'prepopulated' ? \"Prepopulated for all cohorts\" : \"Manually published by facilitator\")]), h(Box, {\n      h: true,\n      style: {\n        justifySelf: 'end',\n        alignItems: 'center'\n      }\n    }, [template.required ? null : h(DeleteTemplate, {\n      course: props.course,\n      mutate: props.mutate,\n      templateName: template.name\n    }), h(Link, {\n      href: '/courses/[slug]/[id]/settings/templates/[templateId]',\n      as: \"/courses/\".concat(props.course.slug, \"/\").concat(props.course.id, \"/settings/templates/\").concat(template.name)\n    }, h('a', {}, h(Secondary, 'Edit')))])]), h(Seperator)];\n  }).slice(0, -1))]);\n}\n\nfunction DeleteTemplate(props) {\n  var _useState6 = useState('normal'),\n      state = _useState6[0],\n      setState = _useState6[1];\n\n  var _useApi9 = useApi([props]),\n      _useApi10 = _slicedToArray(_useApi9, 2),\n      status = _useApi10[0],\n      callDelete = _useApi10[1];\n\n  return h(Fragment, [h(Destructive, {\n    onClick: function onClick() {\n      return setState('confirm');\n    }\n  }, 'Delete'), h(Modal, {\n    display: state !== 'normal',\n    closeText: \"nevermind\",\n    onExit: function onExit() {\n      return setState('normal');\n    }\n  }, [h(Box, {\n    gap: 32,\n    style: {\n      textAlign: 'center'\n    }\n  }, [h('h3', \"Are you sure?\"), h('p', \"You can't undo this action!\"), h(Primary, {\n    style: {\n      justifySelf: \"center\"\n    },\n    status: status,\n    onClick: function () {\n      var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return callDelete(\"/api/courses/\".concat(props.course.id, \"/templates/\").concat(props.templateName), null, \"DELETE\");\n\n              case 2:\n                res = _context6.sent;\n\n                if (res.status === 200) {\n                  props.mutate(_objectSpread(_objectSpread({}, props.course), {}, {\n                    course_templates: props.course.course_templates.filter(function (t) {\n                      return t.name !== props.templateName;\n                    })\n                  }));\n                  setState('normal');\n                }\n\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function onClick() {\n        return _onClick.apply(this, arguments);\n      }\n\n      return onClick;\n    }()\n  }, \"Yup delete it\")])])]);\n}\n\nvar SubmitButtons = /*#__PURE__*/_styled('div', {\n  target: \"efhwjq20\"\n})(true ? {\n  name: \"1mxcumu\",\n  styles: \"justify-self:right;display:grid;grid-template-columns:auto auto;grid-gap:16px;\"\n} : {\n  name: \"1mxcumu\",\n  styles: \"justify-self:right;display:grid;grid-template-columns:auto auto;grid-gap:16px;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvcGFnZXMvY291cnNlcy9bc2x1Z10vW2lkXS9zZXR0aW5ncy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3Y21DIiwiZmlsZSI6Ii9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvcGFnZXMvY291cnNlcy9bc2x1Z10vW2lkXS9zZXR0aW5ncy9pbmRleC50cyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBoIGZyb20gJ3JlYWN0LWh5cGVyc2NyaXB0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgSW5mZXJHZXRTdGF0aWNQcm9wc1R5cGUgfSBmcm9tICduZXh0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnXG5cbmltcG9ydCB7IFRhYnMgfSBmcm9tICdjb21wb25lbnRzL1RhYnMnXG5pbXBvcnQgeyB1c2VBcGksIGNhbGxBcGkgfSBmcm9tICdzcmMvYXBpSGVscGVycydcbmltcG9ydCB7IENvdXJzZSwgdXNlQ291cnNlRGF0YSwgdXNlVXNlckRhdGEgfSBmcm9tICdzcmMvZGF0YSdcbmltcG9ydCB7IFBhZ2VMb2FkZXIgfSBmcm9tICdjb21wb25lbnRzL0xvYWRlcidcbmltcG9ydCB7IEJveCwgU2VwZXJhdG9yLCBMYWJlbEJveCwgRm9ybUJveCB9IGZyb20gJ2NvbXBvbmVudHMvTGF5b3V0J1xuaW1wb3J0IHsgSW5mbywgRXJyb3IsIFNlbGVjdCwgSW5wdXQsIFRleHRhcmVhLCBDaGVja0JveCB9IGZyb20gJ2NvbXBvbmVudHMvRm9ybSdcbmltcG9ydCB7IFByaW1hcnksIERlc3RydWN0aXZlLCBTZWNvbmRhcnksIEJhY2tCdXR0b24sIEljb25CdXR0b24gfSBmcm9tICdjb21wb25lbnRzL0J1dHRvbidcbmltcG9ydCB7RGlzY291bnRzfSBmcm9tICdjb21wb25lbnRzL3BhZ2VzL2NvdXJzZXMvc2V0dGluZ3MvRGlzY291bnRzJ1xuaW1wb3J0IEVycm9yUGFnZSBmcm9tICdwYWdlcy80MDQnXG5pbXBvcnQgeyB1c2VEZWJvdW5jZWRFZmZlY3QsIHVzZUZvcm1EYXRhIH0gZnJvbSAnc3JjL2hvb2tzJ1xuaW1wb3J0IHsgY291cnNlRGF0YVF1ZXJ5LCBVcGRhdGVDb3Vyc2VNc2csIFVwZGF0ZUNvdXJzZVJlc3BvbnNlIH0gZnJvbSAncGFnZXMvYXBpL2NvdXJzZXMvW2lkXSdcbmltcG9ydCB7IENoZWNrVXNlcm5hbWVSZXN1bHQgfSBmcm9tICdwYWdlcy9hcGkvZ2V0L1suLi5pdGVtXSdcbmltcG9ydCB7IENyZWF0ZUNvaG9ydE1zZywgQ3JlYXRlQ29ob3J0UmVzcG9uc2UgfSBmcm9tICdwYWdlcy9hcGkvY29ob3J0cydcbmltcG9ydCB7IEludml0ZVRvQ291cnNlTXNnLCBJbnZpdGVUb0NvdXJzZVJlc3BvbnNlIH0gZnJvbSAncGFnZXMvYXBpL2NvdXJzZXMvW2lkXS9pbnZpdGUnXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ2NvbXBvbmVudHMvTW9kYWwnXG5pbXBvcnQgeyBEZWxldGVUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJ3BhZ2VzL2FwaS9jb3Vyc2VzL1tpZF0vdGVtcGxhdGVzL1t0ZW1wbGF0ZUlkXSdcbmltcG9ydCB7IGdldFRhZ2dlZFBvc3QgfSBmcm9tICdzcmMvZGlzY291cnNlJ1xuaW1wb3J0IHsgQ29ob3J0IH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSAnY29tcG9uZW50cy9JY29uUGlja2VyJ1xuaW1wb3J0IHsgQ3Jvc3MgfSBmcm9tICdjb21wb25lbnRzL0ljb25zJ1xuaW1wb3J0IHsgUGlsbCB9IGZyb20gJ2NvbXBvbmVudHMvUGlsbCdcblxuY29uc3QgQ09QWSA9IHtcbiAgY2FuY2VsQ29ob3J0OiBoKFwicC50ZXh0U2Vjb25kYXJ5XCIsIFtcbiAgICBgQ29udGFjdCB1cyBhdCBgLFxuICAgIGgoXCJhXCIsIHsgaHJlZjogXCJtYWlsdG86Y29udGFjdEBrcmFrZW5lZHUuY29tXCIgfSwgYGNvbnRhY3RAa3Jha2VuZWR1LmNvbWApLFxuICAgIGAgdG8gY2FuY2VsIGEgY29ob3J0LiBPcHRpb25hbGx5LCAgbGV0IHVzIGtub3cgdGhlIHJlYXNvbiB5b3XigJlyZSBjYW5jZWxsaW5nICh3ZeKAmXJlIGN1cmlvdXMg8J+kkylgLFxuICBdKSxcbn07XG5cbnR5cGUgUHJvcHMgPSBJbmZlckdldFN0YXRpY1Byb3BzVHlwZTx0eXBlb2YgZ2V0U3RhdGljUHJvcHM+XG5jb25zdCBXcmFwcGVkQ291cnNlU2V0dGluZ3NQYWdlID0gKHByb3BzOiBQcm9wcyk9PnByb3BzLm5vdEZvdW5kID8gaChFcnJvclBhZ2UpIDogaChDb3Vyc2VTZXR0aW5ncywgcHJvcHMpXG5mdW5jdGlvbiBDb3Vyc2VTZXR0aW5ncyhwcm9wczpFeHRyYWN0PFByb3BzLCB7bm90Rm91bmQ6ZmFsc2V9Pil7XG4gIGxldCB7ZGF0YTogY291cnNlLCBtdXRhdGV9ID0gdXNlQ291cnNlRGF0YShwcm9wcy5pZCwgcHJvcHMuY291cnNlIHx8IHVuZGVmaW5lZClcbiAgbGV0IHtkYXRhOiB1c2VyfSA9IHVzZVVzZXJEYXRhKClcbiAgbGV0IHJvdXRlciA9IHVzZVJvdXRlcigpXG5cbiAgdXNlRWZmZWN0KCgpPT57XG4gICAgaWYodXNlciA9PT0gdW5kZWZpbmVkKSByZXR1cm5cbiAgICBpZihjb3Vyc2UpIHtcbiAgICAgIGxldCBpc01haW50YWluZXIgPSAhIShjb3Vyc2UuY291cnNlX21haW50YWluZXJzLmZpbmQobWFpbnRhaW5lciA9PiB1c2VyICYmIG1haW50YWluZXIubWFpbnRhaW5lciA9PT0gdXNlci5pZCkpXG4gICAgICBpZighaXNNYWludGFpbmVyKSByb3V0ZXIucHVzaCgnLycpXG4gICAgfVxuICB9LCBbdXNlciwgY291cnNlXSlcbiAgaWYoIWNvdXJzZSB8fCAhdXNlcikgcmV0dXJuIGgoUGFnZUxvYWRlcilcblxuICByZXR1cm4gaChCb3gsIHsgZ2FwOiA2NCwgd2lkdGg6IDY0MCB9LCBbXG4gICAgaChCb3gsIHsgZ2FwOiAxNiB9LCBbXG4gICAgICBoKFxuICAgICAgICBCYWNrQnV0dG9uLFxuICAgICAgICB7XG4gICAgICAgICAgaHJlZjogXCIvY291cnNlcy9bc2x1Z10vW2lkXVwiLFxuICAgICAgICAgIGFzOiBgL2NvdXJzZXMvJHtyb3V0ZXIucXVlcnkuc2x1Z30vJHtyb3V0ZXIucXVlcnkuaWR9YCxcbiAgICAgICAgfSxcbiAgICAgICAgY291cnNlLnR5cGUgPT09IFwiY2x1YlwiID8gXCJDbHViXCIgOiBcIkNvdXJzZVwiXG4gICAgICApLFxuICAgICAgaChcImgxXCIsIFwiU2V0dGluZ3NcIiksXG4gICAgICBoKFwicC5iaWdcIiwgW1xuICAgICAgICBgS3Jha2VuRWR1IGlzIG5ldyBhbmQgc29tZSB0aGluZ3MgY2FuIG9ubHkgYmUgZG9uZSBtYW51YWxseSBmb3Igbm93ISBUbyBhZGQgYSBuZXcgbWFpbnRhaW5lciwgcmVtb3ZlIGEgY29ob3J0LCBvciBhbnl0aGluZyBlbHNlIHlvdSBkb24ndCBzZWUgaGVyZSwgcGxlYXNlIGVtYWlsIGAsXG4gICAgICAgIGgoXCJhXCIsIHsgaHJlZjogXCJtYWlsdG86aGVscEBrcmFrZW5lZHUuY29tXCIgfSwgXCJoZWxwQGtyYWtlbmVkdS5jb21cIiksXG4gICAgICBdKSxcbiAgICBdKSxcbiAgICBoKFRhYnMsIHtcbiAgICAgIHRhYnM6IHtcbiAgICAgICAgQ29ob3J0czogaChDb2hvcnRTZXR0aW5ncywgeyBjb3Vyc2UsIG11dGF0ZSB9KSxcbiAgICAgICAgRGV0YWlsczogaChFZGl0RGV0YWlscywgeyBjb3Vyc2UsIG11dGF0ZSB9KSxcbiAgICAgICAgSW52aXRlczogaChJbnZpdGVzLCB7IGNvdXJzZSwgbXV0YXRlIH0pLFxuICAgICAgICBUZW1wbGF0ZXM6IGgoQ291cnNlVGVtcGxhdGVzLCB7IGNvdXJzZSwgbXV0YXRlIH0pLFxuICAgICAgICBEaXNjb3VudHM6IGgoRGlzY291bnRzLCB7IGNvdXJzZTogY291cnNlLmlkIH0pLFxuICAgICAgfSxcbiAgICB9KSxcbiAgXSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdyYXBwZWRDb3Vyc2VTZXR0aW5nc1BhZ2VcblxuXG5mdW5jdGlvbiBDb2hvcnRTZXR0aW5ncyhwcm9wczp7Y291cnNlOkNvdXJzZSwgbXV0YXRlOiAoY291cnNlOkNvdXJzZSk9PnZvaWR9KSB7XG4gIGxldCB7ZGF0YTogdXNlcn0gPSB1c2VVc2VyRGF0YSgpXG4gIHJldHVybiBoKEJveCwge2dhcDogMzJ9LCBbXG4gICAgaChBZGRDb2hvcnQsIHByb3BzKSxcbiAgICBoKFNlcGVyYXRvciksXG4gICAgaChCb3gsIHtnYXA6IDE2fSwgW1xuICAgICAgaCgnaDMnLCBcIkNhbmNlbCBhIENvaG9ydFwiKSxcbiAgICAgIENPUFkuY2FuY2VsQ29ob3J0XG4gICAgXSksXG4gICAgaChCb3gsIFtcbiAgICAgIGgoJ2gzJywgXCJBbGwgQ29ob3J0c1wiKSxcbiAgICAgIGgoQm94LCB7Z2FwOjMyfSwgcHJvcHMuY291cnNlLmNvdXJzZV9jb2hvcnRzLm1hcCgoY29ob3J0KT0+e1xuICAgICAgICBsZXQgZmFjaWxpdGF0aW5nID0gISFjb2hvcnQuY29ob3J0X2ZhY2lsaXRhdG9ycy5maW5kKGY9PnVzZXImJmYuZmFjaWxpdGF0b3IgPT09IHVzZXIuaWQpXG4gICAgICAgIHJldHVybiBoKENvaG9ydCwge1xuICAgICAgICAgIGNvaG9ydCxcbiAgICAgICAgICBlbnJvbGxlZDogZmFsc2UsXG4gICAgICAgICAgZmFjaWxpdGF0aW5nLFxuICAgICAgICAgIHNsdWc6IHByb3BzLmNvdXJzZS5zbHVnLFxuICAgICAgICAgIGNvaG9ydF9tYXhfc2l6ZTogcHJvcHMuY291cnNlLmNvaG9ydF9tYXhfc2l6ZSxcbiAgICAgICAgICBpbnZpdGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KSksXG4gICAgXSlcbiAgXSlcbn1cblxuLy9mZWF0dXJlIHRvIGFkZCBhIG5ldyBjb2hvcnQgdG8gYSBjb3Vyc2VcbmNvbnN0IEFkZENvaG9ydCA9IChwcm9wczp7Y291cnNlOkNvdXJzZSwgbXV0YXRlOihjOkNvdXJzZSk9PnZvaWR9KT0+IHtcbiAgbGV0IFtuZXdDb2hvcnQsIHNldE5ld0NvaG9ydF0gPSB1c2VTdGF0ZSh7c3RhcnRfZGF0ZTogJycsIHN0YXJ0X3RpbWU6ICcnLCBmYWNpbGl0YXRvcnM6IFtdIGFzIHN0cmluZ1tdfSlcbiAgbGV0IFtzdGF0dXMsIGNhbGxDcmVhdGVDb2hvcnRdID0gdXNlQXBpPENyZWF0ZUNvaG9ydE1zZywgQ3JlYXRlQ29ob3J0UmVzcG9uc2U+KFtuZXdDb2hvcnRdKVxuXG4gIGxldCB0aW1lem9uZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi11cycse3RpbWVab25lTmFtZTpcInNob3J0XCJ9KS5zcGxpdCgnLCAnKVsxXVxuXG4gIGNvbnN0IG9uU3VibWl0ID0gYXN5bmMgKGU6UmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBsZXQgZGF0ZSA9IG5ld0NvaG9ydC5zdGFydF9kYXRlLnNwbGl0KCctJykubWFwKHg9PnBhcnNlSW50KHgpKVxuICAgIGxldCB0aW1lID0gbmV3Q29ob3J0LnN0YXJ0X3RpbWUuc3BsaXQoJzonKS5tYXAoeD0+cGFyc2VJbnQoeCkpXG4gICAgbGV0IHN0YXJ0ID0gbmV3IERhdGUoZGF0ZVswXSwgZGF0ZVsxXSAtMSwgZGF0ZVsyXSwgdGltZVswXSwgdGltZVsxXSlcblxuICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQ3JlYXRlQ29ob3J0KGAvYXBpL2NvaG9ydHNgLCB7Y291cnNlSWQ6IHByb3BzLmNvdXJzZS5pZCwgZmFjaWxpdGF0b3JzOm5ld0NvaG9ydC5mYWNpbGl0YXRvcnMsIHN0YXJ0OiBzdGFydC50b0lTT1N0cmluZygpfSlcbiAgICBpZihyZXMuc3RhdHVzID09PSAyMDApIHByb3BzLm11dGF0ZSh7XG4gICAgICAgIC4uLnByb3BzLmNvdXJzZSxcbiAgICAgICAgY291cnNlX2NvaG9ydHM6IFsuLi5wcm9wcy5jb3Vyc2UuY291cnNlX2NvaG9ydHMsIHsuLi5yZXMucmVzdWx0LCBwZW9wbGVfaW5fY29ob3J0czpbXSwgY291cnNlczoge25hbWU6IHByb3BzLmNvdXJzZS5uYW1lfX1dXG4gICAgICB9KVxuICB9XG5cbiAgcmV0dXJuIGgoRm9ybUJveCwge29uU3VibWl0LCBnYXA6IDMyLCBzdHlsZToge3dpZHRoOiA0MDB9fSwgW1xuICAgIGgoJ2gyJywgJ0FkZCBhIG5ldyBDb2hvcnQnKSxcbiAgICBzdGF0dXMgPT09ICdlcnJvcicgPyBoKEVycm9yLCAnQW4gZXJyb3Igb2NjdXJlZCcpIDogbnVsbCxcbiAgICBzdGF0dXMgPT09ICdzdWNjZXNzJyA/IGgoSW5mbywgJ0NvaG9ydCBjcmVhdGVkIScpIDogbnVsbCxcbiAgICBoKExhYmVsQm94LCB7Z2FwOjh9LCBbXG4gICAgICBoKCdoNCcsIFwiRmFjaWxpdGF0b3JcIiksXG4gICAgICBoKFNlbGVjdCwge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgb25DaGFuZ2U6IChlOlJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50Pik9PiBzZXROZXdDb2hvcnQoey4uLm5ld0NvaG9ydCwgZmFjaWxpdGF0b3JzOiBbLi4ubmV3Q29ob3J0LmZhY2lsaXRhdG9ycywgZS5jdXJyZW50VGFyZ2V0LnZhbHVlXX0pXG4gICAgICB9LCBbXG4gICAgICAgIGgoJ29wdGlvbicsIHt2YWx1ZTogJyd9LCBcIlNlbGVjdCBhIGZhY2lsaXRhdG9yXCIpLFxuICAgICAgICAuLi4ocHJvcHMuY291cnNlLmNvdXJzZV9tYWludGFpbmVycy5tYXAobWFpbnRhaW5lciA9PiB7XG4gICAgICAgICAgcmV0dXJuIGgoJ29wdGlvbicsIHt2YWx1ZTogbWFpbnRhaW5lci5tYWludGFpbmVyfSwgbWFpbnRhaW5lci5wZW9wbGUuZGlzcGxheV9uYW1lIHx8IG1haW50YWluZXIucGVvcGxlLnVzZXJuYW1lKVxuICAgICAgICB9KXx8W10pXG4gICAgICBdKSxcbiAgICAgIGgoQm94LCB7aDp0cnVlfSwgbmV3Q29ob3J0LmZhY2lsaXRhdG9ycy5tYXAoZj0+e1xuICAgICAgICBsZXQgZmFjaWxpdGF0b3IgPSBwcm9wcy5jb3Vyc2UuY291cnNlX21haW50YWluZXJzLmZpbmQobT0+bS5tYWludGFpbmVyID09PSBmKVxuICAgICAgICBpZighZmFjaWxpdGF0b3IpIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiBoKFBpbGwsIHt9LCBoKEJveCwge2g6dHJ1ZSwgZ2FwOjR9LCBbXG4gICAgICAgICAgaCgncCcsIGZhY2lsaXRhdG9yLnBlb3BsZS5kaXNwbGF5X25hbWUgfHwgZmFjaWxpdGF0b3IucGVvcGxlLnVzZXJuYW1lKSxcbiAgICAgICAgICBoKEljb25CdXR0b24sIHtvbkNsaWNrOmU9PntcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgc2V0TmV3Q29ob3J0KHsuLi5uZXdDb2hvcnQsIGZhY2lsaXRhdG9yczpuZXdDb2hvcnQuZmFjaWxpdGF0b3JzLmZpbHRlcihmMj0+ZjIhPT1mKX0pXG4gICAgICAgICAgfX0sIGgoQ3Jvc3MsIHt3aWR0aDogMTAsIGhlaWdodDoxMH0pKVxuICAgICAgICBdKSlcbiAgICAgIH0pKVxuICAgIF0pLFxuICAgIGgoQm94LCB7aDogdHJ1ZSwgZ2FwOiAzMn0sIFtcbiAgICBoKExhYmVsQm94LCB7Z2FwOjh9LCBbXG4gICAgICBoKCdoNCcsICdTdGFydCBEYXRlJyksXG4gICAgICBoKElucHV0LCB7XG4gICAgICAgIHR5cGU6ICdkYXRlJyxcbiAgICAgICAgcGxhY2Vob2xkZXI6ICd5eXl5LW1tLWRkJyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHZhbHVlOiBuZXdDb2hvcnQuc3RhcnRfZGF0ZSxcbiAgICAgICAgb25DaGFuZ2U6IGUgPT4gc2V0TmV3Q29ob3J0KHsuLi5uZXdDb2hvcnQsIHN0YXJ0X2RhdGU6IGUuY3VycmVudFRhcmdldC52YWx1ZX0pXG4gICAgICB9KVxuICAgIF0pLFxuICAgIGgoTGFiZWxCb3gsIHtnYXA6OH0sIFtcbiAgICAgIGgoJ2g0JywgYFN0YXJ0IHRpbWUgKCR7dGltZXpvbmV9KWApLFxuICAgICAgaChJbnB1dCwge1xuICAgICAgICB0eXBlOiAndGltZScsXG4gICAgICAgIHBsYWNlaG9sZGVyOiAnMjM6NTknLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IG5ld0NvaG9ydC5zdGFydF90aW1lLFxuICAgICAgICBvbkNoYW5nZTogZSA9PiBzZXROZXdDb2hvcnQoey4uLm5ld0NvaG9ydCwgc3RhcnRfdGltZTogZS5jdXJyZW50VGFyZ2V0LnZhbHVlfSlcbiAgICAgIH0pXG4gICAgXSksXG4gICAgXSksXG4gICAgaChQcmltYXJ5LCB7XG4gICAgICBzdHlsZToge2p1c3RpZnlTZWxmOiAncmlnaHQnfSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgc3VjY2Vzczogc3RhdHVzID09PSAnc3VjY2VzcycsXG4gICAgICBkaXNhYmxlZDogIW5ld0NvaG9ydC5zdGFydF9kYXRlIHx8IG5ld0NvaG9ydC5mYWNpbGl0YXRvcnMubGVuZ3RoPT09MFxuICAgIH0sICdBZGQgYSBuZXcgQ29ob3J0JyksXG4gIF0pXG59XG5cbmNvbnN0IEludml0ZXMgPSAocHJvcHM6e2NvdXJzZTpDb3Vyc2UsIG11dGF0ZTogKGM6Q291cnNlKSA9PiB2b2lkfSk9PiB7XG4gIGxldCBbZW1haWxPclVzZXJuYW1lLCBzZXRFbWFpbE9yVXNlcm5hbWVdID0gdXNlU3RhdGUoJycpXG4gIGxldCBbaW52aXRlX29ubHksIHNldEludml0ZU9ubHldID0gdXNlU3RhdGUocHJvcHMuY291cnNlLmludml0ZV9vbmx5KVxuICBsZXQgW3ZhbGlkLCBzZXRWYWxpZF0gPSB1c2VTdGF0ZTxudWxsIHwgYm9vbGVhbj4obnVsbClcbiAgbGV0IFtzdGF0dXMsIGNhbGxJbnZpdGVUb0NvdXJzZV0gPSB1c2VBcGk8SW52aXRlVG9Db3Vyc2VNc2csIEludml0ZVRvQ291cnNlUmVzcG9uc2U+KFtlbWFpbE9yVXNlcm5hbWVdLCAoKT0+c2V0RW1haWxPclVzZXJuYW1lKCcnKSlcbiAgbGV0IFt1cGRhdGVTdGF0dXMsIGNhbGxVcGRhdGVDb3Vyc2VdID0gdXNlQXBpPFVwZGF0ZUNvdXJzZU1zZywgVXBkYXRlQ291cnNlUmVzcG9uc2U+KFtdKVxuXG4gIHVzZURlYm91bmNlZEVmZmVjdChhc3luYyAoKT0+e1xuICAgIGlmKGVtYWlsT3JVc2VybmFtZS5pbmNsdWRlcygnQCcpIHx8IGVtYWlsT3JVc2VybmFtZSA9PT0gJycpIHJldHVybiBzZXRWYWxpZChudWxsKVxuICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPG51bGwsIENoZWNrVXNlcm5hbWVSZXN1bHQ+KCcvYXBpL2dldC91c2VybmFtZS8nK2VtYWlsT3JVc2VybmFtZSlcbiAgICBpZihyZXMuc3RhdHVzPT09NDA0KSBzZXRWYWxpZChmYWxzZSlcbiAgICBlbHNlIHNldFZhbGlkKHRydWUpXG4gIH0sIDUwMCwgW2VtYWlsT3JVc2VybmFtZV0pXG4gIHVzZUVmZmVjdCgoKT0+c2V0VmFsaWQobnVsbCksW2VtYWlsT3JVc2VybmFtZV0pXG5cbiAgbGV0IG9uU3VibWl0SW52aXRlID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCk9PntcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBsZXQgeCA9IGVtYWlsT3JVc2VybmFtZS5pbmNsdWRlcygnQCcpID8ge2VtYWlsOiBlbWFpbE9yVXNlcm5hbWV9IDoge3VzZXJuYW1lOiBlbWFpbE9yVXNlcm5hbWV9XG4gICAgY2FsbEludml0ZVRvQ291cnNlKGAvYXBpL2NvdXJzZXMvJHtwcm9wcy5jb3Vyc2UuaWR9L2ludml0ZWAsIHsuLi54fSlcbiAgfVxuXG4gIGxldCBvblN1Ym1pdFRvZ2dsZUludml0ZU9ubHkgPSBhc3luYyAoZTpSZWFjdC5Gb3JtRXZlbnQpPT57XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbGV0IHJlcyA9IGF3YWl0IGNhbGxVcGRhdGVDb3Vyc2UoYC9hcGkvY291cnNlcy8ke3Byb3BzLmNvdXJzZS5pZH1gLCB7aW52aXRlX29ubHl9KVxuICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCkgcHJvcHMubXV0YXRlKHsuLi5wcm9wcy5jb3Vyc2UsIC4uLnJlcy5yZXN1bHR9KVxuICB9XG5cbiAgcmV0dXJuIGgoQm94LCB7IGdhcDogMTYsIHdpZHRoOiA0MDAgfSwgW1xuICAgIGgoXCJoMlwiLCBcIkludml0ZXNcIiksXG4gICAgaChCb3gsIHsgZ2FwOiAzMiB9LCBbXG4gICAgICBoKEZvcm1Cb3gsIHsgb25TdWJtaXQ6IG9uU3VibWl0VG9nZ2xlSW52aXRlT25seSB9LCBbXG4gICAgICAgIGgoTGFiZWxCb3gsIHsgZ2FwOiA4LCB3aWR0aDogNDAwIH0sIFtcbiAgICAgICAgICBoKFwiZGl2XCIsIFtcbiAgICAgICAgICAgIGgoXCJoNFwiLCBcIkludml0ZSBPbmx5XCIpLFxuICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgXCJzbWFsbC50ZXh0U2Vjb25kYXJ5XCIsXG4gICAgICAgICAgICAgIGBMZWFybmVycyBjYW5ub3QgZW5yb2xsIGluIGFuIGludml0ZSBvbmx5IGNvdXJzZSB1bmxlc3MgeW91IGhhdmUgc2VudCB0aGVtIGFuXG5pbnZpdGUuIFRoZSBpbnZpdGUgYWxsb3dzIHRoZW0gZW5yb2xsIGluIGFueSBjb2hvcnQgYW5kIGRvZXMgbm90IGV4cGlyZS5gXG4gICAgICAgICAgICApLFxuICAgICAgICAgIF0pLFxuICAgICAgICAgIGgoQ2hlY2tCb3gsIFtcbiAgICAgICAgICAgIGgoSW5wdXQsIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICBjaGVja2VkOiBpbnZpdGVfb25seSxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiBzZXRJbnZpdGVPbmx5KGUuY3VycmVudFRhcmdldC5jaGVja2VkKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXCJNYWtlIHRoaXMgY291cnNlIGludml0ZSBvbmx5XCIsXG4gICAgICAgICAgXSksXG4gICAgICAgIF0pLFxuICAgICAgICBoKFxuICAgICAgICAgIFByaW1hcnksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3R5bGU6IHsganVzdGlmeVNlbGY6IFwicmlnaHRcIiB9LFxuICAgICAgICAgICAgc3RhdHVzOiB1cGRhdGVTdGF0dXMsXG4gICAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmNvdXJzZS5pbnZpdGVfb25seSA9PT0gaW52aXRlX29ubHksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIkNoYW5nZVwiXG4gICAgICAgICksXG4gICAgICBdKSxcbiAgICAgICFwcm9wcy5jb3Vyc2UuaW52aXRlX29ubHlcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogaChGb3JtQm94LCB7IG9uU3VibWl0OiBvblN1Ym1pdEludml0ZSwgZ2FwOiAzMiwgd2lkdGg6IDQwMCB9LCBbXG4gICAgICAgICAgICBoKExhYmVsQm94LCB7IGdhcDogOCB9LCBbXG4gICAgICAgICAgICAgIGgoXCJoNFwiLCBcIkludml0ZSBzb21lb25lIHRvIGVucm9sbFwiKSxcbiAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICBcInNtYWxsLnRleHRTZWNvbmRhcnlcIixcbiAgICAgICAgICAgICAgICBgSW52aXRlIHNvbWVvbmUgd2l0aCB0aGVpciB1c2VybmFtZSBvciBlbWFpbC4gSW52aXRlZSBkb2VzIG5vdCBuZWVkIGEgS3Jha2VuRWR1IGFjY291bnQgdG8gYmUgaW52aXRlZCwgYnV0IHRoZXkgd2lsbCBuZWVkIGFuIGFjY291bnQgdG8gZW5yb2xsLmBcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgaChJbnB1dCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IGVtYWlsT3JVc2VybmFtZS5pbmNsdWRlcyhcIkBcIikgPyBcImVtYWlsXCIgOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogZW1haWxPclVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoZSkgPT4gc2V0RW1haWxPclVzZXJuYW1lKGUuY3VycmVudFRhcmdldC52YWx1ZSksXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB2YWxpZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgIDogdmFsaWRcbiAgICAgICAgICAgICAgICA/IGgoXCJzcGFuLmFjY2VudFN1Y2Nlc3NcIiwgXCJHcmVhdCwgZm91bmQgQFwiICsgZW1haWxPclVzZXJuYW1lKVxuICAgICAgICAgICAgICAgIDogaChcbiAgICAgICAgICAgICAgICAgICAgXCJzcGFuLmFjY2VudFJlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcIldlIGNhbid0IGZpbmQgYSB1c2VyIHdpdGggdGhhdCB1c2VybmFtZVwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBoKFxuICAgICAgICAgICAgICBQcmltYXJ5LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHsganVzdGlmeVNlbGY6IFwicmlnaHRcIiB9LFxuICAgICAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhZW1haWxPclVzZXJuYW1lLmluY2x1ZGVzKFwiQFwiKSAmJiB2YWxpZCAhPT0gdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCJJbnZpdGVcIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICBdKSxcbiAgICBdKSxcbiAgXSk7XG59XG5cbmNvbnN0IEVkaXREZXRhaWxzID0gKHByb3BzOiB7Y291cnNlOiBDb3Vyc2UsIG11dGF0ZTooY291cnNlOkNvdXJzZSk9PnZvaWR9KSA9PiB7XG4gIGxldCB7c3RhdGUsIGZvcm0sIGNoYW5nZWQsIHJlc2V0LCBzZXRTdGF0ZX0gPSB1c2VGb3JtRGF0YSh7XG4gICAgbmFtZTogcHJvcHMuY291cnNlLm5hbWUsXG4gICAgY2FyZF9pbWFnZTogcHJvcHMuY291cnNlLmNhcmRfaW1hZ2UsXG4gICAgY29ob3J0X21heF9zaXplOiBwcm9wcy5jb3Vyc2UuY29ob3J0X21heF9zaXplLFxuICAgIGRlc2NyaXB0aW9uOiBwcm9wcy5jb3Vyc2UuZGVzY3JpcHRpb24sXG4gICAgcHJlcmVxdWlzaXRlczogcHJvcHMuY291cnNlLnByZXJlcXVpc2l0ZXMsXG4gICAgY29zdDogcHJvcHMuY291cnNlLmNvc3QsXG4gICAgZHVyYXRpb246IHByb3BzLmNvdXJzZS5kdXJhdGlvblxuICB9LCBbcHJvcHMuY291cnNlXSlcbiAgbGV0IFtzdGF0dXMsIGNhbGxVcGRhdGVDb3Vyc2VdID0gdXNlQXBpPFVwZGF0ZUNvdXJzZU1zZywgVXBkYXRlQ291cnNlUmVzcG9uc2U+KFtdKVxuXG4gIGNvbnN0IG9uU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGxldCByZXMgPSBhd2FpdCBjYWxsVXBkYXRlQ291cnNlKGAvYXBpL2NvdXJzZXMvJHtwcm9wcy5jb3Vyc2UuaWR9YCwgey4uLnN0YXRlfSlcbiAgICBpZihyZXMuc3RhdHVzID09PSAyMDApIHByb3BzLm11dGF0ZSh7Li4ucHJvcHMuY291cnNlLCAuLi5yZXMucmVzdWx0fSlcbiAgfVxuXG4gIHJldHVybiBoKEZvcm1Cb3gsIHtvblN1Ym1pdCwgZ2FwOjMyLCBzdHlsZTp7d2lkdGg6IDQwMH19LCBbXG4gICAgaCgnaDInLCAnRWRpdCBEZXRhaWxzJyksXG4gICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgaCgnaDQnLCAnTmFtZScpLFxuICAgICAgaChJbnB1dCwge1xuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIG1heExlbmd0aDogNTAsXG4gICAgICAgIC4uLmZvcm0ubmFtZVxuICAgICAgfSksXG4gICAgXSksXG4gICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgaCgnaDQnLCAnQ29zdCAoVVNEKScpLFxuICAgICAgaChJbnB1dCwge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgLi4uZm9ybS5jb3N0XG4gICAgICB9KVxuICAgIF0pLFxuICAgIHByb3BzLmNvdXJzZS50eXBlID09PSAnY291cnNlJyA/IG51bGwgOiBoKEJveCwgIFtcbiAgICAgIGgoXCJkaXZcIiwgW1xuICAgICAgICBoKCdoNCcsIFwiRW1vamlzXCIpLFxuICAgICAgICBoKCdzbWFsbC50ZXh0U2Vjb25kYXJ5JywgXCJTZWxlY3QgdGhyZWUgZW1vamlzIHRvIGRlc2NyaWJlIHlvdXIgY2x1YiEgUmVwZWF0cyBvay5cIilcbiAgICAgIF0pLFxuICAgICAgaChJY29uUGlja2VyLCB7XG4gICAgICAgIGljb25zOiBzdGF0ZS5jYXJkX2ltYWdlLnNwbGl0KCcsJyksXG4gICAgICAgIHNldEljb25zOiAoaWNvbnM6c3RyaW5nW10pID0+IHtcbiAgICAgICAgICBzZXRTdGF0ZSh7Li4uc3RhdGUsIGNhcmRfaW1hZ2U6IGljb25zLmpvaW4oJywnKX0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgXSksXG4gICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgaCgnZGl2JywgW1xuICAgICAgICBoKCdoNCcsIFwiQ29ob3J0IFNpemVcIiksXG4gICAgICAgIGgoJ3NtYWxsLnRleHRTZWNvbmRhcnknLCBcIkhvdyBtYW55IGxlYXJuZXJzIGNhbiBlbnJvbGwgaW4gYSBjb2hvcnQuIFNldCB0byAwIGZvciBubyBsaW1pdC5cIilcbiAgICAgIF0pLFxuICAgICAgaChJbnB1dCwge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIC4uLmZvcm0uY29ob3J0X21heF9zaXplXG4gICAgICB9KVxuICAgIF0pLFxuICAgIGgoTGFiZWxCb3gsIHtnYXA6OH0sIFtcbiAgICAgIGgoJ2g0JywgJ0Rlc2NyaXB0aW9uJyksXG4gICAgICBoKFRleHRhcmVhLCB7XG4gICAgICAgIG1heExlbmd0aDogMjAwLFxuICAgICAgICAuLi5mb3JtLmRlc2NyaXB0aW9uXG4gICAgICAgIH0pLFxuICAgIF0pLFxuICAgIGgoTGFiZWxCb3gsIHtnYXA6OH0sIFtcbiAgICAgIGgoJ2g0JywgJ1ByZXJlcXVpc2l0ZXMnKSxcbiAgICAgIGgoVGV4dGFyZWEsIGZvcm0ucHJlcmVxdWlzaXRlcylcbiAgICBdKSxcbiAgICBoKExhYmVsQm94LCB7Z2FwOjh9LCBbXG4gICAgICBoKCdoNCcsICdEdXJhdGlvbicpLFxuICAgICAgaChJbnB1dCwgZm9ybS5kdXJhdGlvbilcbiAgICBdKSxcbiAgICBoKFN1Ym1pdEJ1dHRvbnMsIFtcbiAgICAgIGgoRGVzdHJ1Y3RpdmUsIHtkaXNhYmxlZDogIWNoYW5nZWQsIG9uQ2xpY2s6IChlKT0+e1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgcmVzZXQoKVxuICAgICAgfX0sIFwiRGlzY2FyZCBDaGFuZ2VzXCIpLFxuICAgICAgICBoKFByaW1hcnksIHt0eXBlOiAnc3VibWl0JywgZGlzYWJsZWQ6ICFjaGFuZ2VkLCBzdGF0dXN9LCAnU2F2ZSBDaGFuZ2VzJylcbiAgICBdKSxcbiAgICBoKE1haW50YWluZXJzLCBwcm9wcylcbiAgXSlcbn1cblxuZnVuY3Rpb24gTWFpbnRhaW5lcnMgKHByb3BzOiB7Y291cnNlOiBDb3Vyc2UsIG11dGF0ZTogKGM6IENvdXJzZSk9PnZvaWR9KSB7XG4gIGxldCBbbmV3TWFpbnRhaW5lciwgc2V0TmV3TWFpbnRhaW5lcl0gPSB1c2VTdGF0ZSgnJylcbiAgcmV0dXJuIGgoQm94LCBbXG4gICAgaCgnaDMnLCBcIk1haW50YWluZXJzXCIpLFxuICAgIC4uLnByb3BzLmNvdXJzZS5jb3Vyc2VfbWFpbnRhaW5lcnMubWFwKG09PntcbiAgICAgIHJldHVybiBtLnBlb3BsZS5kaXNwbGF5X25hbWUgfHwgbS5wZW9wbGUudXNlcm5hbWVcbiAgICB9KSxcbiAgICBoKCdoNCcsIFwiQWRkIGEgbWFpbnRhaW5lclwiKSxcbiAgICBoKEZvcm1Cb3gsIFtcbiAgICAgIGgoSW5wdXQsIHt2YWx1ZTogbmV3TWFpbnRhaW5lciwgb25DaGFuZ2U6KGUpPT5zZXROZXdNYWludGFpbmVyKGUuY3VycmVudFRhcmdldC52YWx1ZSl9KSxcbiAgICAgIGgoUHJpbWFyeSwge3R5cGU6J3N1Ym1pdCd9LCBcIkFkZFwiKVxuICAgIF0pXG4gIF0pXG59XG5cbmZ1bmN0aW9uIENvdXJzZVRlbXBsYXRlcyAocHJvcHM6IHtjb3Vyc2U6IENvdXJzZSwgbXV0YXRlOiAoYzpDb3Vyc2UpPT52b2lkfSkge1xuICByZXR1cm4gaChCb3gsIHtnYXA6IDMyfSwgW1xuICAgIGgoQm94LCBbXG4gICAgICBoKCdwJywgYEVhY2ggY29ob3J0IGNvbWVzIHdpdGggaXRzIG93biBjb21tdW5pdHkgc3BhY2UsIGFuZCB0ZW1wbGF0ZXMgdG8gaGVscCB5b3UgcG9wdWxhdGUgaXRzIHN0cnVjdHVyZSB3aXRoIHRvcGljcy5gKSxcbiAgICAgIGgoJ3VsJywge3N0eWxlOiB7J21hcmdpbic6ICdhdXRvIDAnfX0sIFtcbiAgICAgICAgaCgnbGknLCBbXG4gICAgICAgICAgaCgnYicsICdQcmVwb3B1bGF0ZWQnKSwgXG4gICAgICAgICAgaCgnc3BhbicsICcgdG9waWNzIGFyZSBhdXRvbWF0aWNhbGx5IHBvc3RlZCB3aGVuIGVhY2ggbmV3IGNvaG9ydCBpcyBjcmVhdGVkJylcbiAgICAgICAgXSksXG4gICAgICAgIGgoJ2xpJywgW1xuICAgICAgICAgIGgoJ2InLCAnVHJpZ2dlcmVkJyksIFxuICAgICAgICAgIGgoJ3NwYW4nLCAnIHRvcGljcyBjYW4gYmUgcG9zdGVkIGJ5IHRoZSBmYWNpbGl0YXRvciBmcm9tIHRoZSBjb2hvcnQgc2V0dGluZ3MgKGVkaXRhYmxlIGJlZm9yZSBwdWJsaXNoaW5nLCBzbyB1c2VmdWwgZm9yIGNyZWF0aW5nIG11bHRpcGxlIHRvcGljcyBmcm9tIG9uZSB0ZW1wbGF0ZSknKVxuICAgICAgICBdKVxuICAgICAgXSksXG4gICAgICBoKCdwJywgYFlvdSBjYW4gZWRpdCB0aGUgZGVmYXVsdCB0ZW1wbGF0ZXMgd2UndmUgcHJvdmlkZWQgYmVsb3csIG9yIGFkZCBuZXcgb25lcyFgKSxcbiAgICAgIGgoTGluaywge1xuICAgICAgICBocmVmOiAnL2NvdXJzZXMvW3NsdWddL1tpZF0vc2V0dGluZ3MvdGVtcGxhdGVzL1t0ZW1wbGF0ZUlkXScsXG4gICAgICAgIGFzOmAvY291cnNlcy8ke3Byb3BzLmNvdXJzZS5zbHVnfS8ke3Byb3BzLmNvdXJzZS5pZH0vc2V0dGluZ3MvdGVtcGxhdGVzL25ld2BcbiAgICAgIH0sIGgoJ2EnLCB7fSwgaChQcmltYXJ5LCBcIisgQWRkIEEgTmV3IFRlbXBsYXRlXCIpKSksXG4gICAgXSksXG4gICAgaChCb3gsIHt9LCBwcm9wcy5jb3Vyc2UuY291cnNlX3RlbXBsYXRlc1xuICAgICAgLnNvcnQoKGEsIGIpPT4gIGEubmFtZSA+IGIubmFtZSA/IDEgOiAtMSlcbiAgICAgIC5zb3J0KChhKT0+IGEucmVxdWlyZWQgPyAtMSA6IDEpXG4gICAgICAuZmxhdE1hcCh0ZW1wbGF0ZSA9PiB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgaChCb3gsIHtoOiB0cnVlLCBzdHlsZToge2dyaWRBdXRvQ29sdW1uczogJ2F1dG8nfX0sW1xuICAgICAgICAgICAgaCgnZGl2JywgW1xuICAgICAgICAgICAgICBoKCdoMycsIHRlbXBsYXRlLm5hbWUpLFxuICAgICAgICAgICAgICBoKCdzcGFuLnRleHRTZWNvbmRhcnknLCB0ZW1wbGF0ZS50eXBlID09PSdwcmVwb3B1bGF0ZWQnID8gXCJQcmVwb3B1bGF0ZWQgZm9yIGFsbCBjb2hvcnRzXCIgOiBcIk1hbnVhbGx5IHB1Ymxpc2hlZCBieSBmYWNpbGl0YXRvclwiKVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBoKEJveCwge2g6IHRydWUsIHN0eWxlOntqdXN0aWZ5U2VsZjogJ2VuZCcsIGFsaWduSXRlbXM6ICdjZW50ZXInfX0sIFtcbiAgICAgICAgICAgICAgdGVtcGxhdGUucmVxdWlyZWQgPyBudWxsIDogaChEZWxldGVUZW1wbGF0ZSwge2NvdXJzZTogcHJvcHMuY291cnNlLCBtdXRhdGU6IHByb3BzLm11dGF0ZSwgdGVtcGxhdGVOYW1lOiB0ZW1wbGF0ZS5uYW1lfSksXG4gICAgICAgICAgICAgIGgoTGluaywge1xuICAgICAgICAgICAgICAgIGhyZWY6ICcvY291cnNlcy9bc2x1Z10vW2lkXS9zZXR0aW5ncy90ZW1wbGF0ZXMvW3RlbXBsYXRlSWRdJyxcbiAgICAgICAgICAgICAgICBhczogYC9jb3Vyc2VzLyR7cHJvcHMuY291cnNlLnNsdWd9LyR7cHJvcHMuY291cnNlLmlkfS9zZXR0aW5ncy90ZW1wbGF0ZXMvJHt0ZW1wbGF0ZS5uYW1lfWBcbiAgICAgICAgICAgICAgfSwgaCgnYScsIHt9LCBoKFNlY29uZGFyeSwgJ0VkaXQnKSkpXG4gICAgICAgICAgICBdKVxuICAgICAgICAgIF0pLFxuICAgICAgICAgIGgoU2VwZXJhdG9yKVxuICAgICAgICBdfSkuc2xpY2UoMCwgLTEpKVxuICBdKVxufVxuXG5mdW5jdGlvbiBEZWxldGVUZW1wbGF0ZShwcm9wczp7dGVtcGxhdGVOYW1lOnN0cmluZywgY291cnNlOkNvdXJzZSwgbXV0YXRlOihjOkNvdXJzZSk9PnZvaWR9KSB7XG4gIGxldCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPCdub3JtYWwnIHwgJ2NvbmZpcm0nPignbm9ybWFsJylcbiAgbGV0IFtzdGF0dXMsIGNhbGxEZWxldGVdID0gdXNlQXBpPG51bGwsIERlbGV0ZVRlbXBsYXRlUmVzdWx0PihbcHJvcHNdKVxuICByZXR1cm4gaChGcmFnbWVudCwgW1xuICAgIGgoRGVzdHJ1Y3RpdmUsIHtvbkNsaWNrOiAoKT0+c2V0U3RhdGUoJ2NvbmZpcm0nKX0sICdEZWxldGUnKSxcbiAgICBoKE1vZGFsLCB7ZGlzcGxheTogc3RhdGUgIT09ICdub3JtYWwnLCBjbG9zZVRleHQ6XCJuZXZlcm1pbmRcIiwgb25FeGl0OiAoKT0+c2V0U3RhdGUoJ25vcm1hbCcpfSwgW1xuICAgICAgaChCb3gsIHtnYXA6MzIsIHN0eWxlOiB7dGV4dEFsaWduOiAnY2VudGVyJ319LCBbXG4gICAgICAgIGgoJ2gzJywgXCJBcmUgeW91IHN1cmU/XCIpLFxuICAgICAgICBoKCdwJywgXCJZb3UgY2FuJ3QgdW5kbyB0aGlzIGFjdGlvbiFcIiksXG4gICAgICAgIGgoUHJpbWFyeSwge3N0eWxlOiB7anVzdGlmeVNlbGY6XCJjZW50ZXJcIn0sIHN0YXR1cywgb25DbGljazphc3luYyAoKT0+e1xuICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBjYWxsRGVsZXRlKGAvYXBpL2NvdXJzZXMvJHtwcm9wcy5jb3Vyc2UuaWR9L3RlbXBsYXRlcy8ke3Byb3BzLnRlbXBsYXRlTmFtZX1gLCBudWxsLCBcIkRFTEVURVwiKVxuICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09MjAwKSB7XG4gICAgICAgICAgICBwcm9wcy5tdXRhdGUoe1xuICAgICAgICAgICAgICAuLi5wcm9wcy5jb3Vyc2UsXG4gICAgICAgICAgICAgIGNvdXJzZV90ZW1wbGF0ZXM6IHByb3BzLmNvdXJzZS5jb3Vyc2VfdGVtcGxhdGVzXG4gICAgICAgICAgICAgICAgLmZpbHRlcih0PT50Lm5hbWUhPT1wcm9wcy50ZW1wbGF0ZU5hbWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc2V0U3RhdGUoJ25vcm1hbCcpXG4gICAgICAgICAgfVxuICAgICAgICB9fSwgXCJZdXAgZGVsZXRlIGl0XCIpLFxuICAgICAgXSlcbiAgICBdKVxuICBdKVxufVxuXG5cbmNvbnN0IFN1Ym1pdEJ1dHRvbnMgPSBzdHlsZWQoJ2RpdicpYFxuanVzdGlmeS1zZWxmOiByaWdodDtcbmRpc3BsYXk6IGdyaWQ7XG5ncmlkLXRlbXBsYXRlLWNvbHVtbnM6IGF1dG8gYXV0bztcbmdyaWQtZ2FwOiAxNnB4O1xuYFxuXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUHJvcHMgPSBhc3luYyAoY3R4OmFueSkgPT4ge1xuICBsZXQgaWQgPSBwYXJzZUludChjdHgucGFyYW1zPy5pZCBhcyBzdHJpbmcgfHwgJycgKVxuICBpZihOdW1iZXIuaXNOYU4oaWQpKSByZXR1cm4ge3Byb3BzOiB7bm90Rm91bmQ6IHRydWV9fSBhcyBjb25zdFxuXG4gIGxldCBkYXRhID0gYXdhaXQgY291cnNlRGF0YVF1ZXJ5KGlkKVxuICBpZighZGF0YSkgcmV0dXJuIHtwcm9wczp7bm90Rm91bmQ6IHRydWV9fSBhcyBjb25zdFxuICBsZXQgY29udGVudCA9IGF3YWl0IGdldFRhZ2dlZFBvc3QoZGF0YS5jYXRlZ29yeV9pZCwgJ2N1cnJpY3VsdW0nKVxuXG4gIHJldHVybiB7cHJvcHM6IHtub3RGb3VuZDogZmFsc2UsIGlkLCBjb3Vyc2U6IGRhdGEsIGNvbnRlbnR9LCByZXZhbGlkYXRlOiAxfSBhcyBjb25zdFxufVxuXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUGF0aHMgPSAoKSA9PiB7XG4gIHJldHVybiB7cGF0aHM6W10sIGZhbGxiYWNrOiB0cnVlfVxufVxuIl19 */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n});","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/pages/courses/[slug]/[id]/settings/index.ts"],"names":["h","useRouter","Link","useState","useEffect","Fragment","Tabs","useApi","callApi","useCourseData","useUserData","PageLoader","Box","Seperator","LabelBox","FormBox","Info","Error","Select","Input","Textarea","CheckBox","Primary","Destructive","Secondary","BackButton","IconButton","Discounts","ErrorPage","useDebouncedEffect","useFormData","Modal","Cohort","IconPicker","Cross","Pill","COPY","cancelCohort","href","WrappedCourseSettingsPage","props","notFound","CourseSettings","id","course","undefined","data","mutate","user","router","isMaintainer","course_maintainers","find","maintainer","push","gap","width","as","query","slug","type","tabs","Cohorts","CohortSettings","Details","EditDetails","Invites","Templates","CourseTemplates","AddCohort","course_cohorts","map","cohort","facilitating","cohort_facilitators","f","facilitator","enrolled","cohort_max_size","invited","start_date","start_time","facilitators","newCohort","setNewCohort","status","callCreateCohort","timezone","Date","toLocaleDateString","timeZoneName","split","onSubmit","e","preventDefault","date","x","parseInt","time","start","courseId","toISOString","res","result","people_in_cohorts","courses","name","style","required","onChange","currentTarget","value","people","display_name","username","m","onClick","filter","f2","height","placeholder","justifySelf","success","disabled","length","emailOrUsername","setEmailOrUsername","invite_only","setInviteOnly","valid","setValid","callInviteToCourse","updateStatus","callUpdateCourse","includes","onSubmitInvite","email","onSubmitToggleInviteOnly","checked","card_image","description","prerequisites","cost","duration","state","form","changed","reset","setState","maxLength","icons","setIcons","join","SubmitButtons","Maintainers","newMaintainer","setNewMaintainer","course_templates","sort","a","b","flatMap","template","gridAutoColumns","alignItems","DeleteTemplate","templateName","slice","callDelete","display","closeText","onExit","textAlign","t"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport { useState, useEffect, Fragment } from 'react'\nimport { InferGetStaticPropsType } from 'next'\nimport styled from '@emotion/styled'\n\nimport { Tabs } from 'components/Tabs'\nimport { useApi, callApi } from 'src/apiHelpers'\nimport { Course, useCourseData, useUserData } from 'src/data'\nimport { PageLoader } from 'components/Loader'\nimport { Box, Seperator, LabelBox, FormBox } from 'components/Layout'\nimport { Info, Error, Select, Input, Textarea, CheckBox } from 'components/Form'\nimport { Primary, Destructive, Secondary, BackButton, IconButton } from 'components/Button'\nimport {Discounts} from 'components/pages/courses/settings/Discounts'\nimport ErrorPage from 'pages/404'\nimport { useDebouncedEffect, useFormData } from 'src/hooks'\nimport { courseDataQuery, UpdateCourseMsg, UpdateCourseResponse } from 'pages/api/courses/[id]'\nimport { CheckUsernameResult } from 'pages/api/get/[...item]'\nimport { CreateCohortMsg, CreateCohortResponse } from 'pages/api/cohorts'\nimport { InviteToCourseMsg, InviteToCourseResponse } from 'pages/api/courses/[id]/invite'\nimport { Modal } from 'components/Modal'\nimport { DeleteTemplateResult } from 'pages/api/courses/[id]/templates/[templateId]'\nimport { getTaggedPost } from 'src/discourse'\nimport { Cohort } from '..'\nimport { IconPicker } from 'components/IconPicker'\nimport { Cross } from 'components/Icons'\nimport { Pill } from 'components/Pill'\n\nconst COPY = {\n  cancelCohort: h(\"p.textSecondary\", [\n    `Contact us at `,\n    h(\"a\", { href: \"mailto:contact@krakenedu.com\" }, `contact@krakenedu.com`),\n    ` to cancel a cohort. Optionally,  let us know the reason youre cancelling (were curious )`,\n  ]),\n};\n\ntype Props = InferGetStaticPropsType<typeof getStaticProps>\nconst WrappedCourseSettingsPage = (props: Props)=>props.notFound ? h(ErrorPage) : h(CourseSettings, props)\nfunction CourseSettings(props:Extract<Props, {notFound:false}>){\n  let {data: course, mutate} = useCourseData(props.id, props.course || undefined)\n  let {data: user} = useUserData()\n  let router = useRouter()\n\n  useEffect(()=>{\n    if(user === undefined) return\n    if(course) {\n      let isMaintainer = !!(course.course_maintainers.find(maintainer => user && maintainer.maintainer === user.id))\n      if(!isMaintainer) router.push('/')\n    }\n  }, [user, course])\n  if(!course || !user) return h(PageLoader)\n\n  return h(Box, { gap: 64, width: 640 }, [\n    h(Box, { gap: 16 }, [\n      h(\n        BackButton,\n        {\n          href: \"/courses/[slug]/[id]\",\n          as: `/courses/${router.query.slug}/${router.query.id}`,\n        },\n        course.type === \"club\" ? \"Club\" : \"Course\"\n      ),\n      h(\"h1\", \"Settings\"),\n      h(\"p.big\", [\n        `KrakenEdu is new and some things can only be done manually for now! To add a new maintainer, remove a cohort, or anything else you don't see here, please email `,\n        h(\"a\", { href: \"mailto:help@krakenedu.com\" }, \"help@krakenedu.com\"),\n      ]),\n    ]),\n    h(Tabs, {\n      tabs: {\n        Cohorts: h(CohortSettings, { course, mutate }),\n        Details: h(EditDetails, { course, mutate }),\n        Invites: h(Invites, { course, mutate }),\n        Templates: h(CourseTemplates, { course, mutate }),\n        Discounts: h(Discounts, { course: course.id }),\n      },\n    }),\n  ]);\n}\n\nexport default WrappedCourseSettingsPage\n\n\nfunction CohortSettings(props:{course:Course, mutate: (course:Course)=>void}) {\n  let {data: user} = useUserData()\n  return h(Box, {gap: 32}, [\n    h(AddCohort, props),\n    h(Seperator),\n    h(Box, {gap: 16}, [\n      h('h3', \"Cancel a Cohort\"),\n      COPY.cancelCohort\n    ]),\n    h(Box, [\n      h('h3', \"All Cohorts\"),\n      h(Box, {gap:32}, props.course.course_cohorts.map((cohort)=>{\n        let facilitating = !!cohort.cohort_facilitators.find(f=>user&&f.facilitator === user.id)\n        return h(Cohort, {\n          cohort,\n          enrolled: false,\n          facilitating,\n          slug: props.course.slug,\n          cohort_max_size: props.course.cohort_max_size,\n          invited: true\n        })\n      })),\n    ])\n  ])\n}\n\n//feature to add a new cohort to a course\nconst AddCohort = (props:{course:Course, mutate:(c:Course)=>void})=> {\n  let [newCohort, setNewCohort] = useState({start_date: '', start_time: '', facilitators: [] as string[]})\n  let [status, callCreateCohort] = useApi<CreateCohortMsg, CreateCohortResponse>([newCohort])\n\n  let timezone = new Date().toLocaleDateString('en-us',{timeZoneName:\"short\"}).split(', ')[1]\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n\n    let date = newCohort.start_date.split('-').map(x=>parseInt(x))\n    let time = newCohort.start_time.split(':').map(x=>parseInt(x))\n    let start = new Date(date[0], date[1] -1, date[2], time[0], time[1])\n\n    let res = await callCreateCohort(`/api/cohorts`, {courseId: props.course.id, facilitators:newCohort.facilitators, start: start.toISOString()})\n    if(res.status === 200) props.mutate({\n        ...props.course,\n        course_cohorts: [...props.course.course_cohorts, {...res.result, people_in_cohorts:[], courses: {name: props.course.name}}]\n      })\n  }\n\n  return h(FormBox, {onSubmit, gap: 32, style: {width: 400}}, [\n    h('h2', 'Add a new Cohort'),\n    status === 'error' ? h(Error, 'An error occured') : null,\n    status === 'success' ? h(Info, 'Cohort created!') : null,\n    h(LabelBox, {gap:8}, [\n      h('h4', \"Facilitator\"),\n      h(Select, {\n        required: true,\n        onChange: (e:React.ChangeEvent<HTMLSelectElement>)=> setNewCohort({...newCohort, facilitators: [...newCohort.facilitators, e.currentTarget.value]})\n      }, [\n        h('option', {value: ''}, \"Select a facilitator\"),\n        ...(props.course.course_maintainers.map(maintainer => {\n          return h('option', {value: maintainer.maintainer}, maintainer.people.display_name || maintainer.people.username)\n        })||[])\n      ]),\n      h(Box, {h:true}, newCohort.facilitators.map(f=>{\n        let facilitator = props.course.course_maintainers.find(m=>m.maintainer === f)\n        if(!facilitator) return null\n        return h(Pill, {}, h(Box, {h:true, gap:4}, [\n          h('p', facilitator.people.display_name || facilitator.people.username),\n          h(IconButton, {onClick:e=>{\n            e.preventDefault()\n            setNewCohort({...newCohort, facilitators:newCohort.facilitators.filter(f2=>f2!==f)})\n          }}, h(Cross, {width: 10, height:10}))\n        ]))\n      }))\n    ]),\n    h(Box, {h: true, gap: 32}, [\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Start Date'),\n      h(Input, {\n        type: 'date',\n        placeholder: 'yyyy-mm-dd',\n        required: true,\n        value: newCohort.start_date,\n        onChange: e => setNewCohort({...newCohort, start_date: e.currentTarget.value})\n      })\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', `Start time (${timezone})`),\n      h(Input, {\n        type: 'time',\n        placeholder: '23:59',\n        required: true,\n        value: newCohort.start_time,\n        onChange: e => setNewCohort({...newCohort, start_time: e.currentTarget.value})\n      })\n    ]),\n    ]),\n    h(Primary, {\n      style: {justifySelf: 'right'},\n      status,\n      type: 'submit',\n      success: status === 'success',\n      disabled: !newCohort.start_date || newCohort.facilitators.length===0\n    }, 'Add a new Cohort'),\n  ])\n}\n\nconst Invites = (props:{course:Course, mutate: (c:Course) => void})=> {\n  let [emailOrUsername, setEmailOrUsername] = useState('')\n  let [invite_only, setInviteOnly] = useState(props.course.invite_only)\n  let [valid, setValid] = useState<null | boolean>(null)\n  let [status, callInviteToCourse] = useApi<InviteToCourseMsg, InviteToCourseResponse>([emailOrUsername], ()=>setEmailOrUsername(''))\n  let [updateStatus, callUpdateCourse] = useApi<UpdateCourseMsg, UpdateCourseResponse>([])\n\n  useDebouncedEffect(async ()=>{\n    if(emailOrUsername.includes('@') || emailOrUsername === '') return setValid(null)\n    let res = await callApi<null, CheckUsernameResult>('/api/get/username/'+emailOrUsername)\n    if(res.status===404) setValid(false)\n    else setValid(true)\n  }, 500, [emailOrUsername])\n  useEffect(()=>setValid(null),[emailOrUsername])\n\n  let onSubmitInvite = async (e: React.FormEvent)=>{\n    e.preventDefault()\n    let x = emailOrUsername.includes('@') ? {email: emailOrUsername} : {username: emailOrUsername}\n    callInviteToCourse(`/api/courses/${props.course.id}/invite`, {...x})\n  }\n\n  let onSubmitToggleInviteOnly = async (e:React.FormEvent)=>{\n    e.preventDefault()\n    let res = await callUpdateCourse(`/api/courses/${props.course.id}`, {invite_only})\n    if(res.status === 200) props.mutate({...props.course, ...res.result})\n  }\n\n  return h(Box, { gap: 16, width: 400 }, [\n    h(\"h2\", \"Invites\"),\n    h(Box, { gap: 32 }, [\n      h(FormBox, { onSubmit: onSubmitToggleInviteOnly }, [\n        h(LabelBox, { gap: 8, width: 400 }, [\n          h(\"div\", [\n            h(\"h4\", \"Invite Only\"),\n            h(\n              \"small.textSecondary\",\n              `Learners cannot enroll in an invite only course unless you have sent them an\ninvite. The invite allows them enroll in any cohort and does not expire.`\n            ),\n          ]),\n          h(CheckBox, [\n            h(Input, {\n              type: \"checkbox\",\n              checked: invite_only,\n              onChange: (e) => setInviteOnly(e.currentTarget.checked),\n            }),\n            \"Make this course invite only\",\n          ]),\n        ]),\n        h(\n          Primary,\n          {\n            style: { justifySelf: \"right\" },\n            status: updateStatus,\n            type: \"submit\",\n            disabled: props.course.invite_only === invite_only,\n          },\n          \"Change\"\n        ),\n      ]),\n      !props.course.invite_only\n        ? null\n        : h(FormBox, { onSubmit: onSubmitInvite, gap: 32, width: 400 }, [\n            h(LabelBox, { gap: 8 }, [\n              h(\"h4\", \"Invite someone to enroll\"),\n              h(\n                \"small.textSecondary\",\n                `Invite someone with their username or email. Invitee does not need a KrakenEdu account to be invited, but they will need an account to enroll.`\n              ),\n              h(Input, {\n                type: emailOrUsername.includes(\"@\") ? \"email\" : \"text\",\n                value: emailOrUsername,\n                onChange: (e) => setEmailOrUsername(e.currentTarget.value),\n              }),\n              valid === null\n                ? null\n                : valid\n                ? h(\"span.accentSuccess\", \"Great, found @\" + emailOrUsername)\n                : h(\n                    \"span.accentRed\",\n                    \"We can't find a user with that username\"\n                  ),\n            ]),\n            h(\n              Primary,\n              {\n                style: { justifySelf: \"right\" },\n                status,\n                type: \"submit\",\n                disabled: !emailOrUsername.includes(\"@\") && valid !== true,\n              },\n              \"Invite\"\n            ),\n          ]),\n    ]),\n  ]);\n}\n\nconst EditDetails = (props: {course: Course, mutate:(course:Course)=>void}) => {\n  let {state, form, changed, reset, setState} = useFormData({\n    name: props.course.name,\n    card_image: props.course.card_image,\n    cohort_max_size: props.course.cohort_max_size,\n    description: props.course.description,\n    prerequisites: props.course.prerequisites,\n    cost: props.course.cost,\n    duration: props.course.duration\n  }, [props.course])\n  let [status, callUpdateCourse] = useApi<UpdateCourseMsg, UpdateCourseResponse>([])\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    let res = await callUpdateCourse(`/api/courses/${props.course.id}`, {...state})\n    if(res.status === 200) props.mutate({...props.course, ...res.result})\n  }\n\n  return h(FormBox, {onSubmit, gap:32, style:{width: 400}}, [\n    h('h2', 'Edit Details'),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Name'),\n      h(Input, {\n        type: 'text',\n        maxLength: 50,\n        ...form.name\n      }),\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Cost (USD)'),\n      h(Input, {\n        type: 'number',\n        ...form.cost\n      })\n    ]),\n    props.course.type === 'course' ? null : h(Box,  [\n      h(\"div\", [\n        h('h4', \"Emojis\"),\n        h('small.textSecondary', \"Select three emojis to describe your club! Repeats ok.\")\n      ]),\n      h(IconPicker, {\n        icons: state.card_image.split(','),\n        setIcons: (icons:string[]) => {\n          setState({...state, card_image: icons.join(',')})\n        }\n      })\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('div', [\n        h('h4', \"Cohort Size\"),\n        h('small.textSecondary', \"How many learners can enroll in a cohort. Set to 0 for no limit.\")\n      ]),\n      h(Input, {\n        type: 'number',\n        required: true,\n        ...form.cohort_max_size\n      })\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Description'),\n      h(Textarea, {\n        maxLength: 200,\n        ...form.description\n        }),\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Prerequisites'),\n      h(Textarea, form.prerequisites)\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Duration'),\n      h(Input, form.duration)\n    ]),\n    h(SubmitButtons, [\n      h(Destructive, {disabled: !changed, onClick: (e)=>{\n        e.preventDefault()\n        reset()\n      }}, \"Discard Changes\"),\n        h(Primary, {type: 'submit', disabled: !changed, status}, 'Save Changes')\n    ]),\n    h(Maintainers, props)\n  ])\n}\n\nfunction Maintainers (props: {course: Course, mutate: (c: Course)=>void}) {\n  let [newMaintainer, setNewMaintainer] = useState('')\n  return h(Box, [\n    h('h3', \"Maintainers\"),\n    ...props.course.course_maintainers.map(m=>{\n      return m.people.display_name || m.people.username\n    }),\n    h('h4', \"Add a maintainer\"),\n    h(FormBox, [\n      h(Input, {value: newMaintainer, onChange:(e)=>setNewMaintainer(e.currentTarget.value)}),\n      h(Primary, {type:'submit'}, \"Add\")\n    ])\n  ])\n}\n\nfunction CourseTemplates (props: {course: Course, mutate: (c:Course)=>void}) {\n  return h(Box, {gap: 32}, [\n    h(Box, [\n      h('p', `Each cohort comes with its own community space, and templates to help you populate its structure with topics.`),\n      h('ul', {style: {'margin': 'auto 0'}}, [\n        h('li', [\n          h('b', 'Prepopulated'), \n          h('span', ' topics are automatically posted when each new cohort is created')\n        ]),\n        h('li', [\n          h('b', 'Triggered'), \n          h('span', ' topics can be posted by the facilitator from the cohort settings (editable before publishing, so useful for creating multiple topics from one template)')\n        ])\n      ]),\n      h('p', `You can edit the default templates we've provided below, or add new ones!`),\n      h(Link, {\n        href: '/courses/[slug]/[id]/settings/templates/[templateId]',\n        as:`/courses/${props.course.slug}/${props.course.id}/settings/templates/new`\n      }, h('a', {}, h(Primary, \"+ Add A New Template\"))),\n    ]),\n    h(Box, {}, props.course.course_templates\n      .sort((a, b)=>  a.name > b.name ? 1 : -1)\n      .sort((a)=> a.required ? -1 : 1)\n      .flatMap(template => {\n        return [\n          h(Box, {h: true, style: {gridAutoColumns: 'auto'}},[\n            h('div', [\n              h('h3', template.name),\n              h('span.textSecondary', template.type ==='prepopulated' ? \"Prepopulated for all cohorts\" : \"Manually published by facilitator\")\n            ]),\n            h(Box, {h: true, style:{justifySelf: 'end', alignItems: 'center'}}, [\n              template.required ? null : h(DeleteTemplate, {course: props.course, mutate: props.mutate, templateName: template.name}),\n              h(Link, {\n                href: '/courses/[slug]/[id]/settings/templates/[templateId]',\n                as: `/courses/${props.course.slug}/${props.course.id}/settings/templates/${template.name}`\n              }, h('a', {}, h(Secondary, 'Edit')))\n            ])\n          ]),\n          h(Seperator)\n        ]}).slice(0, -1))\n  ])\n}\n\nfunction DeleteTemplate(props:{templateName:string, course:Course, mutate:(c:Course)=>void}) {\n  let [state, setState] = useState<'normal' | 'confirm'>('normal')\n  let [status, callDelete] = useApi<null, DeleteTemplateResult>([props])\n  return h(Fragment, [\n    h(Destructive, {onClick: ()=>setState('confirm')}, 'Delete'),\n    h(Modal, {display: state !== 'normal', closeText:\"nevermind\", onExit: ()=>setState('normal')}, [\n      h(Box, {gap:32, style: {textAlign: 'center'}}, [\n        h('h3', \"Are you sure?\"),\n        h('p', \"You can't undo this action!\"),\n        h(Primary, {style: {justifySelf:\"center\"}, status, onClick:async ()=>{\n          let res = await callDelete(`/api/courses/${props.course.id}/templates/${props.templateName}`, null, \"DELETE\")\n          if(res.status ===200) {\n            props.mutate({\n              ...props.course,\n              course_templates: props.course.course_templates\n                .filter(t=>t.name!==props.templateName)\n            })\n            setState('normal')\n          }\n        }}, \"Yup delete it\"),\n      ])\n    ])\n  ])\n}\n\n\nconst SubmitButtons = styled('div')`\njustify-self: right;\ndisplay: grid;\ngrid-template-columns: auto auto;\ngrid-gap: 16px;\n`\n\nexport const getStaticProps = async (ctx:any) => {\n  let id = parseInt(ctx.params?.id as string || '' )\n  if(Number.isNaN(id)) return {props: {notFound: true}} as const\n\n  let data = await courseDataQuery(id)\n  if(!data) return {props:{notFound: true}} as const\n  let content = await getTaggedPost(data.category_id, 'curriculum')\n\n  return {props: {notFound: false, id, course: data, content}, revalidate: 1} as const\n}\n\nexport const getStaticPaths = () => {\n  return {paths:[], fallback: true}\n}\n"]},"metadata":{},"sourceType":"module"}