{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport useSWR from 'swr';\nimport { callApi } from './apiHelpers';\nexport var useUserData = function useUserData() {\n  return useSWR('/api/get/whoami', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context.sent;\n              return _context.abrupt(\"return\", res.result);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\nexport var useProfileData = function useProfileData(username, initialData) {\n  return useSWR(username ? '/api/people/' + username : null, /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res.status === 200)) {\n                _context2.next = 7;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", res.result);\n\n            case 7:\n              return _context2.abrupt(\"return\", false);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), {\n    initialData: initialData\n  });\n};\nexport var useCourseData = function useCourseData(id, initialData) {\n  return useSWR(id ? '/api/courses/' + id : null, /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res.status === 200)) {\n                _context3.next = 5;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", res.result);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), {\n    initialData: initialData\n  });\n};\nexport var useEventData = function useEventData(id, initialData) {\n  return useSWR(\"/api/events/\".concat(id), /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context4.sent;\n\n              if (!(res.status === 200)) {\n                _context4.next = 7;\n                break;\n              }\n\n              return _context4.abrupt(\"return\", res.result);\n\n            case 7:\n              return _context4.abrupt(\"return\", false);\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }(), {\n    initialData: initialData\n  });\n};\nexport var useCohortData = function useCohortData(cohort, initialData) {\n  return useSWR(cohort ? \"/api/cohorts/\".concat(cohort) : null, /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context5.sent;\n\n              if (!(res.status === 200)) {\n                _context5.next = 7;\n                break;\n              }\n\n              return _context5.abrupt(\"return\", res.result);\n\n            case 7:\n              return _context5.abrupt(\"return\", false);\n\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }(), {\n    initialData: initialData,\n    revalidateOnMount: true\n  });\n};\nexport var useUserCohorts = function useUserCohorts() {\n  return useSWR('/api/get/user_cohorts', /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context6.sent;\n\n              if (!(res.status === 200)) {\n                _context6.next = 5;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", res.result);\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function (_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }());\n};\nexport var useUserCourses = function useUserCourses() {\n  return useSWR('/api/get/user_courses', /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context7.sent;\n\n              if (!(res.status === 200)) {\n                _context7.next = 5;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", res.result);\n\n            case 5:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function (_x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }());\n};\nexport var useCourses = function useCourses(options) {\n  return useSWR(\"/api/courses\".concat(options !== null && options !== void 0 && options.type ? \"?type=\".concat(options.type) : ''), /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context8.sent;\n              return _context8.abrupt(\"return\", res.result);\n\n            case 4:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function (_x8) {\n      return _ref8.apply(this, arguments);\n    };\n  }(), {\n    initialData: options === null || options === void 0 ? void 0 : options.initialData\n  });\n};\nexport var useDiscounts = function useDiscounts(id) {\n  return useSWR(\"/api/courses/\".concat(id, \"/discounts\"), /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(api) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return callApi(api);\n\n            case 2:\n              res = _context9.sent;\n\n              if (!(res.status === 200)) {\n                _context9.next = 5;\n                break;\n              }\n\n              return _context9.abrupt(\"return\", res.result);\n\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function (_x9) {\n      return _ref9.apply(this, arguments);\n    };\n  }());\n};","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/src/data.ts"],"names":["useSWR","callApi","useUserData","api","res","result","useProfileData","username","initialData","status","useCourseData","id","useEventData","useCohortData","cohort","revalidateOnMount","useUserCohorts","useUserCourses","useCourses","options","type","useDiscounts"],"mappings":"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","sourcesContent":["import useSWR from 'swr'\nimport {callApi, Success} from './apiHelpers'\nimport { UserCohortsResult, WhoAmIResult, UserCoursesResult} from '../pages/api/get/[...item]'\nimport { CohortResult } from '../pages/api/cohorts/[cohortId]'\nimport { CourseDataResult } from '../pages/api/courses/[id]'\nimport { ProfileResult } from '../pages/api/people/[id]'\nimport { CourseResult } from '../pages/api/courses'\nimport { GetDiscountsResult } from 'pages/api/courses/[id]/discounts'\nimport { GETEventResult } from 'pages/api/events/[id]'\n\nexport type User = Success<WhoAmIResult>\nexport const useUserData = ()=>{\n  return useSWR('/api/get/whoami', async (api) => {\n    let res = await callApi<null, WhoAmIResult>(api)\n    return res.result\n  })\n}\n\nexport const useProfileData = (username?:string, initialData?:Success<ProfileResult>)=>{\n  return useSWR(username ? '/api/people/'+username : null, async api =>{\n    let res = await callApi<null, ProfileResult>(api)\n    if(res.status===200) return res.result\n    else return false\n  }, {initialData})\n}\n\nexport type Course = Success<CourseDataResult>\nexport const useCourseData = (id?: number | string, initialData?:Success<CourseDataResult>) => {\n  return useSWR(id ? '/api/courses/' + id : null, async api => {\n    let res = await callApi<null, CourseDataResult>(api)\n    if(res.status === 200) return res.result\n  }, {initialData})\n}\n\nexport type Event = Success<GETEventResult>\nexport const useEventData = (id: number, initialData?:Event) => useSWR(`/api/events/${id}`, async api => {\n  let res = await callApi<null, GETEventResult>(api)\n  if(res.status === 200) return res.result\n  else return false\n}, {initialData})\n\nexport type Cohort = Success<CohortResult>\nexport const useCohortData = (cohort?: number, initialData?:Success<CohortResult>) => {\n  return useSWR(cohort ? `/api/cohorts/${cohort}`:null, async api => {\n    let res = await callApi<null, CohortResult>(api)\n    if(res.status === 200) return res.result\n    else return false\n  }, {initialData, revalidateOnMount: true})\n}\n\nexport const useUserCohorts = () => {\n  return useSWR('/api/get/user_cohorts', async(api) => {\n    let res = await callApi<null, UserCohortsResult>(api)\n    if(res.status===200) return res.result\n  })\n}\n\nexport const useUserCourses = ()=>{\n  return useSWR('/api/get/user_courses', async(api)=>{\n    let res=await(callApi<null, UserCoursesResult>(api))\n    if(res.status===200) return res.result\n  })\n}\n\nexport type Courses = Success<CourseResult>\nexport const useCourses = (options?:Partial<{type: \"course\" | \"club\", initialData?:Success<CourseResult>}>) => {\n  return useSWR(`/api/courses${options?.type ? `?type=${options.type}`: ''}`, async (api) => {\n    let res = await callApi<null, CourseResult>(api)\n    return res.result\n  }, {initialData:options?.initialData})\n}\n\nexport const useDiscounts = (id: number) => {\n  return useSWR(`/api/courses/${id}/discounts`, async (api)=>{\n    let res = await callApi<null, GetDiscountsResult>(api)\n    if(res.status===200) return res.result\n  })\n}\n"]},"metadata":{},"sourceType":"module"}