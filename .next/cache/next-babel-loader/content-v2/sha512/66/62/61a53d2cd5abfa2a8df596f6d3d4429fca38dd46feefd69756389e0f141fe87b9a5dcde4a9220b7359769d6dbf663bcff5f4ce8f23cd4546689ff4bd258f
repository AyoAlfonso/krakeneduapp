{"ast":null,"code":"import _styled from \"@emotion/styled-base\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport h from 'react-hyperscript';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { useState, useEffect, Fragment } from 'react';\nimport CourseDetails from 'components/Course/Enroll';\nimport { EnrollButton } from 'components/Course/EnrollButton';\nimport { SubEnrollButton } from 'components/Course/SubEnrollButton';\nimport { TwoColumn, Box, LabelBox, Seperator, Sidebar, WhiteContainer } from 'components/Layout';\nimport { VerticalTabs, StickyWrapper } from 'components/Tabs';\nimport { Primary, Destructive, DestructiveSmallButton, Secondary, LinkButton } from 'components/Button';\nimport Loader, { PageLoader } from 'components/Loader';\nimport { CheckBox, Info, Input } from 'components/Form';\nimport { Modal } from 'components/Modal';\nimport { TwoColumnBanner } from 'components/Banner';\nimport Text from 'components/Text';\nimport { WelcomeModal } from 'components/pages/cohorts/WelcomeModal';\nimport { cohortName, prettyDate } from 'src/utils';\nimport { getTaggedPost } from 'src/discourse';\nimport { DISCOURSE_URL } from 'src/constants';\nimport { callApi, useApi } from 'src/apiHelpers';\nimport { useCohortData, useUserCohorts, useUserData, useCourseData, useProfileData } from 'src/data';\nimport ErrorPage from 'pages/404';\nimport { cohortDataQuery } from 'pages/api/cohorts/[cohortId]';\nimport { courseDataQuery } from 'pages/api/courses/[id]';\nimport Head from 'next/head';\nimport { CohortEvents } from 'components/pages/cohorts/Events';\nimport { CreateEvent } from 'components/pages/cohorts/CreateEvent';\nimport { AccentImg } from 'components/Images';\nimport { TodoList } from 'components/TodoList';\n\nconst WrappedCohortPage = props => props.notFound ? h(ErrorPage) : h(CohortPage, props);\n\nexport default WrappedCohortPage;\n\nconst CohortPage = props => {\n  var _props$artifacts, _props$curriculum, _props$curriculum2;\n\n  let router = useRouter();\n  let {\n    data: user\n  } = useUserData();\n  let {\n    data: userCohorts\n  } = useUserCohorts();\n  let {\n    data: profile\n  } = useProfileData(user ? user.username : undefined);\n  let {\n    data: cohort,\n    mutate\n  } = useCohortData(props.cohortId, props.cohort);\n  let {\n    data: course\n  } = useCourseData(props.courseId, props.course);\n  let selectedTab = router.query.tab;\n  useEffect(() => {\n    mutate(undefined, true);\n  }, [!!cohort]);\n  if (!cohort || !course) return h(PageLoader);\n  let invited = !!(userCohorts !== null && userCohorts !== void 0 && userCohorts.invited_courses.find(course => course.id === props.course.id));\n  let inCohort = cohort.people_in_cohorts.find(p => p.person === (user ? user.id : undefined));\n  let isFacilitator = !!user && !!cohort.cohort_facilitators.find(f => user && f.people.username === user.username);\n  let isStarted = cohort && new Date() > new Date(cohort.start_date);\n  let Tabs = {\n    Artifacts: props.artifacts.text === '' ? null : h(Box, {\n      gap: 64\n    }, [h(Box, {\n      gap: 32\n    }, [h(Box, [h(Text, {\n      source: (_props$artifacts = props.artifacts) === null || _props$artifacts === void 0 ? void 0 : _props$artifacts.text\n    })])])]),\n    Schedule: cohort.cohort_events.length === 0 && !isFacilitator ? null : h(Box, {\n      gap: 32\n    }, [isFacilitator || inCohort ? h(CreateEvent, {\n      cohort: cohort.id,\n      people: [...cohort.people_in_cohorts.map(p => p.people.username), ...cohort.cohort_facilitators.map(f => f.people.username)],\n      mutate: c => {\n        if (!cohort) return;\n        mutate(_objectSpread(_objectSpread({}, cohort), {}, {\n          cohort_events: [...cohort.cohort_events, c]\n        }));\n      }\n    }) : null, h(Box, [cohort.cohort_events.length === 0 ? h(WhiteContainer, [h(Box, {\n      gap: 16,\n      style: {\n        maxWidth: 400,\n        textAlign: 'center',\n        margin: 'auto'\n      }\n    }, [h(EmptyImg, {\n      src: '/img/empty.png'\n    }), h('small.textSecondary', \"Events are great for scheduling live calls or other important cohort dates. Learners can add these to their calendars. Looks like you haven't created any events yet. Hit the button above to schedule one!!\")])]) : h(CohortEvents, {\n      facilitating: isFacilitator,\n      inCohort: !!inCohort,\n      people: cohort.people_in_cohorts.map(p => p.people.username),\n      cohort: cohort.id,\n      events: cohort.cohort_events.filter(c => {\n        if (!user || !cohort) return c.everyone;\n        if (isFacilitator) return true;\n        return c.everyone || c.events.people_in_events.find(p => user && p.people.username === user.username);\n      }),\n      mutate: events => {\n        if (!cohort) return;\n        mutate(_objectSpread(_objectSpread({}, cohort), {}, {\n          cohort_events: events\n        }));\n      },\n      showCal: (inCohort || isFacilitator) && cohort.cohort_events.length > 0\n    })])]),\n    [course.type === 'club' ? \"Details\" : \"Curriculum\"]: h(Box, [!isFacilitator ? null : h(Info, [`ðŸ’¡ You can make changes to this page by editing `, h('a', {\n      href: `${DISCOURSE_URL}/session/sso?return_path=/t/${(_props$curriculum = props.curriculum) === null || _props$curriculum === void 0 ? void 0 : _props$curriculum.id}`\n    }, `this topic`), ` in the forum`]), h(Text, {\n      source: (_props$curriculum2 = props.curriculum) === null || _props$curriculum2 === void 0 ? void 0 : _props$curriculum2.text\n    })]),\n    Members: h(CohortMembers, {\n      cohort: cohort,\n      isFacilitator,\n      mutate,\n      user: user ? user.id : undefined\n    })\n  };\n  let tabKeys = Object.keys(Tabs).filter(t => !!Tabs[t]);\n  return h(\"div\", {}, [h(Head, {\n    children: [h(\"meta\", {\n      property: \"og:title\",\n      content: course.name,\n      key: \"og:title\"\n    }), h(\"meta\", {\n      property: \"og:description\",\n      content: \"Starting \" + prettyDate(cohort.start_date),\n      key: \"og:description\"\n    }), h(\"meta\", {\n      property: \"og:image\",\n      content: course.card_image.split(\",\")[0],\n      key: \"og:image\"\n    }), h(\"meta\", {\n      property: \"twitter:card\",\n      content: \"summary\",\n      key: \"twitter:card\"\n    })]\n  }), h(WelcomeModal, {\n    display: router.query.welcome !== undefined,\n    cohort,\n    user_calendar: profile ? profile.calendar_id : \"\"\n  }), h(Banners, {\n    cohort,\n    mutate,\n    enrolled: !!inCohort,\n    facilitating: isFacilitator\n  }), h(Box, {\n    gap: 32\n  }, [h(TwoColumn, [h(Box, {\n    gap: 8,\n    style: {\n      gridColumn: 1\n    }\n  }, [course.type === \"course\" ? null : h(Box, {\n    h: true\n  }, props.course.card_image.split(\",\").map(src => h(\"img\", {\n    src,\n    style: {\n      imageRendering: \"pixelated\"\n    }\n  }))), h(\"h1\", cohortName(cohort.name)), h(Link, {\n    href: `/courses/${cohort.courses.slug}/${cohort.courses.id}`\n  }, h(\"a.notBlue\", {}, h(\"h3.textSecondary\", cohort === null || cohort === void 0 ? void 0 : cohort.courses.name))), h(\"p.big\", cohort.description)]), Tabs[selectedTab ? selectedTab : tabKeys[0]], h(Sidebar, {}, [h(StickyWrapper, [h(Box, {\n    gap: 16\n  }, [inCohort || isStarted || isFacilitator ? null : h(CourseDetails, {\n    course\n  }), inCohort || isStarted || isFacilitator ? null : h(Box, [h(LabelBox, {\n    style: {\n      fontSize: '2rem'\n    }\n  }, \"Join this cohort\"), h(SubEnrollButton, {\n    id: cohort.id,\n    course: course.id,\n    max_size: course.cohort_max_size,\n    learners: cohort.people_in_cohorts.length,\n    invited: !course.invite_only || invited\n  }, \"via Paystack\"), h(EnrollButton, {\n    id: cohort.id,\n    course: course.id,\n    max_size: course.cohort_max_size,\n    learners: cohort.people_in_cohorts.length,\n    invited: !course.invite_only || invited\n  }, \"via Stripe\")]), h(Box, [h(\"h3\", \"Information\"), h(VerticalTabs, {\n    selected: selectedTab && Tabs[selectedTab] ? selectedTab : tabKeys[0],\n    tabs: tabKeys,\n    onChange: tab => {\n      let route = new URL(window.location.href);\n      route.searchParams.set(\"tab\", tab);\n      router.replace(route, undefined, {\n        shallow: true\n      });\n    }\n  })]), inCohort || isFacilitator || cohort.completed ? h(Box, {}, [!isFacilitator ? null : h(Link, {\n    href: window.location.pathname + \"/settings\"\n  }, h(\"a\", {}, h(Primary, \"Cohort Settings\"))), !inCohort && !isFacilitator ? null : h(Box, [h(\"a\", {\n    href: `${DISCOURSE_URL}/session/sso?return_path=/c/${cohort.category_id}`\n  }, h(Secondary, \"The Forum\")), !isFacilitator ? null : h(Link, {\n    href: \"/courses/[slug]/[id]/cohorts/[cohortId]/templates\",\n    as: `/courses/${cohort.courses.slug}/${cohort.courses.id}/cohorts/${cohort.id}/templates`\n  }, h(Secondary, \"Forum Post from Template\")), !cohort.completed && isFacilitator && isStarted ? h(MarkCohortComplete, {\n    cohort,\n    mutate\n  }) : null])]) : null])])])])])]);\n};\n\nexport let EmptyImg = /*#__PURE__*/_styled('img', {\n  target: \"e1jdl2f10\"\n})(true ? {\n  name: \"1gm5wpq\",\n  styles: \"image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;display:block;margin:auto auto;border:none;height:200px;width:200px;\"\n} : {\n  name: \"1gm5wpq\",\n  styles: \"image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;display:block;margin:auto auto;border:none;height:200px;width:200px;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvcGFnZXMvY291cnNlcy9bc2x1Z10vW2lkXS9jb2hvcnRzL1tjb2hvcnRJZF0vaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBdVFxQyIsImZpbGUiOiIvVXNlcnMvYXlvb2x1d2FhbGZvbnNvL2NvZGUva3Jha2VuZWR1YXBwL3BhZ2VzL2NvdXJzZXMvW3NsdWddL1tpZF0vY29ob3J0cy9bY29ob3J0SWRdL2luZGV4LnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGggZnJvbSAncmVhY3QtaHlwZXJzY3JpcHQnXG5cbmltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJ1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQge3VzZVN0YXRlLCB1c2VFZmZlY3QsIEZyYWdtZW50fSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEluZmVyR2V0U3RhdGljUHJvcHNUeXBlIH0gZnJvbSAnbmV4dCdcblxuaW1wb3J0IENvdXJzZURldGFpbHMgZnJvbSAnY29tcG9uZW50cy9Db3Vyc2UvRW5yb2xsJ1xuaW1wb3J0IHsgRW5yb2xsQnV0dG9uIH0gZnJvbSAnY29tcG9uZW50cy9Db3Vyc2UvRW5yb2xsQnV0dG9uJztcbmltcG9ydCB7IFN1YkVucm9sbEJ1dHRvbiB9IGZyb20gJ2NvbXBvbmVudHMvQ291cnNlL1N1YkVucm9sbEJ1dHRvbic7XG5cbmltcG9ydCB7IFR3b0NvbHVtbiwgQm94LCBMYWJlbEJveCwgU2VwZXJhdG9yLCBTaWRlYmFyLCBXaGl0ZUNvbnRhaW5lcn0gZnJvbSAnY29tcG9uZW50cy9MYXlvdXQnXG5pbXBvcnQgeyBWZXJ0aWNhbFRhYnMsIFN0aWNreVdyYXBwZXIgfSBmcm9tICdjb21wb25lbnRzL1RhYnMnXG5pbXBvcnQgeyBQcmltYXJ5LCBEZXN0cnVjdGl2ZSwgRGVzdHJ1Y3RpdmVTbWFsbEJ1dHRvbiwgU2Vjb25kYXJ5LCBMaW5rQnV0dG9uIH0gZnJvbSAnY29tcG9uZW50cy9CdXR0b24nXG5pbXBvcnQgTG9hZGVyLCB7IFBhZ2VMb2FkZXIgfSBmcm9tICdjb21wb25lbnRzL0xvYWRlcidcbmltcG9ydCB7IENoZWNrQm94LCBJbmZvLCBJbnB1dCB9IGZyb20gJ2NvbXBvbmVudHMvRm9ybSdcbmltcG9ydCB7IE1vZGFsIH0gZnJvbSAnY29tcG9uZW50cy9Nb2RhbCdcbmltcG9ydCB7VHdvQ29sdW1uQmFubmVyfSBmcm9tICdjb21wb25lbnRzL0Jhbm5lcidcbmltcG9ydCBUZXh0IGZyb20gJ2NvbXBvbmVudHMvVGV4dCdcbmltcG9ydCB7V2VsY29tZU1vZGFsfSBmcm9tICdjb21wb25lbnRzL3BhZ2VzL2NvaG9ydHMvV2VsY29tZU1vZGFsJ1xuXG5pbXBvcnQgeyBjb2hvcnROYW1lLCBwcmV0dHlEYXRlfSBmcm9tICdzcmMvdXRpbHMnXG5pbXBvcnQgeyAgZ2V0VGFnZ2VkUG9zdCB9IGZyb20gJ3NyYy9kaXNjb3Vyc2UnXG5pbXBvcnQge0RJU0NPVVJTRV9VUkx9IGZyb20gJ3NyYy9jb25zdGFudHMnXG5pbXBvcnQgeyBjYWxsQXBpLCB1c2VBcGkgfSBmcm9tICdzcmMvYXBpSGVscGVycydcbmltcG9ydCB7IHVzZUNvaG9ydERhdGEsIHVzZVVzZXJDb2hvcnRzLCB1c2VVc2VyRGF0YSwgdXNlQ291cnNlRGF0YSwgQ29ob3J0LCB1c2VQcm9maWxlRGF0YSB9IGZyb20gJ3NyYy9kYXRhJ1xuaW1wb3J0IEVycm9yUGFnZSBmcm9tICdwYWdlcy80MDQnXG5pbXBvcnQgeyBjb2hvcnREYXRhUXVlcnksIFVwZGF0ZUNvaG9ydE1zZywgVXBkYXRlQ29ob3J0UmVzcG9uc2UgfSBmcm9tICdwYWdlcy9hcGkvY29ob3J0cy9bY29ob3J0SWRdJ1xuaW1wb3J0IHsgY291cnNlRGF0YVF1ZXJ5IH0gZnJvbSAncGFnZXMvYXBpL2NvdXJzZXMvW2lkXSdcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCdcbmltcG9ydCB7IENvaG9ydEV2ZW50cyB9IGZyb20gJ2NvbXBvbmVudHMvcGFnZXMvY29ob3J0cy9FdmVudHMnXG5pbXBvcnQgeyBDcmVhdGVFdmVudCB9IGZyb20gJ2NvbXBvbmVudHMvcGFnZXMvY29ob3J0cy9DcmVhdGVFdmVudCdcbmltcG9ydCB7IEFjY2VudEltZyB9IGZyb20gJ2NvbXBvbmVudHMvSW1hZ2VzJ1xuaW1wb3J0IHsgVG9kb0xpc3QgfSBmcm9tICdjb21wb25lbnRzL1RvZG9MaXN0J1xuaW1wb3J0IHsgVW5FbnJvbGxNc2csIFVuRW5yb2xsUmVzcG9uc2UgfSBmcm9tICdwYWdlcy9hcGkvY29ob3J0cy9bY29ob3J0SWRdL2Vucm9sbCdcblxudHlwZSBQcm9wcyA9IEluZmVyR2V0U3RhdGljUHJvcHNUeXBlPHR5cGVvZiBnZXRTdGF0aWNQcm9wcz5cbmNvbnN0IFdyYXBwZWRDb2hvcnRQYWdlID0gKHByb3BzOiBQcm9wcyk9PiAgcHJvcHMubm90Rm91bmQgPyBoKEVycm9yUGFnZSkgOiBoKENvaG9ydFBhZ2UsIHByb3BzKVxuZXhwb3J0IGRlZmF1bHQgV3JhcHBlZENvaG9ydFBhZ2VcbmNvbnN0IENvaG9ydFBhZ2UgPSAocHJvcHM6IEV4dHJhY3Q8UHJvcHMsIHtub3RGb3VuZDpmYWxzZX0+KSA9PiB7XG4gIGxldCByb3V0ZXIgPSB1c2VSb3V0ZXIoKVxuICBsZXQge2RhdGE6IHVzZXJ9ID0gdXNlVXNlckRhdGEoKVxuICBsZXQge2RhdGE6IHVzZXJDb2hvcnRzfSA9IHVzZVVzZXJDb2hvcnRzKClcbiAgbGV0IHtkYXRhOnByb2ZpbGV9ID0gdXNlUHJvZmlsZURhdGEodXNlciA/IHVzZXIudXNlcm5hbWUgOiB1bmRlZmluZWQpXG4gIGxldCB7ZGF0YTogY29ob3J0LCBtdXRhdGV9ID0gdXNlQ29ob3J0RGF0YShwcm9wcy5jb2hvcnRJZCwgcHJvcHMuY29ob3J0KVxuICBsZXQge2RhdGE6IGNvdXJzZX0gPSB1c2VDb3Vyc2VEYXRhKHByb3BzLmNvdXJzZUlkLCBwcm9wcy5jb3Vyc2UpXG4gIGxldCBzZWxlY3RlZFRhYiA9IHJvdXRlci5xdWVyeS50YWIgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG5cbiAgdXNlRWZmZWN0KCgpPT57XG4gICAgbXV0YXRlKHVuZGVmaW5lZCwgdHJ1ZSlcbiAgfSwgWyEhY29ob3J0XSlcblxuXG4gIGlmKCFjb2hvcnQgfHwgIWNvdXJzZSkgcmV0dXJuIGgoUGFnZUxvYWRlcilcblxuICBsZXQgaW52aXRlZCA9ICEhdXNlckNvaG9ydHM/Lmludml0ZWRfY291cnNlcy5maW5kKGNvdXJzZT0+Y291cnNlLmlkID09PSBwcm9wcy5jb3Vyc2UuaWQgKVxuICBsZXQgaW5Db2hvcnQgPSBjb2hvcnQucGVvcGxlX2luX2NvaG9ydHMuZmluZChwID0+IHAucGVyc29uID09PSAodXNlciA/IHVzZXIuaWQgOiB1bmRlZmluZWQpKVxuICBsZXQgaXNGYWNpbGl0YXRvciA9ICEhdXNlciAmJiAhIWNvaG9ydC5jb2hvcnRfZmFjaWxpdGF0b3JzLmZpbmQoZj0+dXNlciAmJmYucGVvcGxlLnVzZXJuYW1lID09PSB1c2VyLnVzZXJuYW1lKVxuICBsZXQgaXNTdGFydGVkID0gY29ob3J0ICYmIG5ldyBEYXRlKCkgPiBuZXcgRGF0ZShjb2hvcnQuc3RhcnRfZGF0ZSlcblxuICBsZXQgVGFicyA9IHtcbiAgICBBcnRpZmFjdHM6IHByb3BzLmFydGlmYWN0cy50ZXh0ID09PSAnJyA/IG51bGwgOiBoKEJveCwge2dhcDogNjR9LCBbXG4gICAgICBoKEJveCwge2dhcDogMzJ9LFtcbiAgICAgICAgaChCb3gsIFtcbiAgICAgICAgICBoKFRleHQsIHtzb3VyY2U6IHByb3BzLmFydGlmYWN0cz8udGV4dH0pXG4gICAgICAgIF0pLFxuICAgICAgXSlcbiAgICBdKSxcbiAgICBTY2hlZHVsZTogY29ob3J0LmNvaG9ydF9ldmVudHMubGVuZ3RoID09PSAwICYmICFpc0ZhY2lsaXRhdG9yID8gbnVsbCA6IGgoQm94LCB7Z2FwOiAzMn0sIFtcbiAgICAgIGlzRmFjaWxpdGF0b3IgfHwgaW5Db2hvcnQgPyBoKENyZWF0ZUV2ZW50LCB7XG4gICAgICAgIGNvaG9ydDogY29ob3J0LmlkLFxuICAgICAgICBwZW9wbGU6IFsuLi5jb2hvcnQucGVvcGxlX2luX2NvaG9ydHMubWFwKHA9PnAucGVvcGxlLnVzZXJuYW1lKSwgLi4uY29ob3J0LmNvaG9ydF9mYWNpbGl0YXRvcnMubWFwKGY9PmYucGVvcGxlLnVzZXJuYW1lKV0sXG4gICAgICAgIG11dGF0ZTogKGMpPT57XG4gICAgICAgICAgaWYoIWNvaG9ydCkgcmV0dXJuXG4gICAgICAgICAgbXV0YXRlKHsuLi5jb2hvcnQsIGNvaG9ydF9ldmVudHM6IFsuLi5jb2hvcnQuY29ob3J0X2V2ZW50cywgY119KVxuICAgICAgICB9fSkgOiBudWxsLFxuICAgICAgaChCb3gsIFtcbiAgICAgICAgY29ob3J0LmNvaG9ydF9ldmVudHMubGVuZ3RoID09PSAwXG4gICAgICAgICAgPyBoKFdoaXRlQ29udGFpbmVyLCBbXG4gICAgICAgICAgICBoKEJveCwge2dhcDoxNiwgc3R5bGU6IHttYXhXaWR0aDogNDAwLCB0ZXh0QWxpZ246ICdjZW50ZXInLCBtYXJnaW46ICdhdXRvJ319LCBbXG4gICAgICAgICAgICAgIGgoIEVtcHR5SW1nLCB7c3JjOiAnL2ltZy9lbXB0eS5wbmcnfSksXG4gICAgICAgICAgICAgIGgoJ3NtYWxsLnRleHRTZWNvbmRhcnknLCBcIkV2ZW50cyBhcmUgZ3JlYXQgZm9yIHNjaGVkdWxpbmcgbGl2ZSBjYWxscyBvciBvdGhlciBpbXBvcnRhbnQgY29ob3J0IGRhdGVzLiBMZWFybmVycyBjYW4gYWRkIHRoZXNlIHRvIHRoZWlyIGNhbGVuZGFycy4gTG9va3MgbGlrZSB5b3UgaGF2ZW4ndCBjcmVhdGVkIGFueSBldmVudHMgeWV0LiBIaXQgdGhlIGJ1dHRvbiBhYm92ZSB0byBzY2hlZHVsZSBvbmUhIVwiICksXG4gICAgICAgICAgICBdKV0pXG4gICAgICAgICAgOiBoKENvaG9ydEV2ZW50cywge1xuICAgICAgICAgICAgZmFjaWxpdGF0aW5nOiBpc0ZhY2lsaXRhdG9yLFxuICAgICAgICAgICAgaW5Db2hvcnQ6ISFpbkNvaG9ydCxcbiAgICAgICAgICAgIHBlb3BsZTogY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLm1hcChwPT5wLnBlb3BsZS51c2VybmFtZSksXG4gICAgICAgICAgICBjb2hvcnQ6IGNvaG9ydC5pZCxcbiAgICAgICAgICAgIGV2ZW50czogY29ob3J0LmNvaG9ydF9ldmVudHMuZmlsdGVyKGM9PntcbiAgICAgICAgICAgICAgaWYoIXVzZXIgfHwgIWNvaG9ydCkgcmV0dXJuIGMuZXZlcnlvbmVcbiAgICAgICAgICAgICAgaWYoaXNGYWNpbGl0YXRvcikgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgcmV0dXJuIGMuZXZlcnlvbmUgfHwgYy5ldmVudHMucGVvcGxlX2luX2V2ZW50cy5maW5kKHA9PnVzZXImJnAucGVvcGxlLnVzZXJuYW1lPT09dXNlci51c2VybmFtZSlcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbXV0YXRlOiAoZXZlbnRzKT0+e1xuICAgICAgICAgICAgICBpZighY29ob3J0KSByZXR1cm5cbiAgICAgICAgICAgICAgbXV0YXRlKHtcbiAgICAgICAgICAgICAgICAuLi5jb2hvcnQsIGNvaG9ydF9ldmVudHM6IGV2ZW50c30pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2hvd0NhbDogKGluQ29ob3J0IHx8IGlzRmFjaWxpdGF0b3IpICYmIGNvaG9ydC5jb2hvcnRfZXZlbnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICB9KVxuICAgICAgXSlcbiAgICBdKSxcbiAgICBbY291cnNlLnR5cGUgPT09ICdjbHViJyA/IFwiRGV0YWlsc1wiIDogXCJDdXJyaWN1bHVtXCJdOiBoKEJveCwgW1xuICAgICAgIWlzRmFjaWxpdGF0b3IgPyBudWxsIDogaChJbmZvLCBbXG4gICAgICAgIGDwn5KhIFlvdSBjYW4gbWFrZSBjaGFuZ2VzIHRvIHRoaXMgcGFnZSBieSBlZGl0aW5nIGAsXG4gICAgICAgIGgoJ2EnLCB7aHJlZjogYCR7RElTQ09VUlNFX1VSTH0vc2Vzc2lvbi9zc28/cmV0dXJuX3BhdGg9L3QvJHtwcm9wcy5jdXJyaWN1bHVtPy5pZH1gfSwgYHRoaXMgdG9waWNgKSxcbiAgICAgICAgYCBpbiB0aGUgZm9ydW1gXG4gICAgICBdKSxcbiAgICAgIGgoVGV4dCwge3NvdXJjZTpwcm9wcy5jdXJyaWN1bHVtPy50ZXh0fSlcbiAgICBdKSxcbiAgICBNZW1iZXJzOiBoKENvaG9ydE1lbWJlcnMsIHtjb2hvcnQ6IGNvaG9ydCwgaXNGYWNpbGl0YXRvciwgbXV0YXRlLCB1c2VyOiB1c2VyID8gdXNlci5pZCA6IHVuZGVmaW5lZH0pXG4gICAgICB9IGFzIHtbazpzdHJpbmddOlJlYWN0LlJlYWN0RWxlbWVudH1cbiAgbGV0IHRhYktleXMgPSBPYmplY3Qua2V5cyhUYWJzKS5maWx0ZXIodD0+ISFUYWJzW3RdKVxuXG4gIHJldHVybiBoKFwiZGl2XCIsIHt9LCBbXG4gICAgaChIZWFkLCB7XG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICBoKFwibWV0YVwiLCB7XG4gICAgICAgICAgcHJvcGVydHk6IFwib2c6dGl0bGVcIixcbiAgICAgICAgICBjb250ZW50OiBjb3Vyc2UubmFtZSxcbiAgICAgICAgICBrZXk6IFwib2c6dGl0bGVcIixcbiAgICAgICAgfSksXG4gICAgICAgIGgoXCJtZXRhXCIsIHtcbiAgICAgICAgICBwcm9wZXJ0eTogXCJvZzpkZXNjcmlwdGlvblwiLFxuICAgICAgICAgIGNvbnRlbnQ6IFwiU3RhcnRpbmcgXCIgKyBwcmV0dHlEYXRlKGNvaG9ydC5zdGFydF9kYXRlKSxcbiAgICAgICAgICBrZXk6IFwib2c6ZGVzY3JpcHRpb25cIixcbiAgICAgICAgfSksXG4gICAgICAgIGgoXCJtZXRhXCIsIHtcbiAgICAgICAgICBwcm9wZXJ0eTogXCJvZzppbWFnZVwiLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvdXJzZS5jYXJkX2ltYWdlLnNwbGl0KFwiLFwiKVswXSxcbiAgICAgICAgICBrZXk6IFwib2c6aW1hZ2VcIixcbiAgICAgICAgfSksXG4gICAgICAgIGgoXCJtZXRhXCIsIHtcbiAgICAgICAgICBwcm9wZXJ0eTogXCJ0d2l0dGVyOmNhcmRcIixcbiAgICAgICAgICBjb250ZW50OiBcInN1bW1hcnlcIixcbiAgICAgICAgICBrZXk6IFwidHdpdHRlcjpjYXJkXCIsXG4gICAgICAgIH0pLFxuICAgICAgXSxcbiAgICB9KSxcbiAgICBoKFdlbGNvbWVNb2RhbCwge1xuICAgICAgZGlzcGxheTogcm91dGVyLnF1ZXJ5LndlbGNvbWUgIT09IHVuZGVmaW5lZCxcbiAgICAgIGNvaG9ydCxcbiAgICAgIHVzZXJfY2FsZW5kYXI6IHByb2ZpbGUgPyBwcm9maWxlLmNhbGVuZGFyX2lkIDogXCJcIixcbiAgICB9KSxcbiAgICBoKEJhbm5lcnMsIHtcbiAgICAgIGNvaG9ydCxcbiAgICAgIG11dGF0ZSxcbiAgICAgIGVucm9sbGVkOiAhIWluQ29ob3J0LFxuICAgICAgZmFjaWxpdGF0aW5nOiBpc0ZhY2lsaXRhdG9yLFxuICAgIH0pLFxuICAgIGgoQm94LCB7IGdhcDogMzIgfSwgW1xuICAgICAgaChUd29Db2x1bW4sIFtcbiAgICAgICAgaChCb3gsIHsgZ2FwOiA4LCBzdHlsZTogeyBncmlkQ29sdW1uOiAxIH0gfSwgW1xuICAgICAgICAgIGNvdXJzZS50eXBlID09PSBcImNvdXJzZVwiXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogaChcbiAgICAgICAgICAgICAgICBCb3gsXG4gICAgICAgICAgICAgICAgeyBoOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgcHJvcHMuY291cnNlLmNhcmRfaW1hZ2VcbiAgICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilcbiAgICAgICAgICAgICAgICAgIC5tYXAoKHNyYykgPT5cbiAgICAgICAgICAgICAgICAgICAgaChcImltZ1wiLCB7IHNyYywgc3R5bGU6IHsgaW1hZ2VSZW5kZXJpbmc6IFwicGl4ZWxhdGVkXCIgfSB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgIGgoXCJoMVwiLCBjb2hvcnROYW1lKGNvaG9ydC5uYW1lKSksXG4gICAgICAgICAgaChcbiAgICAgICAgICAgIExpbmssXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGhyZWY6IGAvY291cnNlcy8ke2NvaG9ydC5jb3Vyc2VzLnNsdWd9LyR7Y29ob3J0LmNvdXJzZXMuaWR9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoKFwiYS5ub3RCbHVlXCIsIHt9LCBoKFwiaDMudGV4dFNlY29uZGFyeVwiLCBjb2hvcnQ/LmNvdXJzZXMubmFtZSkpXG4gICAgICAgICAgKSxcbiAgICAgICAgICBoKFwicC5iaWdcIiwgY29ob3J0LmRlc2NyaXB0aW9uKSxcbiAgICAgICAgXSksXG4gICAgICAgIFRhYnNbc2VsZWN0ZWRUYWIgPyBzZWxlY3RlZFRhYiA6IHRhYktleXNbMF1dLFxuICAgICAgICBoKFNpZGViYXIsIHt9LCBbXG4gICAgICAgICAgaChTdGlja3lXcmFwcGVyLCBbXG4gICAgICAgICAgICBoKEJveCwgeyBnYXA6IDE2IH0sIFtcbiAgICAgICAgICAgICAgaW5Db2hvcnQgfHwgaXNTdGFydGVkIHx8IGlzRmFjaWxpdGF0b3JcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IGgoQ291cnNlRGV0YWlscywgeyBjb3Vyc2UgfSksXG4gICAgICAgICAgICAgIGluQ29ob3J0IHx8IGlzU3RhcnRlZCB8fCBpc0ZhY2lsaXRhdG9yXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBcbiAgICAgICAgICAgIGgoQm94LCBbXG4gICAgICAgICAgICAgICBoKExhYmVsQm94LHtzdHlsZTp7Zm9udFNpemU6ICcycmVtJ319ICxcIkpvaW4gdGhpcyBjb2hvcnRcIiksXG4gICAgICAgICAgICAgICAgaChTdWJFbnJvbGxCdXR0b24sIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogY29ob3J0LmlkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvdXJzZTogY291cnNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIG1heF9zaXplOiBjb3Vyc2UuY29ob3J0X21heF9zaXplLFxuICAgICAgICAgICAgICAgICAgICAgIGxlYXJuZXJzOiBjb2hvcnQucGVvcGxlX2luX2NvaG9ydHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIGludml0ZWQ6ICFjb3Vyc2UuaW52aXRlX29ubHkgfHwgaW52aXRlZCxcbiAgICAgICAgICAgICAgICAgICAgfSwgIFwidmlhIFBheXN0YWNrXCIpLFxuICAgICAgICAgICAgICAgIGgoRW5yb2xsQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvaG9ydC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb3Vyc2U6IGNvdXJzZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICBtYXhfc2l6ZTogY291cnNlLmNvaG9ydF9tYXhfc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICBsZWFybmVyczogY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBpbnZpdGVkOiAhY291cnNlLmludml0ZV9vbmx5IHx8IGludml0ZWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwidmlhIFN0cmlwZVwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICBoKEJveCwgW1xuICAgICAgICAgICAgICAgIGgoXCJoM1wiLCBcIkluZm9ybWF0aW9uXCIpLFxuICAgICAgICAgICAgICAgIGgoVmVydGljYWxUYWJzLCB7XG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZDpcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRUYWIgJiYgVGFic1tzZWxlY3RlZFRhYl0gPyBzZWxlY3RlZFRhYiA6IHRhYktleXNbMF0sXG4gICAgICAgICAgICAgICAgICB0YWJzOiB0YWJLZXlzLFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6ICh0YWIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvdXRlID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgICAgICAgICAgIHJvdXRlLnNlYXJjaFBhcmFtcy5zZXQoXCJ0YWJcIiwgdGFiKTtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2Uocm91dGUsIHVuZGVmaW5lZCwgeyBzaGFsbG93OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgIGluQ29ob3J0IHx8IGlzRmFjaWxpdGF0b3IgfHwgY29ob3J0LmNvbXBsZXRlZFxuICAgICAgICAgICAgICAgID8gaChCb3gsIHt9LCBbXG4gICAgICAgICAgICAgICAgICAgICFpc0ZhY2lsaXRhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgOiBoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBMaW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIFwiL3NldHRpbmdzXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaChcImFcIiwge30sIGgoUHJpbWFyeSwgXCJDb2hvcnQgU2V0dGluZ3NcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAhaW5Db2hvcnQgJiYgIWlzRmFjaWxpdGF0b3JcbiAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICA6IGgoQm94LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogYCR7RElTQ09VUlNFX1VSTH0vc2Vzc2lvbi9zc28/cmV0dXJuX3BhdGg9L2MvJHtjb2hvcnQuY2F0ZWdvcnlfaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoU2Vjb25kYXJ5LCBcIlRoZSBGb3J1bVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNGYWNpbGl0YXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi9jb3Vyc2VzL1tzbHVnXS9baWRdL2NvaG9ydHMvW2NvaG9ydElkXS90ZW1wbGF0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhczogYC9jb3Vyc2VzLyR7Y29ob3J0LmNvdXJzZXMuc2x1Z30vJHtjb2hvcnQuY291cnNlcy5pZH0vY29ob3J0cy8ke2NvaG9ydC5pZH0vdGVtcGxhdGVzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChTZWNvbmRhcnksIFwiRm9ydW0gUG9zdCBmcm9tIFRlbXBsYXRlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAhY29ob3J0LmNvbXBsZXRlZCAmJiBpc0ZhY2lsaXRhdG9yICYmIGlzU3RhcnRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaChNYXJrQ29ob3J0Q29tcGxldGUsIHsgY29ob3J0LCBtdXRhdGUgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgXSksXG4gICAgICAgIF0pLFxuICAgICAgXSksXG4gICAgXSksXG4gIF0pO1xufVxuXG5cbmV4cG9ydCBsZXQgRW1wdHlJbWcgPSBzdHlsZWQgKCdpbWcnKSBgXG5pbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDtcbmltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlcztcbmltYWdlLXJlbmRlcmluZzogY3Jpc3AtZWRnZXM7XG5kaXNwbGF5OiBibG9jaztcbm1hcmdpbjogYXV0byBhdXRvO1xuYm9yZGVyOiBub25lO1xuaGVpZ2h0OiAyMDBweDtcbndpZHRoOiAyMDBweDtcbmBcblxuZXhwb3J0IGNvbnN0IENvaG9ydE1lbWJlcnMgPSAocHJvcHM6e2NvaG9ydDpDb2hvcnQsIGlzRmFjaWxpdGF0b3I6IGJvb2xlYW4sIHVzZXI/OiBzdHJpbmcsIG11dGF0ZTogKGM6Q29ob3J0KT0+dm9pZH0pID0+IHtcbiAgbGV0IFt1bmVucm9sbFN0YXRlLCBzZXRVbmVucm9sbFN0YXRlXSA9IHVzZVN0YXRlPHtwZXJzb25JRDpzdHJpbmcsIHVzZXJuYW1lOiBzdHJpbmcsIGNvaG9ydElEOm51bWJlciwgZGlzcGxheV9uYW1lPzpzdHJpbmcsIHJlbW92ZU1lbWJlcjooKT0+dm9pZH0+KClcbiAgcmV0dXJuIGgoRnJhZ21lbnQsIFtcbiAgICAhdW5lbnJvbGxTdGF0ZVxuICAgICAgPyBudWxsXG4gICAgICA6IGgoVW5lbnJvbGxNb2RhbCwge1xuICAgICAgICAgIGRpc3BsYXk6ICEhdW5lbnJvbGxTdGF0ZSxcbiAgICAgICAgICBvbkV4aXQ6ICgpID0+IHNldFVuZW5yb2xsU3RhdGUodW5kZWZpbmVkKSxcbiAgICAgICAgICAuLi51bmVucm9sbFN0YXRlLFxuICAgICAgICB9KSxcbiAgICBoKEJveCwgeyBnYXA6IDE2IH0sIFtcbiAgICAgIGgoXCJoM1wiLCBcIkZhY2lsaXRhdG9yc1wiKSxcbiAgICAgIHByb3BzLmlzRmFjaWxpdGF0b3JcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogaChJbmZvLCBbXG4gICAgICAgICAgICBgUXVlc3Rpb25zIGFib3V0IHRoaXMgYCxcbiAgICAgICAgICAgIHByb3BzLmNvaG9ydC5jb3Vyc2VzLnR5cGUgPT09IFwiY2x1YlwiID8gYGNsdWJgIDogYGNvdXJzZWAsXG4gICAgICAgICAgICBgPyBgLFxuICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBocmVmOiBgaHR0cHM6Ly9mb3J1bS5rcmFrZW5lZHUuY29tL25ldy1tZXNzYWdlP2dyb3VwbmFtZT0ke3Byb3BzLmNvaG9ydC5jb3Vyc2VzLnNsdWd9LW1gLFxuICAgICAgICAgICAgICAgIHRhcmdldDogYF9ibGFua2AsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGBNZXNzYWdlIHRoZSBmYWNpbGl0YXRvcmBcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBgIG9uIHRoZSBmb3J1bS5gLFxuICAgICAgICAgIF0pLFxuICAgICAgLi4ucHJvcHMuY29ob3J0LmNvaG9ydF9mYWNpbGl0YXRvcnMubWFwKChmKSA9PlxuICAgICAgICBoKEJveCwgW1xuICAgICAgICAgIHByb3BzLnVzZXIgPT09IGYuZmFjaWxpdGF0b3JcbiAgICAgICAgICAgID8gaChJbmZvLCBbXG4gICAgICAgICAgICAgICAgYPCfkqEgWW91IGNhbiBlZGl0IHlvdXIgYmlvIGluIHRoZSBwcm9maWxlIHRhYiBvbiB5b3VyIGAsXG4gICAgICAgICAgICAgICAgaChMaW5rLCB7IGhyZWY6IFwiL2Rhc2hib2FyZFwiIH0sIGgoXCJhXCIsIFwiZGFzaGJvYXJkXCIpKSxcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICBoKFwiaDNcIiwgW1xuICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICBoKFxuICAgICAgICAgICAgICBMaW5rLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaHJlZjogXCIvcGVvcGxlL1tpZF1cIixcbiAgICAgICAgICAgICAgICBhczogYC9wZW9wbGUvJHtmLnBlb3BsZS51c2VybmFtZX1gLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcIm5vdEJsdWVcIiB9LFxuICAgICAgICAgICAgICAgIGYucGVvcGxlLmRpc3BsYXlfbmFtZSB8fCBmLnBlb3BsZS51c2VybmFtZVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZi5wZW9wbGUucHJvbm91bnNcbiAgICAgICAgICAgICAgPyBoKFwic3Bhbi50ZXh0U2Vjb25kYXJ5XCIsIHt9LCBgICgke2YucGVvcGxlLnByb25vdW5zfSlgKVxuICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgXSksXG4gICAgICAgICAgaChUZXh0LCB7IHNvdXJjZTogZi5wZW9wbGUuYmlvIHx8IFwiXCIgfSksXG4gICAgICAgIF0pXG4gICAgICApLFxuXG4gICAgICAvLyBtZXNzYWdlIGZhY2lsaXRhdG9yIC0gc2hvd3MgZm9yIGxvZ2dlZCBpbiBhbmQgYW5vbiB1c2VyczsgaGlkZGVuIG9uIHRoaW5ncyB5b3UncmUgZmFjaWxpdGF0aW5nXG5cbiAgICAgIHByb3BzLmNvaG9ydC5wZW9wbGVfaW5fY29ob3J0cy5sZW5ndGggPT09IDBcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogaChCb3gsIHsgaDogdHJ1ZSB9LCBbXG4gICAgICAgICAgICBoKFwiaDRcIiwgW1xuICAgICAgICAgICAgICBcIk1lbWJlcnMgXCIsXG4gICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgXCJzcGFuLnRleHRTZWNvbmRhcnlcIixcbiAgICAgICAgICAgICAgICBgKCR7cHJvcHMuY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLmxlbmd0aH0ke1xuICAgICAgICAgICAgICAgICAgcHJvcHMuY29ob3J0LmNvdXJzZXMuY29ob3J0X21heF9zaXplICE9PSAwXG4gICAgICAgICAgICAgICAgICAgID8gYC8ke3Byb3BzLmNvaG9ydC5jb3Vyc2VzLmNvaG9ydF9tYXhfc2l6ZX1gXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIlxuICAgICAgICAgICAgICAgIH0pYFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAhcHJvcHMuaXNGYWNpbGl0YXRvclxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiBoKFxuICAgICAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGBtYWlsdG86P2JjYz0ke3Byb3BzLmNvaG9ydC5wZW9wbGVfaW5fY29ob3J0c1xuICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHApID0+IHAucGVvcGxlLmVtYWlsKVxuICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLFwiKX1gLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIFwiZW1haWwgZXZlcnlvbmVcIlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgXSksXG4gICAgICAuLi5wcm9wcy5jb2hvcnQucGVvcGxlX2luX2NvaG9ydHMubWFwKChwZXJzb24pID0+IHtcbiAgICAgICAgcmV0dXJuIGgoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7IHN0eWxlOiB7IGRpc3BsYXk6IFwiZ3JpZFwiLCBncmlkVGVtcGxhdGVDb2x1bW5zOiBcImF1dG8gYXV0b1wiIH0gfSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBoKEJveCwgeyBoOiB0cnVlIH0sIFtcbiAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICBMaW5rLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGhyZWY6IFwiL3Blb3BsZS9baWRdXCIsXG4gICAgICAgICAgICAgICAgICBhczogYC9wZW9wbGUvJHtwZXJzb24ucGVvcGxlLnVzZXJuYW1lfWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwibm90Qmx1ZVwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbi5wZW9wbGUuZGlzcGxheV9uYW1lIHx8IHBlcnNvbi5wZW9wbGUudXNlcm5hbWVcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBwZXJzb24ucGVvcGxlLnByb25vdW5zXG4gICAgICAgICAgICAgICAgPyBoKFwic3Bhbi50ZXh0U2Vjb25kYXJ5XCIsIHt9LCBgICgke3BlcnNvbi5wZW9wbGUucHJvbm91bnN9KWApXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAhcHJvcHMuaXNGYWNpbGl0YXRvclxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiBoKFwiZGl2XCIsIHsgc3R5bGU6IHsganVzdGlmeVNlbGY6IFwicmlnaHRcIiB9IH0sIFtcbiAgICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luUmlnaHQ6IFwiMTBweFwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgaHJlZjogYG1haWx0bzoke3BlcnNvbi5wZW9wbGUuZW1haWx9YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICAgICAgRGVzdHJ1Y3RpdmVTbWFsbEJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFVuZW5yb2xsU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JRDogcGVyc29uLnBlcnNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29ob3J0SUQ6IHByb3BzLmNvaG9ydC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHBlcnNvbi5wZW9wbGUudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfbmFtZTogcGVyc29uLnBlb3BsZS5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1lbWJlcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLm11dGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcy5jb2hvcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW9wbGVfaW5fY29ob3J0czogcHJvcHMuY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHApID0+IHAucGVyc29uICE9PSBwZXJzb24ucGVyc29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJ1bmVucm9sbFwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgIF0pLFxuICBdKTtcbn1cblxuY29uc3QgVW5lbnJvbGxNb2RhbCA9IChwcm9wczp7XG4gIHBlcnNvbklEOiBzdHJpbmcsXG4gIHVzZXJuYW1lOiBzdHJpbmcsXG4gIGNvaG9ydElEOm51bWJlcixcbiAgZGlzcGxheV9uYW1lPzogc3RyaW5nLFxuICByZW1vdmVNZW1iZXI6ICgpPT52b2lkXG4gIGRpc3BsYXk6IGJvb2xlYW4sXG4gIG9uRXhpdDogKCk9PnZvaWRcbn0pPT57XG4gIGxldCBbc3RhdHVzLCBjYWxsVW5lbnJvbGxdID0gdXNlQXBpPFVuRW5yb2xsTXNnLCBVbkVucm9sbFJlc3BvbnNlPihbXSlcbiAgcmV0dXJuIGgoTW9kYWwsIHtkaXNwbGF5OiBwcm9wcy5kaXNwbGF5LCBvbkV4aXQ6cHJvcHMub25FeGl0LCBoaWRlQ2xvc2VCdXR0b246IHRydWV9ICxbXG4gICAgc3RhdHVzID09PSAnc3VjY2VzcydcbiAgICAgID8gaChCb3gsIHtzdHlsZTp7dGV4dEFsaWduOidjZW50ZXInLCBqdXN0aWZ5SXRlbXM6J2NlbnRlcid9fSwgW1xuICAgICAgICBoKCdoMicsIFwiVW5lbnJvbGxlZCFcIiksXG4gICAgICAgIGgoJ3AnLCBbYFlvdSd2ZSB1bmVucm9sbGVkIGAsIGgoJ2InLCBwcm9wcy5kaXNwbGF5X25hbWUgfHwgcHJvcHMudXNlcm5hbWUpLCBgIGZyb20gdGhpcyBjb2hvcnRgXSksXG4gICAgICAgIGgoJ3AnLCBbYFRoZXknbGwgYmUgcmVmdW5kZWQgd2l0aGluIDUgYnVzaW5lc3MgZGF5c2BdKSxcbiAgICAgICAgaChTZWNvbmRhcnksIHtvbkNsaWNrOnByb3BzLm9uRXhpdCwgc3R5bGU6e3dpZHRoOlwiMjUwcHhcIn19LCBcImV4aXRcIilcbiAgICAgIF0pXG4gICAgICA6IGgoQm94LCB7Z2FwOjMyLCBzdHlsZTp7dGV4dEFsaWduOidjZW50ZXInLCBqdXN0aWZ5SXRlbXM6J2NlbnRlcid9fSwgW1xuICAgICAgICBoKEJveCxbXG4gICAgICAgICAgaCgnaDInLCBcIlVuLUVucm9sbCBhbmQgSXNzdWUgUmVmdW5kXCIpLFxuICAgICAgICAgIGgoJ3AnLCBbXG4gICAgICAgICAgICBgWW91IGFyZSBhYm91dCB0byB1bi1lbnJvbGwgYCwgaCgnYicsIHByb3BzLmRpc3BsYXlfbmFtZSB8fCBwcm9wcy51c2VybmFtZSksIGAgZnJvbSB0aGlzIGNvaG9ydGBcbiAgICAgICAgICBdKSxcbiAgICAgICAgXSksXG4gICAgICAgIGgoQm94LCB7Z2FwOjh9LCBbXG4gICAgICAgICAgaChEZXN0cnVjdGl2ZSwge3N0YXR1cywgb25DbGljazphc3luYyAoKT0+e1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0ICBjYWxsVW5lbnJvbGwoYC9hcGkvY29ob3J0cy8ke3Byb3BzLmNvaG9ydElEfS9lbnJvbGxgLCB7XG4gICAgICAgICAgICAgIHBlcnNvbjogcHJvcHMucGVyc29uSURcbiAgICAgICAgICAgIH0sIFwiREVMRVRFXCIpXG4gICAgICAgICAgICBpZihyZXN1bHQuc3RhdHVzPT09MjAwKXtcbiAgICAgICAgICAgICAgcHJvcHMucmVtb3ZlTWVtYmVyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBzdHlsZTp7d2lkdGg6XCIyNTBweFwifX0sICdVbi1lbnJvbGwnKSxcbiAgICAgICAgICBoKFNlY29uZGFyeSwge29uQ2xpY2s6cHJvcHMub25FeGl0LCBzdHlsZTp7d2lkdGg6XCIyNTBweFwifX0sIFwiQ2FuY2VsXCIpXG4gICAgICAgIF0pXG4gICAgICBdKVxuICBdKVxufVxuXG4vLyBCdXR0b24gdG8gUHVibGlzaCBEcmFmdCBDb2hvcnRcbmNvbnN0IE1hcmtDb2hvcnRMaXZlID0gKHByb3BzOntjb2hvcnQ6Q29ob3J0LCBtdXRhdGU6KGM6Q29ob3J0KT0+dm9pZH0pPT4ge1xuICBsZXQgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTwnbm9ybWFsJyB8ICdjb25maXJtJyB8ICdsb2FkaW5nJ3wgJ2NvbXBsZXRlJyA+KCdub3JtYWwnKVxuICBpZihzdGF0ZSA9PT0gJ2NvbmZpcm0nIHx8IHN0YXRlID09PSAnbG9hZGluZycpIHJldHVybiBoKE1vZGFsLCB7ZGlzcGxheTogdHJ1ZSwgY2xvc2VUZXh0OlwibmV2ZXJtaW5kXCIsIG9uRXhpdDogKCk9PiBzZXRTdGF0ZSgnbm9ybWFsJyl9LCBbXG4gICAgaChCb3gsIHtnYXA6IDMyfSwgW1xuICAgICAgaCgnaDInLCBcIkFyZSB5b3Ugc3VyZT9cIiksXG4gICAgICBoKEJveCwge2dhcDogMTYsIHN0eWxlOiB7dGV4dEFsaWduOiAncmlnaHQnfX0sIFtcbiAgICAgICAgaChQcmltYXJ5LCB7b25DbGljazogYXN5bmMgZSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgc2V0U3RhdGUoJ2xvYWRpbmcnKVxuICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPFVwZGF0ZUNvaG9ydE1zZywgVXBkYXRlQ29ob3J0UmVzcG9uc2U+KGAvYXBpL2NvaG9ydHMvJHtwcm9wcy5jb2hvcnQuaWR9YCwge2RhdGE6IHtsaXZlOiB0cnVlfX0pXG4gICAgICAgICAgaWYocmVzLnN0YXR1cyA9PT0gMjAwKSBwcm9wcy5tdXRhdGUoey4uLnByb3BzLmNvaG9ydCwgbGl2ZTogcmVzLnJlc3VsdC5saXZlfSlcbiAgICAgICAgICBzZXRTdGF0ZSgnY29tcGxldGUnKVxuICAgICAgICB9fSwgc3RhdGUgPT09ICdsb2FkaW5nJyA/IGgoTG9hZGVyKSA6ICdQdWJsaXNoIScpLFxuICAgICAgXSlcbiAgICBdKVxuICBdKVxuXG4gIHJldHVybiBoKFByaW1hcnksIHtzdHlsZToge2p1c3RpZnlTZWxmOlwiY2VudGVyXCJ9LCBvbkNsaWNrOiBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBzZXRTdGF0ZSgnY29uZmlybScpXG4gIH19LCAnUHVibGlzaCEnKVxufVxuLy9FbmQgQnV0dG9uIHRvIHB1Ymxpc2ggY29ob3J0XG5cbi8vTW9kYWwgdG8gY29tcGxldGUgY29ob3J0XG5jb25zdCBNYXJrQ29ob3J0Q29tcGxldGUgPSAocHJvcHM6e2NvaG9ydDpDb2hvcnQsIG11dGF0ZTooYzpDb2hvcnQpPT52b2lkfSk9PiB7XG4gIGxldCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPCdub3JtYWwnIHwgJ2NvbmZpcm0nIHwgJ2xvYWRpbmcnfCAnY29tcGxldGUnID4oJ25vcm1hbCcpXG5cbiAgaWYgKHN0YXRlID09PSBcImNvbmZpcm1cIiB8fCBzdGF0ZSA9PT0gXCJsb2FkaW5nXCIpXG4gICAgcmV0dXJuIGgoXG4gICAgICBNb2RhbCxcbiAgICAgIHtcbiAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgY2xvc2VUZXh0OiBcIm5ldmVybWluZFwiLFxuICAgICAgICBvbkV4aXQ6ICgpID0+IHNldFN0YXRlKFwibm9ybWFsXCIpLFxuICAgICAgfSxcbiAgICAgIFtcbiAgICAgICAgaChCb3gsIHsgZ2FwOiAzMiB9LCBbXG4gICAgICAgICAgaChcImgyXCIsIHsgc3R5bGU6IHsgdGV4dEFsaWduOiBcImNlbnRlclwiIH0gfSwgXCJBcmUgeW91IHN1cmU/XCIpLFxuICAgICAgICAgIGgoQm94LCB7IGdhcDogMTYgfSwgW1xuICAgICAgICAgICAgXCJCZWZvcmUgY2xvc2luZyB0aGlzIGNvdXJzZSwgcGxlYXNlLi4uXCIsXG4gICAgICAgICAgICBoKEJveCwgeyBnYXA6IDE2IH0sIFtcbiAgICAgICAgICAgICAgaChDaGVja0JveCwgW1xuICAgICAgICAgICAgICAgIGgoSW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoKFwic3BhblwiLCBbXG4gICAgICAgICAgICAgICAgICBcIlVzZSB0aGUgXCIsXG4gICAgICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICAgICBMaW5rLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgaHJlZjogYGh0dHA6Ly9rcmFrZW5lZHUuY29tL2NvdXJzZXMvJHtwcm9wcy5jb2hvcnQuY291cnNlcy5zbHVnfS8ke3Byb3BzLmNvaG9ydC5jb3Vyc2VzLmlkfS9jb2hvcnRzLyR7cHJvcHMuY29ob3J0LmlkfS90ZW1wbGF0ZXM/dGVtcGxhdGU9QXJ0aWZhY3RgLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcIkFydGlmYWN0IHRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBcIiB0byBwdWJsaWNseSBzaGFyZSBhbnkgYXJ0aWZhY3RzIG9yIGZpbmFsIHByb2plY3RzIHByb2R1Y2VkIGluIHRoZSBjb2hvcnRcIixcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgIGgoQ2hlY2tCb3gsIFtcbiAgICAgICAgICAgICAgICBoKElucHV0LCB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaChcInNwYW5cIiwgW1xuICAgICAgICAgICAgICAgICAgXCJVc2UgdGhlIFwiLFxuICAgICAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGBodHRwOi8va3Jha2VuZWR1LmNvbS9jb3Vyc2VzLyR7cHJvcHMuY29ob3J0LmNvdXJzZXMuc2x1Z30vJHtwcm9wcy5jb2hvcnQuY291cnNlcy5pZH0vY29ob3J0cy8ke3Byb3BzLmNvaG9ydC5pZH0vdGVtcGxhdGVzP3RlbXBsYXRlPVJldHJvYCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJSZXRyb3NwZWN0aXZlIHRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBcIiB0byBwb3N0IGEgY29ob3J0IHJldHJvIGluIHRoZSBmb3J1bS5cIixcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgIGgoU2VwZXJhdG9yKSxcbiAgICAgICAgICAgICAgaChcInNwYW5cIiwgW1xuICAgICAgICAgICAgICAgIFwiWW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYXJ0aWZhY3RzIGFuZCByZXRyb3MgaW4gb3VyIFwiLFxuICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICBMaW5rLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBocmVmOiBgaHR0cHM6Ly9hcHAua3Jha2VuZWR1LmNvbS9tYW51YWwvZmFjaWxpdGF0b3JzI2ZhY2lsaXRhdGluZy1hLWNvaG9ydGAsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXCJmYWNpbGl0YXRvciBndWlkZVwiXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBcIi5cIixcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgICBoKFxuICAgICAgICAgICAgUHJpbWFyeSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc3R5bGU6IHsganVzdGlmeVNlbGY6IFwiY2VudGVyXCIgfSxcbiAgICAgICAgICAgICAgb25DbGljazogYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPFVwZGF0ZUNvaG9ydE1zZywgVXBkYXRlQ29ob3J0UmVzcG9uc2U+KFxuICAgICAgICAgICAgICAgICAgYC9hcGkvY29ob3J0cy8ke3Byb3BzLmNvaG9ydC5pZH1gLFxuICAgICAgICAgICAgICAgICAgeyBkYXRhOiB7IGNvbXBsZXRlZDogdHJ1ZSB9IH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApXG4gICAgICAgICAgICAgICAgICBwcm9wcy5tdXRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcy5jb2hvcnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogcmVzLnJlc3VsdC5jb21wbGV0ZWQsXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZShcImNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXRlID09PSBcImxvYWRpbmdcIiA/IGgoTG9hZGVyKSA6IFwiTWFyayB0aGlzIGNvaG9ydCBjb21wbGV0ZVwiXG4gICAgICAgICAgKSxcbiAgICAgICAgXSksXG4gICAgICBdXG4gICAgKTtcblxuICByZXR1cm4gaChEZXN0cnVjdGl2ZSwge29uQ2xpY2s6IGFzeW5jIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHNldFN0YXRlKCdjb25maXJtJylcbiAgfX0sICdNYXJrIGFzIGNvbXBsZXRlJylcbn1cbi8vZW5kIG1vZGFsIHRvIGNvbXBsZXRlIGNvaG9ydHNcblxuXG4vLyBEZWZpbmluZyBCYW5uZXJzICh1cGNvbWluZy1mYWNpbGl0YXRvciwgdXBjb21pbmctbGVhcm5lciwgZHJhZnQpXG5jb25zdCBCYW5uZXJzID0gKHByb3BzOntcbiAgY29ob3J0OiBDb2hvcnRcbiAgbXV0YXRlOiAoYzpDb2hvcnQpPT52b2lkXG4gIGZhY2lsaXRhdGluZz86IGJvb2xlYW4sXG4gIGVucm9sbGVkPzogYm9vbGVhbixcbn0pPT57XG4gIGxldCBpc1N0YXJ0ZWQgPSAobmV3IERhdGUocHJvcHMuY29ob3J0LnN0YXJ0X2RhdGUpKS5nZXRUaW1lKCkgLSAobmV3IERhdGUoKSkuZ2V0VGltZSgpXG4gIGxldCBmb3J1bSA9IGAke0RJU0NPVVJTRV9VUkx9L3Nlc3Npb24vc3NvP3JldHVybl9wYXRoPS9jLyR7cHJvcHMuY29ob3J0LmNhdGVnb3J5X2lkfWBcblxuICBpZihwcm9wcy5mYWNpbGl0YXRpbmcgJiYgIXByb3BzLmNvaG9ydC5saXZlKSByZXR1cm4gaChUT0RPQmFubmVyLCBwcm9wcylcblxuICBpZihwcm9wcy5jb2hvcnQuY29tcGxldGVkICYmIChwcm9wcy5lbnJvbGxlZCB8fCBwcm9wcy5mYWNpbGl0YXRpbmcpKSAgcmV0dXJuIGgoVHdvQ29sdW1uQmFubmVyLCBbXG4gICAgaChCb3gsIHtnYXA6IDgsIGNsYXNzTmFtZTogXCJ0ZXh0U2Vjb25kYXJ5XCJ9LCBbXG4gICAgICBoKCdoNCcsIGBZb3UgY29tcGxldGVkIHRoaXMgY291cnNlIG9uICR7cHJldHR5RGF0ZShwcm9wcy5jb2hvcnQuY29tcGxldGVkIHx8ICcnKX0hYCksXG4gICAgICBoKCdwJywgW2BUaGlzIGNvaG9ydCdzIGAsIGgoJ2EnLCB7aHJlZjogZm9ydW19LCAncHJpdmF0ZSBmb3J1bScpLCBgIHdpbGwgYWx3YXlzIGJlIG9wZW4hIEZlZWwgZnJlZSB0byBjb21lIGJhY2sgd2hlbmV2ZXJgXSlcbiAgICBdKVxuICBdKVxuXG4gIGlmKGlzU3RhcnRlZCA+IDAgJiYgKHByb3BzLmVucm9sbGVkIHx8IHByb3BzLmZhY2lsaXRhdGluZykpIHtcbiAgICBpZihwcm9wcy5mYWNpbGl0YXRpbmcpIHtcbiAgICAgIHJldHVybiBoKFR3b0NvbHVtbkJhbm5lciwgW1xuICAgICAgICAgIGgoQm94LCB7Z2FwOiA4LCBjbGFzc05hbWU6IFwidGV4dFNlY29uZGFyeVwifSwgW1xuICAgICAgICAgICAgaCgnaDQnLCBgWW91J3JlIGZhY2lsaXRhdGluZyBpbiAke01hdGgucm91bmQoaXNTdGFydGVkIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKX0gZGF5cyBgKSxcbiAgICAgICAgICAgIGgoJ3AnLCBbXG4gICAgICAgICAgICAgIGBDaGVjayBvdXQgdGhlIGAsXG4gICAgICAgICAgICAgIGgoJ2EnLCB7aHJlZjogZm9ydW19LCAnZm9ydW0nKSxcbiAgICAgICAgICAgICAgYCBhbmQgbWVldCB0aGUgbGVhcm5lcnMuIFlvdSBjYW4gYWxzbyByZWFkIG91ciBgLCBoKCdhJywge2hyZWY6IFwiL21hbnVhbC9mYWNpbGl0YXRvcnNcIn0sICdmYWNpbGl0YXRvciBndWlkZScpLCBgIGluIHRoZSBLcmFrZW5lZHUgTWFudWFsYFxuICAgICAgICAgICAgXSlcbiAgICAgICAgICBdKVxuICAgICAgXSlcbiAgICB9XG4gICAgcmV0dXJuIGgoVHdvQ29sdW1uQmFubmVyLCBbXG4gICAgICAgIGgoQm94LCB7Z2FwOiA4LCBjbGFzc05hbWU6IFwidGV4dFNlY29uZGFyeVwifSwgW1xuICAgICAgICAgIGgoJ2g0JywgYFlvdSBzdGFydCBpbiAke01hdGgucm91bmQoaXNTdGFydGVkIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKX0gZGF5cyBgKSxcbiAgICAgICAgICBoKCdwJywgW1xuICAgICAgICAgICAgYENoZWNrIG91dCB0aGUgYCxcbiAgICAgICAgICAgIGgoJ2EnLCB7aHJlZjogZm9ydW19LCAnZm9ydW0nKSxcbiAgICAgICAgICAgIGAgd2hpbGUgeW91J3JlIHdhaXRpbmcuIFlvdSBjYW4gaW50cm9kdWNlIHlvdXJzZWxmIGFuZCBsZWFybiBtb3JlIGFib3V0IHdoYXQgeW91J2xsIGJlIGRvaW5nIHdoZW4geW91ciBjb2hvcnQgc3RhcnRzIWBcbiAgICAgICAgICBdKVxuICAgICAgICBdKVxuICAgIF0pXG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuY29uc3QgVE9ET0Jhbm5lciA9IChwcm9wczp7XG4gIGNvaG9ydDpDb2hvcnQsIFxuICBtdXRhdGU6KGM6Q29ob3J0KT0+dm9pZFxufSkgPT4ge1xuICBsZXQgW2V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICByZXR1cm4gaChUd29Db2x1bW5CYW5uZXIsIHsgcmVkOiB0cnVlIH0sIFtcbiAgICBoKEJhbm5lckNvbnRlbnQsIFtcbiAgICAgIGgoQWNjZW50SW1nLCB7XG4gICAgICAgIGhlaWdodDogMzIsXG4gICAgICAgIHdpZHRoOiAzNixcbiAgICAgICAgc3JjOlxuICAgICAgICAgIFwiaHR0cHM6Ly9oeXBlcmxpbmstZGF0YS5ueWMzLmNkbi5kaWdpdGFsb2NlYW5zcGFjZXMuY29tL2ljb25zL1NlZWRsaW5nLnBuZ1wiLFxuICAgICAgfSksXG4gICAgICBoKEJveCwgeyBnYXA6IDggfSwgW1xuICAgICAgICBoKFwiaDRcIiwgXCJUaGlzIGNvaG9ydCBpcyBzdGlsbCBhIGRyYWZ0XCIpLFxuICAgICAgICBoKFxuICAgICAgICAgIFwicFwiLFxuICAgICAgICAgIFwiSXTigJlzIGhpZGRlbiBmcm9tIHB1YmxpYyB2aWV3LiBQZW9wbGUgY2Fu4oCZdCBqb2luIHVudGlsIHlvdSBwdWJsaXNoIGl0LlwiXG4gICAgICAgICksXG4gICAgICBdKSxcblxuICAgICAgLi4uKCFleHBhbmRlZFxuICAgICAgICA/IFtdXG4gICAgICAgIDogW1xuICAgICAgICAgICAgaChBY2NlbnRJbWcsIHtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAzMixcbiAgICAgICAgICAgICAgd2lkdGg6IDM2LFxuICAgICAgICAgICAgICBzcmM6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2h5cGVybGluay1kYXRhLm55YzMuY2RuLmRpZ2l0YWxvY2VhbnNwYWNlcy5jb20vaWNvbnMvQnVkLnBuZ1wiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoKEJveCwgeyBnYXA6IDE2IH0sIFtcbiAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICBcImg0XCIsXG4gICAgICAgICAgICAgICAgXCJCZWZvcmUgeW91IHB1Ymxpc2ggdGhpcyBjb2hvcnQgbWFrZSBzdXJlIHRoYXQgeW91IC4uLiAgXCJcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgaChUb2RvTGlzdCwge1xuICAgICAgICAgICAgICAgIHBlcnNpc3RLZXk6IFwiY29ob3J0LXB1Ymxpc2gtdG9kby1cIiArIHByb3BzLmNvaG9ydC5pZCxcbiAgICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgICAgXCJBZGQgZXZlbnRzIHRvIHlvdXIgY29ob3J0IHNjaGVkdWxlIGZvciBhbnkgbGl2ZSBjYWxscyBvciBpbXBvcnRhbnQgZGF0ZXMgcGVvcGxlIG5lZWQgdG8gcmVtZW1iZXIuXCIsXG4gICAgICAgICAgICAgICAgICBoKFwic3BhblwiLCBbXG4gICAgICAgICAgICAgICAgICAgIFwiRmlsbCBvdXQgXCIsXG4gICAgICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBgaHR0cHM6Ly9hcHAua3Jha2VuZWR1LmNvbS9kYXNoYm9hcmQ/dGFiPVByb2ZpbGVgLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgXCJ5b3VyIGJpb1wiXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFwiIGFuZCB0ZWxsIHBlb3BsZSBtb3JlIGFib3V0IHlvdS5cIixcbiAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgaChcInNwYW5cIiwgW1xuICAgICAgICAgICAgICAgICAgICBcIkZpbGwgb3V0IHRoZSBcIixcbiAgICAgICAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBgJHtESVNDT1VSU0VfVVJMfS9zZXNzaW9uL3Nzbz9yZXR1cm5fcGF0aD0vYy8ke3Byb3BzLmNvaG9ydC5jYXRlZ29yeV9pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgXCJHZXR0aW5nIFN0YXJ0ZWQgdG9waWNcIlxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBcIiBpbiB0aGUgZm9ydW0gd2l0aCBhbnkgZmlyc3Qgc3RlcHMgbGVhcm5lcnMgc2hvdWxkIHRha2UuIFRoaXMgd2lsbCBiZSBsaW5rZWQgaW4gdGhlIHdlbGNvbWUgZW1haWwgc2VudCB0byBldmVyeW9uZSB3aG8gZW5yb2xscy5cIixcbiAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSksXG5cbiAgICAgICAgICAgIGgoQWNjZW50SW1nLCB7XG4gICAgICAgICAgICAgIGhlaWdodDogMzIsXG4gICAgICAgICAgICAgIHdpZHRoOiAzNixcbiAgICAgICAgICAgICAgc3JjOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9oeXBlcmxpbmstZGF0YS5ueWMzLmNkbi5kaWdpdGFsb2NlYW5zcGFjZXMuY29tL2ljb25zL0Zsb3dlci5wbmdcIixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgaChCb3gsIHsgZ2FwOiAxNiB9LCBbXG4gICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgXCJoNFwiLFxuICAgICAgICAgICAgICAgIFwiT25jZSB5b3UncmUgcmVhZHksIGhpdCBwdWJsaXNoIGFuZCBzdGFydCBzcHJlYWRpbmcgdGhlIHdvcmQhXCJcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgaChNYXJrQ29ob3J0TGl2ZSwgeyBjb2hvcnQ6IHByb3BzLmNvaG9ydCwgbXV0YXRlOiBwcm9wcy5tdXRhdGUgfSksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICBdKSxcbiAgICBdKSxcblxuICAgIGgoXG4gICAgICBMaW5rQnV0dG9uLFxuICAgICAge1xuICAgICAgICBzdHlsZTogeyBqdXN0aWZ5U2VsZjogXCJyaWdodFwiLCB0ZXh0RGVjb3JhdGlvbjogXCJub25lXCIgfSxcbiAgICAgICAgb25DbGljazogKCkgPT4gc2V0RXhwYW5kZWQoIWV4cGFuZGVkKSxcbiAgICAgIH0sXG4gICAgICBleHBhbmRlZCA/IFwiaGlkZSBjaGVja2xpc3RcIiA6IFwic2hvdyBjaGVja2xpc3RcIlxuICAgICksXG4gIF0pO1xufVxuXG5cbmNvbnN0IEJhbm5lckNvbnRlbnQgPSBzdHlsZWQoJ2RpdicpIGBcbmRpc3BsYXk6IGdyaWQ7IFxuZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtaW4tY29udGVudCBhdXRvO1xuZ3JpZC1jb2x1bW4tZ2FwOiAxNnB4O1xuZ3JpZC1yb3ctZ2FwOiAzMnB4O1xuXG5gXG5cbi8vRW5kIEJhbm5lcmFcblxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gYXN5bmMgKGN0eDphbnkpPT57XG4gIGxldCBjb3Vyc2VJZCA9IHBhcnNlSW50KChjdHgucGFyYW1zPy5pZCBhcyBzdHJpbmcpIHx8IFwiXCIpO1xuICBpZiAoTnVtYmVyLmlzTmFOKGNvdXJzZUlkKSkgcmV0dXJuIHsgcHJvcHM6IHsgbm90Rm91bmQ6IHRydWUgfSB9IGFzIGNvbnN0O1xuXG4gIGxldCBjb3Vyc2UgPSBhd2FpdCBjb3Vyc2VEYXRhUXVlcnkoY291cnNlSWQpO1xuICBpZiAoIWNvdXJzZSkgcmV0dXJuIHsgcHJvcHM6IHsgbm90Rm91bmQ6IHRydWUgfSB9IGFzIGNvbnN0O1xuXG4gIGxldCBjb2hvcnRJZCA9IHBhcnNlSW50KChjdHgucGFyYW1zPy5jb2hvcnRJZCBhcyBzdHJpbmcpIHx8IFwiXCIpO1xuICBpZiAoTnVtYmVyLmlzTmFOKGNvaG9ydElkKSkgcmV0dXJuIHsgcHJvcHM6IHsgbm90Rm91bmQ6IHRydWUgfSB9IGFzIGNvbnN0O1xuICBsZXQgY29ob3J0ID0gYXdhaXQgY29ob3J0RGF0YVF1ZXJ5KGNvaG9ydElkKTtcblxuICBpZiAoIWNvaG9ydCkgcmV0dXJuIHsgcHJvcHM6IHsgbm90Rm91bmQ6IHRydWUgfSB9IGFzIGNvbnN0O1xuXG4gIGxldCBbYXJ0aWZhY3RzLCBjdXJyaWN1bHVtXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRUYWdnZWRQb3N0KGNvaG9ydC5jYXRlZ29yeV9pZCwgXCJhcnRpZmFjdFwiKSxcbiAgICBnZXRUYWdnZWRQb3N0KGNvaG9ydC5jb3Vyc2VzLmNhdGVnb3J5X2lkLCBcImN1cnJpY3VsdW1cIiksXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgcHJvcHM6IHtcbiAgICAgIG5vdEZvdW5kOiBmYWxzZSxcbiAgICAgIGNvdXJzZUlkLFxuICAgICAgY29ob3J0SWQsXG4gICAgICBjb2hvcnQsXG4gICAgICBjb3Vyc2UsXG4gICAgICBjdXJyaWN1bHVtLFxuICAgICAgYXJ0aWZhY3RzLFxuICAgIH0sXG4gICAgcmV2YWxpZGF0ZTogMSxcbiAgfSBhcyBjb25zdDtcbn1cblxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1BhdGhzID0gKCkgPT4ge1xuICByZXR1cm4ge3BhdGhzOltdLCBmYWxsYmFjazogdHJ1ZX1cbn1cbiJdfQ== */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n});\nexport const CohortMembers = props => {\n  let {\n    0: unenrollState,\n    1: setUnenrollState\n  } = useState();\n  return h(Fragment, [!unenrollState ? null : h(UnenrollModal, _objectSpread({\n    display: !!unenrollState,\n    onExit: () => setUnenrollState(undefined)\n  }, unenrollState)), h(Box, {\n    gap: 16\n  }, [h(\"h3\", \"Facilitators\"), props.isFacilitator ? null : h(Info, [`Questions about this `, props.cohort.courses.type === \"club\" ? `club` : `course`, `? `, h(\"a\", {\n    href: `https://forum.krakenedu.com/new-message?groupname=${props.cohort.courses.slug}-m`,\n    target: `_blank`\n  }, `Message the facilitator`), ` on the forum.`]), ...props.cohort.cohort_facilitators.map(f => h(Box, [props.user === f.facilitator ? h(Info, [`ðŸ’¡ You can edit your bio in the profile tab on your `, h(Link, {\n    href: \"/dashboard\"\n  }, h(\"a\", \"dashboard\"))]) : null, h(\"h3\", [``, h(Link, {\n    href: \"/people/[id]\",\n    as: `/people/${f.people.username}`\n  }, h(\"a\", {\n    className: \"notBlue\"\n  }, f.people.display_name || f.people.username)), f.people.pronouns ? h(\"span.textSecondary\", {}, ` (${f.people.pronouns})`) : null]), h(Text, {\n    source: f.people.bio || \"\"\n  })])), // message facilitator - shows for logged in and anon users; hidden on things you're facilitating\n  props.cohort.people_in_cohorts.length === 0 ? null : h(Box, {\n    h: true\n  }, [h(\"h4\", [\"Members \", h(\"span.textSecondary\", `(${props.cohort.people_in_cohorts.length}${props.cohort.courses.cohort_max_size !== 0 ? `/${props.cohort.courses.cohort_max_size}` : \"\"})`)]), !props.isFacilitator ? null : h(\"a\", {\n    href: `mailto:?bcc=${props.cohort.people_in_cohorts.map(p => p.people.email).join(\",\")}`\n  }, \"email everyone\")]), ...props.cohort.people_in_cohorts.map(person => {\n    return h(\"div\", {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: \"auto auto\"\n      }\n    }, [h(Box, {\n      h: true\n    }, [h(Link, {\n      href: \"/people/[id]\",\n      as: `/people/${person.people.username}`\n    }, [h(\"a\", {\n      className: \"notBlue\"\n    }, person.people.display_name || person.people.username)]), person.people.pronouns ? h(\"span.textSecondary\", {}, ` (${person.people.pronouns})`) : null]), !props.isFacilitator ? null : h(\"div\", {\n      style: {\n        justifySelf: \"right\"\n      }\n    }, [h(\"a\", {\n      style: {\n        marginRight: \"10px\"\n      },\n      href: `mailto:${person.people.email}`\n    }, \"email\"), h(DestructiveSmallButton, {\n      onClick: () => {\n        setUnenrollState({\n          personID: person.person,\n          cohortID: props.cohort.id,\n          username: person.people.username,\n          display_name: person.people.display_name,\n          removeMember: () => {\n            props.mutate(_objectSpread(_objectSpread({}, props.cohort), {}, {\n              people_in_cohorts: props.cohort.people_in_cohorts.filter(p => p.person !== person.person)\n            }));\n          }\n        });\n      }\n    }, \"unenroll\")])]);\n  })])]);\n};\n\nconst UnenrollModal = props => {\n  let [status, callUnenroll] = useApi([]);\n  return h(Modal, {\n    display: props.display,\n    onExit: props.onExit,\n    hideCloseButton: true\n  }, [status === 'success' ? h(Box, {\n    style: {\n      textAlign: 'center',\n      justifyItems: 'center'\n    }\n  }, [h('h2', \"Unenrolled!\"), h('p', [`You've unenrolled `, h('b', props.display_name || props.username), ` from this cohort`]), h('p', [`They'll be refunded within 5 business days`]), h(Secondary, {\n    onClick: props.onExit,\n    style: {\n      width: \"250px\"\n    }\n  }, \"exit\")]) : h(Box, {\n    gap: 32,\n    style: {\n      textAlign: 'center',\n      justifyItems: 'center'\n    }\n  }, [h(Box, [h('h2', \"Un-Enroll and Issue Refund\"), h('p', [`You are about to un-enroll `, h('b', props.display_name || props.username), ` from this cohort`])]), h(Box, {\n    gap: 8\n  }, [h(Destructive, {\n    status,\n    onClick: async () => {\n      let result = await callUnenroll(`/api/cohorts/${props.cohortID}/enroll`, {\n        person: props.personID\n      }, \"DELETE\");\n\n      if (result.status === 200) {\n        props.removeMember();\n      }\n    },\n    style: {\n      width: \"250px\"\n    }\n  }, 'Un-enroll'), h(Secondary, {\n    onClick: props.onExit,\n    style: {\n      width: \"250px\"\n    }\n  }, \"Cancel\")])])]);\n}; // Button to Publish Draft Cohort\n\n\nconst MarkCohortLive = props => {\n  let {\n    0: state,\n    1: setState\n  } = useState('normal');\n  if (state === 'confirm' || state === 'loading') return h(Modal, {\n    display: true,\n    closeText: \"nevermind\",\n    onExit: () => setState('normal')\n  }, [h(Box, {\n    gap: 32\n  }, [h('h2', \"Are you sure?\"), h(Box, {\n    gap: 16,\n    style: {\n      textAlign: 'right'\n    }\n  }, [h(Primary, {\n    onClick: async e => {\n      e.preventDefault();\n      setState('loading');\n      let res = await callApi(`/api/cohorts/${props.cohort.id}`, {\n        data: {\n          live: true\n        }\n      });\n      if (res.status === 200) props.mutate(_objectSpread(_objectSpread({}, props.cohort), {}, {\n        live: res.result.live\n      }));\n      setState('complete');\n    }\n  }, state === 'loading' ? h(Loader) : 'Publish!')])])]);\n  return h(Primary, {\n    style: {\n      justifySelf: \"center\"\n    },\n    onClick: async e => {\n      e.preventDefault();\n      setState('confirm');\n    }\n  }, 'Publish!');\n}; //End Button to publish cohort\n//Modal to complete cohort\n\n\nconst MarkCohortComplete = props => {\n  let {\n    0: state,\n    1: setState\n  } = useState('normal');\n  if (state === \"confirm\" || state === \"loading\") return h(Modal, {\n    display: true,\n    closeText: \"nevermind\",\n    onExit: () => setState(\"normal\")\n  }, [h(Box, {\n    gap: 32\n  }, [h(\"h2\", {\n    style: {\n      textAlign: \"center\"\n    }\n  }, \"Are you sure?\"), h(Box, {\n    gap: 16\n  }, [\"Before closing this course, please...\", h(Box, {\n    gap: 16\n  }, [h(CheckBox, [h(Input, {\n    type: \"checkbox\"\n  }), h(\"span\", [\"Use the \", h(Link, {\n    href: `http://krakenedu.com/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}/templates?template=Artifact`\n  }, \"Artifact template\"), \" to publicly share any artifacts or final projects produced in the cohort\"])]), h(CheckBox, [h(Input, {\n    type: \"checkbox\"\n  }), h(\"span\", [\"Use the \", h(Link, {\n    href: `http://krakenedu.com/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}/templates?template=Retro`\n  }, \"Retrospective template\"), \" to post a cohort retro in the forum.\"])]), h(Seperator), h(\"span\", [\"You can find more information about artifacts and retros in our \", h(Link, {\n    href: `https://app.krakenedu.com/manual/facilitators#facilitating-a-cohort`\n  }, \"facilitator guide\"), \".\"])])]), h(Primary, {\n    style: {\n      justifySelf: \"center\"\n    },\n    onClick: async e => {\n      e.preventDefault();\n      setState(\"loading\");\n      let res = await callApi(`/api/cohorts/${props.cohort.id}`, {\n        data: {\n          completed: true\n        }\n      });\n      if (res.status === 200) props.mutate(_objectSpread(_objectSpread({}, props.cohort), {}, {\n        completed: res.result.completed\n      }));\n      setState(\"complete\");\n    }\n  }, state === \"loading\" ? h(Loader) : \"Mark this cohort complete\")])]);\n  return h(Destructive, {\n    onClick: async e => {\n      e.preventDefault();\n      setState('confirm');\n    }\n  }, 'Mark as complete');\n}; //end modal to complete cohorts\n// Defining Banners (upcoming-facilitator, upcoming-learner, draft)\n\n\nconst Banners = props => {\n  let isStarted = new Date(props.cohort.start_date).getTime() - new Date().getTime();\n  let forum = `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`;\n  if (props.facilitating && !props.cohort.live) return h(TODOBanner, props);\n  if (props.cohort.completed && (props.enrolled || props.facilitating)) return h(TwoColumnBanner, [h(Box, {\n    gap: 8,\n    className: \"textSecondary\"\n  }, [h('h4', `You completed this course on ${prettyDate(props.cohort.completed || '')}!`), h('p', [`This cohort's `, h('a', {\n    href: forum\n  }, 'private forum'), ` will always be open! Feel free to come back whenever`])])]);\n\n  if (isStarted > 0 && (props.enrolled || props.facilitating)) {\n    if (props.facilitating) {\n      return h(TwoColumnBanner, [h(Box, {\n        gap: 8,\n        className: \"textSecondary\"\n      }, [h('h4', `You're facilitating in ${Math.round(isStarted / (1000 * 60 * 60 * 24))} days `), h('p', [`Check out the `, h('a', {\n        href: forum\n      }, 'forum'), ` and meet the learners. You can also read our `, h('a', {\n        href: \"/manual/facilitators\"\n      }, 'facilitator guide'), ` in the Krakenedu Manual`])])]);\n    }\n\n    return h(TwoColumnBanner, [h(Box, {\n      gap: 8,\n      className: \"textSecondary\"\n    }, [h('h4', `You start in ${Math.round(isStarted / (1000 * 60 * 60 * 24))} days `), h('p', [`Check out the `, h('a', {\n      href: forum\n    }, 'forum'), ` while you're waiting. You can introduce yourself and learn more about what you'll be doing when your cohort starts!`])])]);\n  }\n\n  return null;\n};\n\nconst TODOBanner = props => {\n  let {\n    0: expanded,\n    1: setExpanded\n  } = useState(false);\n  return h(TwoColumnBanner, {\n    red: true\n  }, [h(BannerContent, [h(AccentImg, {\n    height: 32,\n    width: 36,\n    src: \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Seedling.png\"\n  }), h(Box, {\n    gap: 8\n  }, [h(\"h4\", \"This cohort is still a draft\"), h(\"p\", \"Itâ€™s hidden from public view. People canâ€™t join until you publish it.\")]), ...(!expanded ? [] : [h(AccentImg, {\n    height: 32,\n    width: 36,\n    src: \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Bud.png\"\n  }), h(Box, {\n    gap: 16\n  }, [h(\"h4\", \"Before you publish this cohort make sure that you ...  \"), h(TodoList, {\n    persistKey: \"cohort-publish-todo-\" + props.cohort.id,\n    items: [\"Add events to your cohort schedule for any live calls or important dates people need to remember.\", h(\"span\", [\"Fill out \", h(Link, {\n      href: `https://app.krakenedu.com/dashboard?tab=Profile`\n    }, \"your bio\"), \" and tell people more about you.\"]), h(\"span\", [\"Fill out the \", h(\"a\", {\n      href: `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`\n    }, \"Getting Started topic\"), \" in the forum with any first steps learners should take. This will be linked in the welcome email sent to everyone who enrolls.\"])]\n  })]), h(AccentImg, {\n    height: 32,\n    width: 36,\n    src: \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Flower.png\"\n  }), h(Box, {\n    gap: 16\n  }, [h(\"h4\", \"Once you're ready, hit publish and start spreading the word!\"), h(MarkCohortLive, {\n    cohort: props.cohort,\n    mutate: props.mutate\n  })])])]), h(LinkButton, {\n    style: {\n      justifySelf: \"right\",\n      textDecoration: \"none\"\n    },\n    onClick: () => setExpanded(!expanded)\n  }, expanded ? \"hide checklist\" : \"show checklist\")]);\n};\n\nconst BannerContent = /*#__PURE__*/_styled('div', {\n  target: \"e1jdl2f11\"\n})(true ? {\n  name: \"12gnjoo\",\n  styles: \"display:grid;grid-template-columns:min-content auto;grid-column-gap:16px;grid-row-gap:32px;\"\n} : {\n  name: \"12gnjoo\",\n  styles: \"display:grid;grid-template-columns:min-content auto;grid-column-gap:16px;grid-row-gap:32px;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvcGFnZXMvY291cnNlcy9bc2x1Z10vW2lkXS9jb2hvcnRzL1tjb2hvcnRJZF0vaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBdXRCb0MiLCJmaWxlIjoiL1VzZXJzL2F5b29sdXdhYWxmb25zby9jb2RlL2tyYWtlbmVkdWFwcC9wYWdlcy9jb3Vyc2VzL1tzbHVnXS9baWRdL2NvaG9ydHMvW2NvaG9ydElkXS9pbmRleC50cyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBoIGZyb20gJ3JlYWN0LWh5cGVyc2NyaXB0J1xuXG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCdcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJ1xuaW1wb3J0IHt1c2VTdGF0ZSwgdXNlRWZmZWN0LCBGcmFnbWVudH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBJbmZlckdldFN0YXRpY1Byb3BzVHlwZSB9IGZyb20gJ25leHQnXG5cbmltcG9ydCBDb3Vyc2VEZXRhaWxzIGZyb20gJ2NvbXBvbmVudHMvQ291cnNlL0Vucm9sbCdcbmltcG9ydCB7IEVucm9sbEJ1dHRvbiB9IGZyb20gJ2NvbXBvbmVudHMvQ291cnNlL0Vucm9sbEJ1dHRvbic7XG5pbXBvcnQgeyBTdWJFbnJvbGxCdXR0b24gfSBmcm9tICdjb21wb25lbnRzL0NvdXJzZS9TdWJFbnJvbGxCdXR0b24nO1xuXG5pbXBvcnQgeyBUd29Db2x1bW4sIEJveCwgTGFiZWxCb3gsIFNlcGVyYXRvciwgU2lkZWJhciwgV2hpdGVDb250YWluZXJ9IGZyb20gJ2NvbXBvbmVudHMvTGF5b3V0J1xuaW1wb3J0IHsgVmVydGljYWxUYWJzLCBTdGlja3lXcmFwcGVyIH0gZnJvbSAnY29tcG9uZW50cy9UYWJzJ1xuaW1wb3J0IHsgUHJpbWFyeSwgRGVzdHJ1Y3RpdmUsIERlc3RydWN0aXZlU21hbGxCdXR0b24sIFNlY29uZGFyeSwgTGlua0J1dHRvbiB9IGZyb20gJ2NvbXBvbmVudHMvQnV0dG9uJ1xuaW1wb3J0IExvYWRlciwgeyBQYWdlTG9hZGVyIH0gZnJvbSAnY29tcG9uZW50cy9Mb2FkZXInXG5pbXBvcnQgeyBDaGVja0JveCwgSW5mbywgSW5wdXQgfSBmcm9tICdjb21wb25lbnRzL0Zvcm0nXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ2NvbXBvbmVudHMvTW9kYWwnXG5pbXBvcnQge1R3b0NvbHVtbkJhbm5lcn0gZnJvbSAnY29tcG9uZW50cy9CYW5uZXInXG5pbXBvcnQgVGV4dCBmcm9tICdjb21wb25lbnRzL1RleHQnXG5pbXBvcnQge1dlbGNvbWVNb2RhbH0gZnJvbSAnY29tcG9uZW50cy9wYWdlcy9jb2hvcnRzL1dlbGNvbWVNb2RhbCdcblxuaW1wb3J0IHsgY29ob3J0TmFtZSwgcHJldHR5RGF0ZX0gZnJvbSAnc3JjL3V0aWxzJ1xuaW1wb3J0IHsgIGdldFRhZ2dlZFBvc3QgfSBmcm9tICdzcmMvZGlzY291cnNlJ1xuaW1wb3J0IHtESVNDT1VSU0VfVVJMfSBmcm9tICdzcmMvY29uc3RhbnRzJ1xuaW1wb3J0IHsgY2FsbEFwaSwgdXNlQXBpIH0gZnJvbSAnc3JjL2FwaUhlbHBlcnMnXG5pbXBvcnQgeyB1c2VDb2hvcnREYXRhLCB1c2VVc2VyQ29ob3J0cywgdXNlVXNlckRhdGEsIHVzZUNvdXJzZURhdGEsIENvaG9ydCwgdXNlUHJvZmlsZURhdGEgfSBmcm9tICdzcmMvZGF0YSdcbmltcG9ydCBFcnJvclBhZ2UgZnJvbSAncGFnZXMvNDA0J1xuaW1wb3J0IHsgY29ob3J0RGF0YVF1ZXJ5LCBVcGRhdGVDb2hvcnRNc2csIFVwZGF0ZUNvaG9ydFJlc3BvbnNlIH0gZnJvbSAncGFnZXMvYXBpL2NvaG9ydHMvW2NvaG9ydElkXSdcbmltcG9ydCB7IGNvdXJzZURhdGFRdWVyeSB9IGZyb20gJ3BhZ2VzL2FwaS9jb3Vyc2VzL1tpZF0nXG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnXG5pbXBvcnQgeyBDb2hvcnRFdmVudHMgfSBmcm9tICdjb21wb25lbnRzL3BhZ2VzL2NvaG9ydHMvRXZlbnRzJ1xuaW1wb3J0IHsgQ3JlYXRlRXZlbnQgfSBmcm9tICdjb21wb25lbnRzL3BhZ2VzL2NvaG9ydHMvQ3JlYXRlRXZlbnQnXG5pbXBvcnQgeyBBY2NlbnRJbWcgfSBmcm9tICdjb21wb25lbnRzL0ltYWdlcydcbmltcG9ydCB7IFRvZG9MaXN0IH0gZnJvbSAnY29tcG9uZW50cy9Ub2RvTGlzdCdcbmltcG9ydCB7IFVuRW5yb2xsTXNnLCBVbkVucm9sbFJlc3BvbnNlIH0gZnJvbSAncGFnZXMvYXBpL2NvaG9ydHMvW2NvaG9ydElkXS9lbnJvbGwnXG5cbnR5cGUgUHJvcHMgPSBJbmZlckdldFN0YXRpY1Byb3BzVHlwZTx0eXBlb2YgZ2V0U3RhdGljUHJvcHM+XG5jb25zdCBXcmFwcGVkQ29ob3J0UGFnZSA9IChwcm9wczogUHJvcHMpPT4gIHByb3BzLm5vdEZvdW5kID8gaChFcnJvclBhZ2UpIDogaChDb2hvcnRQYWdlLCBwcm9wcylcbmV4cG9ydCBkZWZhdWx0IFdyYXBwZWRDb2hvcnRQYWdlXG5jb25zdCBDb2hvcnRQYWdlID0gKHByb3BzOiBFeHRyYWN0PFByb3BzLCB7bm90Rm91bmQ6ZmFsc2V9PikgPT4ge1xuICBsZXQgcm91dGVyID0gdXNlUm91dGVyKClcbiAgbGV0IHtkYXRhOiB1c2VyfSA9IHVzZVVzZXJEYXRhKClcbiAgbGV0IHtkYXRhOiB1c2VyQ29ob3J0c30gPSB1c2VVc2VyQ29ob3J0cygpXG4gIGxldCB7ZGF0YTpwcm9maWxlfSA9IHVzZVByb2ZpbGVEYXRhKHVzZXIgPyB1c2VyLnVzZXJuYW1lIDogdW5kZWZpbmVkKVxuICBsZXQge2RhdGE6IGNvaG9ydCwgbXV0YXRlfSA9IHVzZUNvaG9ydERhdGEocHJvcHMuY29ob3J0SWQsIHByb3BzLmNvaG9ydClcbiAgbGV0IHtkYXRhOiBjb3Vyc2V9ID0gdXNlQ291cnNlRGF0YShwcm9wcy5jb3Vyc2VJZCwgcHJvcHMuY291cnNlKVxuICBsZXQgc2VsZWN0ZWRUYWIgPSByb3V0ZXIucXVlcnkudGFiIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuXG4gIHVzZUVmZmVjdCgoKT0+e1xuICAgIG11dGF0ZSh1bmRlZmluZWQsIHRydWUpXG4gIH0sIFshIWNvaG9ydF0pXG5cblxuICBpZighY29ob3J0IHx8ICFjb3Vyc2UpIHJldHVybiBoKFBhZ2VMb2FkZXIpXG5cbiAgbGV0IGludml0ZWQgPSAhIXVzZXJDb2hvcnRzPy5pbnZpdGVkX2NvdXJzZXMuZmluZChjb3Vyc2U9PmNvdXJzZS5pZCA9PT0gcHJvcHMuY291cnNlLmlkIClcbiAgbGV0IGluQ29ob3J0ID0gY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLmZpbmQocCA9PiBwLnBlcnNvbiA9PT0gKHVzZXIgPyB1c2VyLmlkIDogdW5kZWZpbmVkKSlcbiAgbGV0IGlzRmFjaWxpdGF0b3IgPSAhIXVzZXIgJiYgISFjb2hvcnQuY29ob3J0X2ZhY2lsaXRhdG9ycy5maW5kKGY9PnVzZXIgJiZmLnBlb3BsZS51c2VybmFtZSA9PT0gdXNlci51c2VybmFtZSlcbiAgbGV0IGlzU3RhcnRlZCA9IGNvaG9ydCAmJiBuZXcgRGF0ZSgpID4gbmV3IERhdGUoY29ob3J0LnN0YXJ0X2RhdGUpXG5cbiAgbGV0IFRhYnMgPSB7XG4gICAgQXJ0aWZhY3RzOiBwcm9wcy5hcnRpZmFjdHMudGV4dCA9PT0gJycgPyBudWxsIDogaChCb3gsIHtnYXA6IDY0fSwgW1xuICAgICAgaChCb3gsIHtnYXA6IDMyfSxbXG4gICAgICAgIGgoQm94LCBbXG4gICAgICAgICAgaChUZXh0LCB7c291cmNlOiBwcm9wcy5hcnRpZmFjdHM/LnRleHR9KVxuICAgICAgICBdKSxcbiAgICAgIF0pXG4gICAgXSksXG4gICAgU2NoZWR1bGU6IGNvaG9ydC5jb2hvcnRfZXZlbnRzLmxlbmd0aCA9PT0gMCAmJiAhaXNGYWNpbGl0YXRvciA/IG51bGwgOiBoKEJveCwge2dhcDogMzJ9LCBbXG4gICAgICBpc0ZhY2lsaXRhdG9yIHx8IGluQ29ob3J0ID8gaChDcmVhdGVFdmVudCwge1xuICAgICAgICBjb2hvcnQ6IGNvaG9ydC5pZCxcbiAgICAgICAgcGVvcGxlOiBbLi4uY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLm1hcChwPT5wLnBlb3BsZS51c2VybmFtZSksIC4uLmNvaG9ydC5jb2hvcnRfZmFjaWxpdGF0b3JzLm1hcChmPT5mLnBlb3BsZS51c2VybmFtZSldLFxuICAgICAgICBtdXRhdGU6IChjKT0+e1xuICAgICAgICAgIGlmKCFjb2hvcnQpIHJldHVyblxuICAgICAgICAgIG11dGF0ZSh7Li4uY29ob3J0LCBjb2hvcnRfZXZlbnRzOiBbLi4uY29ob3J0LmNvaG9ydF9ldmVudHMsIGNdfSlcbiAgICAgICAgfX0pIDogbnVsbCxcbiAgICAgIGgoQm94LCBbXG4gICAgICAgIGNvaG9ydC5jb2hvcnRfZXZlbnRzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgID8gaChXaGl0ZUNvbnRhaW5lciwgW1xuICAgICAgICAgICAgaChCb3gsIHtnYXA6MTYsIHN0eWxlOiB7bWF4V2lkdGg6IDQwMCwgdGV4dEFsaWduOiAnY2VudGVyJywgbWFyZ2luOiAnYXV0byd9fSwgW1xuICAgICAgICAgICAgICBoKCBFbXB0eUltZywge3NyYzogJy9pbWcvZW1wdHkucG5nJ30pLFxuICAgICAgICAgICAgICBoKCdzbWFsbC50ZXh0U2Vjb25kYXJ5JywgXCJFdmVudHMgYXJlIGdyZWF0IGZvciBzY2hlZHVsaW5nIGxpdmUgY2FsbHMgb3Igb3RoZXIgaW1wb3J0YW50IGNvaG9ydCBkYXRlcy4gTGVhcm5lcnMgY2FuIGFkZCB0aGVzZSB0byB0aGVpciBjYWxlbmRhcnMuIExvb2tzIGxpa2UgeW91IGhhdmVuJ3QgY3JlYXRlZCBhbnkgZXZlbnRzIHlldC4gSGl0IHRoZSBidXR0b24gYWJvdmUgdG8gc2NoZWR1bGUgb25lISFcIiApLFxuICAgICAgICAgICAgXSldKVxuICAgICAgICAgIDogaChDb2hvcnRFdmVudHMsIHtcbiAgICAgICAgICAgIGZhY2lsaXRhdGluZzogaXNGYWNpbGl0YXRvcixcbiAgICAgICAgICAgIGluQ29ob3J0OiEhaW5Db2hvcnQsXG4gICAgICAgICAgICBwZW9wbGU6IGNvaG9ydC5wZW9wbGVfaW5fY29ob3J0cy5tYXAocD0+cC5wZW9wbGUudXNlcm5hbWUpLFxuICAgICAgICAgICAgY29ob3J0OiBjb2hvcnQuaWQsXG4gICAgICAgICAgICBldmVudHM6IGNvaG9ydC5jb2hvcnRfZXZlbnRzLmZpbHRlcihjPT57XG4gICAgICAgICAgICAgIGlmKCF1c2VyIHx8ICFjb2hvcnQpIHJldHVybiBjLmV2ZXJ5b25lXG4gICAgICAgICAgICAgIGlmKGlzRmFjaWxpdGF0b3IpIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgIHJldHVybiBjLmV2ZXJ5b25lIHx8IGMuZXZlbnRzLnBlb3BsZV9pbl9ldmVudHMuZmluZChwPT51c2VyJiZwLnBlb3BsZS51c2VybmFtZT09PXVzZXIudXNlcm5hbWUpXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG11dGF0ZTogKGV2ZW50cyk9PntcbiAgICAgICAgICAgICAgaWYoIWNvaG9ydCkgcmV0dXJuXG4gICAgICAgICAgICAgIG11dGF0ZSh7XG4gICAgICAgICAgICAgICAgLi4uY29ob3J0LCBjb2hvcnRfZXZlbnRzOiBldmVudHN9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNob3dDYWw6IChpbkNvaG9ydCB8fCBpc0ZhY2lsaXRhdG9yKSAmJiBjb2hvcnQuY29ob3J0X2V2ZW50cy5sZW5ndGggPiAwXG4gICAgICAgICAgfSlcbiAgICAgIF0pXG4gICAgXSksXG4gICAgW2NvdXJzZS50eXBlID09PSAnY2x1YicgPyBcIkRldGFpbHNcIiA6IFwiQ3VycmljdWx1bVwiXTogaChCb3gsIFtcbiAgICAgICFpc0ZhY2lsaXRhdG9yID8gbnVsbCA6IGgoSW5mbywgW1xuICAgICAgICBg8J+SoSBZb3UgY2FuIG1ha2UgY2hhbmdlcyB0byB0aGlzIHBhZ2UgYnkgZWRpdGluZyBgLFxuICAgICAgICBoKCdhJywge2hyZWY6IGAke0RJU0NPVVJTRV9VUkx9L3Nlc3Npb24vc3NvP3JldHVybl9wYXRoPS90LyR7cHJvcHMuY3VycmljdWx1bT8uaWR9YH0sIGB0aGlzIHRvcGljYCksXG4gICAgICAgIGAgaW4gdGhlIGZvcnVtYFxuICAgICAgXSksXG4gICAgICBoKFRleHQsIHtzb3VyY2U6cHJvcHMuY3VycmljdWx1bT8udGV4dH0pXG4gICAgXSksXG4gICAgTWVtYmVyczogaChDb2hvcnRNZW1iZXJzLCB7Y29ob3J0OiBjb2hvcnQsIGlzRmFjaWxpdGF0b3IsIG11dGF0ZSwgdXNlcjogdXNlciA/IHVzZXIuaWQgOiB1bmRlZmluZWR9KVxuICAgICAgfSBhcyB7W2s6c3RyaW5nXTpSZWFjdC5SZWFjdEVsZW1lbnR9XG4gIGxldCB0YWJLZXlzID0gT2JqZWN0LmtleXMoVGFicykuZmlsdGVyKHQ9PiEhVGFic1t0XSlcblxuICByZXR1cm4gaChcImRpdlwiLCB7fSwgW1xuICAgIGgoSGVhZCwge1xuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgaChcIm1ldGFcIiwge1xuICAgICAgICAgIHByb3BlcnR5OiBcIm9nOnRpdGxlXCIsXG4gICAgICAgICAgY29udGVudDogY291cnNlLm5hbWUsXG4gICAgICAgICAga2V5OiBcIm9nOnRpdGxlXCIsXG4gICAgICAgIH0pLFxuICAgICAgICBoKFwibWV0YVwiLCB7XG4gICAgICAgICAgcHJvcGVydHk6IFwib2c6ZGVzY3JpcHRpb25cIixcbiAgICAgICAgICBjb250ZW50OiBcIlN0YXJ0aW5nIFwiICsgcHJldHR5RGF0ZShjb2hvcnQuc3RhcnRfZGF0ZSksXG4gICAgICAgICAga2V5OiBcIm9nOmRlc2NyaXB0aW9uXCIsXG4gICAgICAgIH0pLFxuICAgICAgICBoKFwibWV0YVwiLCB7XG4gICAgICAgICAgcHJvcGVydHk6IFwib2c6aW1hZ2VcIixcbiAgICAgICAgICBjb250ZW50OiBjb3Vyc2UuY2FyZF9pbWFnZS5zcGxpdChcIixcIilbMF0sXG4gICAgICAgICAga2V5OiBcIm9nOmltYWdlXCIsXG4gICAgICAgIH0pLFxuICAgICAgICBoKFwibWV0YVwiLCB7XG4gICAgICAgICAgcHJvcGVydHk6IFwidHdpdHRlcjpjYXJkXCIsXG4gICAgICAgICAgY29udGVudDogXCJzdW1tYXJ5XCIsXG4gICAgICAgICAga2V5OiBcInR3aXR0ZXI6Y2FyZFwiLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgfSksXG4gICAgaChXZWxjb21lTW9kYWwsIHtcbiAgICAgIGRpc3BsYXk6IHJvdXRlci5xdWVyeS53ZWxjb21lICE9PSB1bmRlZmluZWQsXG4gICAgICBjb2hvcnQsXG4gICAgICB1c2VyX2NhbGVuZGFyOiBwcm9maWxlID8gcHJvZmlsZS5jYWxlbmRhcl9pZCA6IFwiXCIsXG4gICAgfSksXG4gICAgaChCYW5uZXJzLCB7XG4gICAgICBjb2hvcnQsXG4gICAgICBtdXRhdGUsXG4gICAgICBlbnJvbGxlZDogISFpbkNvaG9ydCxcbiAgICAgIGZhY2lsaXRhdGluZzogaXNGYWNpbGl0YXRvcixcbiAgICB9KSxcbiAgICBoKEJveCwgeyBnYXA6IDMyIH0sIFtcbiAgICAgIGgoVHdvQ29sdW1uLCBbXG4gICAgICAgIGgoQm94LCB7IGdhcDogOCwgc3R5bGU6IHsgZ3JpZENvbHVtbjogMSB9IH0sIFtcbiAgICAgICAgICBjb3Vyc2UudHlwZSA9PT0gXCJjb3Vyc2VcIlxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IGgoXG4gICAgICAgICAgICAgICAgQm94LFxuICAgICAgICAgICAgICAgIHsgaDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHByb3BzLmNvdXJzZS5jYXJkX2ltYWdlXG4gICAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgICAgICAgICAubWFwKChzcmMpID0+XG4gICAgICAgICAgICAgICAgICAgIGgoXCJpbWdcIiwgeyBzcmMsIHN0eWxlOiB7IGltYWdlUmVuZGVyaW5nOiBcInBpeGVsYXRlZFwiIH0gfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICBoKFwiaDFcIiwgY29ob3J0TmFtZShjb2hvcnQubmFtZSkpLFxuICAgICAgICAgIGgoXG4gICAgICAgICAgICBMaW5rLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBocmVmOiBgL2NvdXJzZXMvJHtjb2hvcnQuY291cnNlcy5zbHVnfS8ke2NvaG9ydC5jb3Vyc2VzLmlkfWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaChcImEubm90Qmx1ZVwiLCB7fSwgaChcImgzLnRleHRTZWNvbmRhcnlcIiwgY29ob3J0Py5jb3Vyc2VzLm5hbWUpKVxuICAgICAgICAgICksXG4gICAgICAgICAgaChcInAuYmlnXCIsIGNvaG9ydC5kZXNjcmlwdGlvbiksXG4gICAgICAgIF0pLFxuICAgICAgICBUYWJzW3NlbGVjdGVkVGFiID8gc2VsZWN0ZWRUYWIgOiB0YWJLZXlzWzBdXSxcbiAgICAgICAgaChTaWRlYmFyLCB7fSwgW1xuICAgICAgICAgIGgoU3RpY2t5V3JhcHBlciwgW1xuICAgICAgICAgICAgaChCb3gsIHsgZ2FwOiAxNiB9LCBbXG4gICAgICAgICAgICAgIGluQ29ob3J0IHx8IGlzU3RhcnRlZCB8fCBpc0ZhY2lsaXRhdG9yXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBoKENvdXJzZURldGFpbHMsIHsgY291cnNlIH0pLFxuICAgICAgICAgICAgICBpbkNvaG9ydCB8fCBpc1N0YXJ0ZWQgfHwgaXNGYWNpbGl0YXRvclxuICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgIDogXG4gICAgICAgICAgICBoKEJveCwgW1xuICAgICAgICAgICAgICAgaChMYWJlbEJveCx7c3R5bGU6e2ZvbnRTaXplOiAnMnJlbSd9fSAsXCJKb2luIHRoaXMgY29ob3J0XCIpLFxuICAgICAgICAgICAgICAgIGgoU3ViRW5yb2xsQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvaG9ydC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb3Vyc2U6IGNvdXJzZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICBtYXhfc2l6ZTogY291cnNlLmNvaG9ydF9tYXhfc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICBsZWFybmVyczogY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBpbnZpdGVkOiAhY291cnNlLmludml0ZV9vbmx5IHx8IGludml0ZWQsXG4gICAgICAgICAgICAgICAgICAgIH0sICBcInZpYSBQYXlzdGFja1wiKSxcbiAgICAgICAgICAgICAgICBoKEVucm9sbEJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb2hvcnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgY291cnNlOiBjb3Vyc2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgbWF4X3NpemU6IGNvdXJzZS5jb2hvcnRfbWF4X3NpemUsXG4gICAgICAgICAgICAgICAgICAgICAgbGVhcm5lcnM6IGNvaG9ydC5wZW9wbGVfaW5fY29ob3J0cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgaW52aXRlZDogIWNvdXJzZS5pbnZpdGVfb25seSB8fCBpbnZpdGVkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInZpYSBTdHJpcGVcIlxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgaChCb3gsIFtcbiAgICAgICAgICAgICAgICBoKFwiaDNcIiwgXCJJbmZvcm1hdGlvblwiKSxcbiAgICAgICAgICAgICAgICBoKFZlcnRpY2FsVGFicywge1xuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVGFiICYmIFRhYnNbc2VsZWN0ZWRUYWJdID8gc2VsZWN0ZWRUYWIgOiB0YWJLZXlzWzBdLFxuICAgICAgICAgICAgICAgICAgdGFiczogdGFiS2V5cyxcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAodGFiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByb3V0ZSA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAgICAgICAgICAgICByb3V0ZS5zZWFyY2hQYXJhbXMuc2V0KFwidGFiXCIsIHRhYik7XG4gICAgICAgICAgICAgICAgICAgIHJvdXRlci5yZXBsYWNlKHJvdXRlLCB1bmRlZmluZWQsIHsgc2hhbGxvdzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICBpbkNvaG9ydCB8fCBpc0ZhY2lsaXRhdG9yIHx8IGNvaG9ydC5jb21wbGV0ZWRcbiAgICAgICAgICAgICAgICA/IGgoQm94LCB7fSwgW1xuICAgICAgICAgICAgICAgICAgICAhaXNGYWNpbGl0YXRvclxuICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgIDogaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyBcIi9zZXR0aW5nc1wiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGgoXCJhXCIsIHt9LCBoKFByaW1hcnksIFwiQ29ob3J0IFNldHRpbmdzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgIWluQ29ob3J0ICYmICFpc0ZhY2lsaXRhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgOiBoKEJveCwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGAke0RJU0NPVVJTRV9VUkx9L3Nlc3Npb24vc3NvP3JldHVybl9wYXRoPS9jLyR7Y29ob3J0LmNhdGVnb3J5X2lkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKFNlY29uZGFyeSwgXCJUaGUgRm9ydW1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzRmFjaWxpdGF0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpbmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIvY291cnNlcy9bc2x1Z10vW2lkXS9jb2hvcnRzL1tjb2hvcnRJZF0vdGVtcGxhdGVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXM6IGAvY291cnNlcy8ke2NvaG9ydC5jb3Vyc2VzLnNsdWd9LyR7Y29ob3J0LmNvdXJzZXMuaWR9L2NvaG9ydHMvJHtjb2hvcnQuaWR9L3RlbXBsYXRlc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoU2Vjb25kYXJ5LCBcIkZvcnVtIFBvc3QgZnJvbSBUZW1wbGF0ZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIWNvaG9ydC5jb21wbGV0ZWQgJiYgaXNGYWNpbGl0YXRvciAmJiBpc1N0YXJ0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGgoTWFya0NvaG9ydENvbXBsZXRlLCB7IGNvaG9ydCwgbXV0YXRlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgIF0pLFxuICAgICAgICBdKSxcbiAgICAgIF0pLFxuICAgIF0pLFxuICBdKTtcbn1cblxuXG5leHBvcnQgbGV0IEVtcHR5SW1nID0gc3R5bGVkICgnaW1nJykgYFxuaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7XG5pbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7XG5pbWFnZS1yZW5kZXJpbmc6IGNyaXNwLWVkZ2VzO1xuZGlzcGxheTogYmxvY2s7XG5tYXJnaW46IGF1dG8gYXV0bztcbmJvcmRlcjogbm9uZTtcbmhlaWdodDogMjAwcHg7XG53aWR0aDogMjAwcHg7XG5gXG5cbmV4cG9ydCBjb25zdCBDb2hvcnRNZW1iZXJzID0gKHByb3BzOntjb2hvcnQ6Q29ob3J0LCBpc0ZhY2lsaXRhdG9yOiBib29sZWFuLCB1c2VyPzogc3RyaW5nLCBtdXRhdGU6IChjOkNvaG9ydCk9PnZvaWR9KSA9PiB7XG4gIGxldCBbdW5lbnJvbGxTdGF0ZSwgc2V0VW5lbnJvbGxTdGF0ZV0gPSB1c2VTdGF0ZTx7cGVyc29uSUQ6c3RyaW5nLCB1c2VybmFtZTogc3RyaW5nLCBjb2hvcnRJRDpudW1iZXIsIGRpc3BsYXlfbmFtZT86c3RyaW5nLCByZW1vdmVNZW1iZXI6KCk9PnZvaWR9PigpXG4gIHJldHVybiBoKEZyYWdtZW50LCBbXG4gICAgIXVuZW5yb2xsU3RhdGVcbiAgICAgID8gbnVsbFxuICAgICAgOiBoKFVuZW5yb2xsTW9kYWwsIHtcbiAgICAgICAgICBkaXNwbGF5OiAhIXVuZW5yb2xsU3RhdGUsXG4gICAgICAgICAgb25FeGl0OiAoKSA9PiBzZXRVbmVucm9sbFN0YXRlKHVuZGVmaW5lZCksXG4gICAgICAgICAgLi4udW5lbnJvbGxTdGF0ZSxcbiAgICAgICAgfSksXG4gICAgaChCb3gsIHsgZ2FwOiAxNiB9LCBbXG4gICAgICBoKFwiaDNcIiwgXCJGYWNpbGl0YXRvcnNcIiksXG4gICAgICBwcm9wcy5pc0ZhY2lsaXRhdG9yXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGgoSW5mbywgW1xuICAgICAgICAgICAgYFF1ZXN0aW9ucyBhYm91dCB0aGlzIGAsXG4gICAgICAgICAgICBwcm9wcy5jb2hvcnQuY291cnNlcy50eXBlID09PSBcImNsdWJcIiA/IGBjbHViYCA6IGBjb3Vyc2VgLFxuICAgICAgICAgICAgYD8gYCxcbiAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaHJlZjogYGh0dHBzOi8vZm9ydW0ua3Jha2VuZWR1LmNvbS9uZXctbWVzc2FnZT9ncm91cG5hbWU9JHtwcm9wcy5jb2hvcnQuY291cnNlcy5zbHVnfS1tYCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGBfYmxhbmtgLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBgTWVzc2FnZSB0aGUgZmFjaWxpdGF0b3JgXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgYCBvbiB0aGUgZm9ydW0uYCxcbiAgICAgICAgICBdKSxcbiAgICAgIC4uLnByb3BzLmNvaG9ydC5jb2hvcnRfZmFjaWxpdGF0b3JzLm1hcCgoZikgPT5cbiAgICAgICAgaChCb3gsIFtcbiAgICAgICAgICBwcm9wcy51c2VyID09PSBmLmZhY2lsaXRhdG9yXG4gICAgICAgICAgICA/IGgoSW5mbywgW1xuICAgICAgICAgICAgICAgIGDwn5KhIFlvdSBjYW4gZWRpdCB5b3VyIGJpbyBpbiB0aGUgcHJvZmlsZSB0YWIgb24geW91ciBgLFxuICAgICAgICAgICAgICAgIGgoTGluaywgeyBocmVmOiBcIi9kYXNoYm9hcmRcIiB9LCBoKFwiYVwiLCBcImRhc2hib2FyZFwiKSksXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgaChcImgzXCIsIFtcbiAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGhyZWY6IFwiL3Blb3BsZS9baWRdXCIsXG4gICAgICAgICAgICAgICAgYXM6IGAvcGVvcGxlLyR7Zi5wZW9wbGUudXNlcm5hbWV9YCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogXCJub3RCbHVlXCIgfSxcbiAgICAgICAgICAgICAgICBmLnBlb3BsZS5kaXNwbGF5X25hbWUgfHwgZi5wZW9wbGUudXNlcm5hbWVcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGYucGVvcGxlLnByb25vdW5zXG4gICAgICAgICAgICAgID8gaChcInNwYW4udGV4dFNlY29uZGFyeVwiLCB7fSwgYCAoJHtmLnBlb3BsZS5wcm9ub3Vuc30pYClcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIF0pLFxuICAgICAgICAgIGgoVGV4dCwgeyBzb3VyY2U6IGYucGVvcGxlLmJpbyB8fCBcIlwiIH0pLFxuICAgICAgICBdKVxuICAgICAgKSxcblxuICAgICAgLy8gbWVzc2FnZSBmYWNpbGl0YXRvciAtIHNob3dzIGZvciBsb2dnZWQgaW4gYW5kIGFub24gdXNlcnM7IGhpZGRlbiBvbiB0aGluZ3MgeW91J3JlIGZhY2lsaXRhdGluZ1xuXG4gICAgICBwcm9wcy5jb2hvcnQucGVvcGxlX2luX2NvaG9ydHMubGVuZ3RoID09PSAwXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGgoQm94LCB7IGg6IHRydWUgfSwgW1xuICAgICAgICAgICAgaChcImg0XCIsIFtcbiAgICAgICAgICAgICAgXCJNZW1iZXJzIFwiLFxuICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgIFwic3Bhbi50ZXh0U2Vjb25kYXJ5XCIsXG4gICAgICAgICAgICAgICAgYCgke3Byb3BzLmNvaG9ydC5wZW9wbGVfaW5fY29ob3J0cy5sZW5ndGh9JHtcbiAgICAgICAgICAgICAgICAgIHByb3BzLmNvaG9ydC5jb3Vyc2VzLmNvaG9ydF9tYXhfc2l6ZSAhPT0gMFxuICAgICAgICAgICAgICAgICAgICA/IGAvJHtwcm9wcy5jb2hvcnQuY291cnNlcy5jb2hvcnRfbWF4X3NpemV9YFxuICAgICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgICB9KWBcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgIXByb3BzLmlzRmFjaWxpdGF0b3JcbiAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgIDogaChcbiAgICAgICAgICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBocmVmOiBgbWFpbHRvOj9iY2M9JHtwcm9wcy5jb2hvcnQucGVvcGxlX2luX2NvaG9ydHNcbiAgICAgICAgICAgICAgICAgICAgICAubWFwKChwKSA9PiBwLnBlb3BsZS5lbWFpbClcbiAgICAgICAgICAgICAgICAgICAgICAuam9pbihcIixcIil9YCxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBcImVtYWlsIGV2ZXJ5b25lXCJcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgIF0pLFxuICAgICAgLi4ucHJvcHMuY29ob3J0LnBlb3BsZV9pbl9jb2hvcnRzLm1hcCgocGVyc29uKSA9PiB7XG4gICAgICAgIHJldHVybiBoKFxuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgeyBzdHlsZTogeyBkaXNwbGF5OiBcImdyaWRcIiwgZ3JpZFRlbXBsYXRlQ29sdW1uczogXCJhdXRvIGF1dG9cIiB9IH0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgaChCb3gsIHsgaDogdHJ1ZSB9LCBbXG4gICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBocmVmOiBcIi9wZW9wbGUvW2lkXVwiLFxuICAgICAgICAgICAgICAgICAgYXM6IGAvcGVvcGxlLyR7cGVyc29uLnBlb3BsZS51c2VybmFtZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcIm5vdEJsdWVcIiB9LFxuICAgICAgICAgICAgICAgICAgICBwZXJzb24ucGVvcGxlLmRpc3BsYXlfbmFtZSB8fCBwZXJzb24ucGVvcGxlLnVzZXJuYW1lXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgcGVyc29uLnBlb3BsZS5wcm9ub3Vuc1xuICAgICAgICAgICAgICAgID8gaChcInNwYW4udGV4dFNlY29uZGFyeVwiLCB7fSwgYCAoJHtwZXJzb24ucGVvcGxlLnByb25vdW5zfSlgKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgIXByb3BzLmlzRmFjaWxpdGF0b3JcbiAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgIDogaChcImRpdlwiLCB7IHN0eWxlOiB7IGp1c3RpZnlTZWxmOiBcInJpZ2h0XCIgfSB9LCBbXG4gICAgICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IG1hcmdpblJpZ2h0OiBcIjEwcHhcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGBtYWlsdG86JHtwZXJzb24ucGVvcGxlLmVtYWlsfWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwiZW1haWxcIlxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICAgIERlc3RydWN0aXZlU21hbGxCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRVbmVucm9sbFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc29uSUQ6IHBlcnNvbi5wZXJzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvaG9ydElEOiBwcm9wcy5jb2hvcnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBwZXJzb24ucGVvcGxlLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X25hbWU6IHBlcnNvbi5wZW9wbGUuZGlzcGxheV9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVNZW1iZXI6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5tdXRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMuY29ob3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVvcGxlX2luX2NvaG9ydHM6IHByb3BzLmNvaG9ydC5wZW9wbGVfaW5fY29ob3J0cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwKSA9PiBwLnBlcnNvbiAhPT0gcGVyc29uLnBlcnNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwidW5lbnJvbGxcIlxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICBdXG4gICAgICAgICk7XG4gICAgICB9KSxcbiAgICBdKSxcbiAgXSk7XG59XG5cbmNvbnN0IFVuZW5yb2xsTW9kYWwgPSAocHJvcHM6e1xuICBwZXJzb25JRDogc3RyaW5nLFxuICB1c2VybmFtZTogc3RyaW5nLFxuICBjb2hvcnRJRDpudW1iZXIsXG4gIGRpc3BsYXlfbmFtZT86IHN0cmluZyxcbiAgcmVtb3ZlTWVtYmVyOiAoKT0+dm9pZFxuICBkaXNwbGF5OiBib29sZWFuLFxuICBvbkV4aXQ6ICgpPT52b2lkXG59KT0+e1xuICBsZXQgW3N0YXR1cywgY2FsbFVuZW5yb2xsXSA9IHVzZUFwaTxVbkVucm9sbE1zZywgVW5FbnJvbGxSZXNwb25zZT4oW10pXG4gIHJldHVybiBoKE1vZGFsLCB7ZGlzcGxheTogcHJvcHMuZGlzcGxheSwgb25FeGl0OnByb3BzLm9uRXhpdCwgaGlkZUNsb3NlQnV0dG9uOiB0cnVlfSAsW1xuICAgIHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnXG4gICAgICA/IGgoQm94LCB7c3R5bGU6e3RleHRBbGlnbjonY2VudGVyJywganVzdGlmeUl0ZW1zOidjZW50ZXInfX0sIFtcbiAgICAgICAgaCgnaDInLCBcIlVuZW5yb2xsZWQhXCIpLFxuICAgICAgICBoKCdwJywgW2BZb3UndmUgdW5lbnJvbGxlZCBgLCBoKCdiJywgcHJvcHMuZGlzcGxheV9uYW1lIHx8IHByb3BzLnVzZXJuYW1lKSwgYCBmcm9tIHRoaXMgY29ob3J0YF0pLFxuICAgICAgICBoKCdwJywgW2BUaGV5J2xsIGJlIHJlZnVuZGVkIHdpdGhpbiA1IGJ1c2luZXNzIGRheXNgXSksXG4gICAgICAgIGgoU2Vjb25kYXJ5LCB7b25DbGljazpwcm9wcy5vbkV4aXQsIHN0eWxlOnt3aWR0aDpcIjI1MHB4XCJ9fSwgXCJleGl0XCIpXG4gICAgICBdKVxuICAgICAgOiBoKEJveCwge2dhcDozMiwgc3R5bGU6e3RleHRBbGlnbjonY2VudGVyJywganVzdGlmeUl0ZW1zOidjZW50ZXInfX0sIFtcbiAgICAgICAgaChCb3gsW1xuICAgICAgICAgIGgoJ2gyJywgXCJVbi1FbnJvbGwgYW5kIElzc3VlIFJlZnVuZFwiKSxcbiAgICAgICAgICBoKCdwJywgW1xuICAgICAgICAgICAgYFlvdSBhcmUgYWJvdXQgdG8gdW4tZW5yb2xsIGAsIGgoJ2InLCBwcm9wcy5kaXNwbGF5X25hbWUgfHwgcHJvcHMudXNlcm5hbWUpLCBgIGZyb20gdGhpcyBjb2hvcnRgXG4gICAgICAgICAgXSksXG4gICAgICAgIF0pLFxuICAgICAgICBoKEJveCwge2dhcDo4fSwgW1xuICAgICAgICAgIGgoRGVzdHJ1Y3RpdmUsIHtzdGF0dXMsIG9uQ2xpY2s6YXN5bmMgKCk9PntcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAgY2FsbFVuZW5yb2xsKGAvYXBpL2NvaG9ydHMvJHtwcm9wcy5jb2hvcnRJRH0vZW5yb2xsYCwge1xuICAgICAgICAgICAgICBwZXJzb246IHByb3BzLnBlcnNvbklEXG4gICAgICAgICAgICB9LCBcIkRFTEVURVwiKVxuICAgICAgICAgICAgaWYocmVzdWx0LnN0YXR1cz09PTIwMCl7XG4gICAgICAgICAgICAgIHByb3BzLnJlbW92ZU1lbWJlcigpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgc3R5bGU6e3dpZHRoOlwiMjUwcHhcIn19LCAnVW4tZW5yb2xsJyksXG4gICAgICAgICAgaChTZWNvbmRhcnksIHtvbkNsaWNrOnByb3BzLm9uRXhpdCwgc3R5bGU6e3dpZHRoOlwiMjUwcHhcIn19LCBcIkNhbmNlbFwiKVxuICAgICAgICBdKVxuICAgICAgXSlcbiAgXSlcbn1cblxuLy8gQnV0dG9uIHRvIFB1Ymxpc2ggRHJhZnQgQ29ob3J0XG5jb25zdCBNYXJrQ29ob3J0TGl2ZSA9IChwcm9wczp7Y29ob3J0OkNvaG9ydCwgbXV0YXRlOihjOkNvaG9ydCk9PnZvaWR9KT0+IHtcbiAgbGV0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8J25vcm1hbCcgfCAnY29uZmlybScgfCAnbG9hZGluZyd8ICdjb21wbGV0ZScgPignbm9ybWFsJylcbiAgaWYoc3RhdGUgPT09ICdjb25maXJtJyB8fCBzdGF0ZSA9PT0gJ2xvYWRpbmcnKSByZXR1cm4gaChNb2RhbCwge2Rpc3BsYXk6IHRydWUsIGNsb3NlVGV4dDpcIm5ldmVybWluZFwiLCBvbkV4aXQ6ICgpPT4gc2V0U3RhdGUoJ25vcm1hbCcpfSwgW1xuICAgIGgoQm94LCB7Z2FwOiAzMn0sIFtcbiAgICAgIGgoJ2gyJywgXCJBcmUgeW91IHN1cmU/XCIpLFxuICAgICAgaChCb3gsIHtnYXA6IDE2LCBzdHlsZToge3RleHRBbGlnbjogJ3JpZ2h0J319LCBbXG4gICAgICAgIGgoUHJpbWFyeSwge29uQ2xpY2s6IGFzeW5jIGUgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgIHNldFN0YXRlKCdsb2FkaW5nJylcbiAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgY2FsbEFwaTxVcGRhdGVDb2hvcnRNc2csIFVwZGF0ZUNvaG9ydFJlc3BvbnNlPihgL2FwaS9jb2hvcnRzLyR7cHJvcHMuY29ob3J0LmlkfWAsIHtkYXRhOiB7bGl2ZTogdHJ1ZX19KVxuICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCkgcHJvcHMubXV0YXRlKHsuLi5wcm9wcy5jb2hvcnQsIGxpdmU6IHJlcy5yZXN1bHQubGl2ZX0pXG4gICAgICAgICAgc2V0U3RhdGUoJ2NvbXBsZXRlJylcbiAgICAgICAgfX0sIHN0YXRlID09PSAnbG9hZGluZycgPyBoKExvYWRlcikgOiAnUHVibGlzaCEnKSxcbiAgICAgIF0pXG4gICAgXSlcbiAgXSlcblxuICByZXR1cm4gaChQcmltYXJ5LCB7c3R5bGU6IHtqdXN0aWZ5U2VsZjpcImNlbnRlclwifSwgb25DbGljazogYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2V0U3RhdGUoJ2NvbmZpcm0nKVxuICB9fSwgJ1B1Ymxpc2ghJylcbn1cbi8vRW5kIEJ1dHRvbiB0byBwdWJsaXNoIGNvaG9ydFxuXG4vL01vZGFsIHRvIGNvbXBsZXRlIGNvaG9ydFxuY29uc3QgTWFya0NvaG9ydENvbXBsZXRlID0gKHByb3BzOntjb2hvcnQ6Q29ob3J0LCBtdXRhdGU6KGM6Q29ob3J0KT0+dm9pZH0pPT4ge1xuICBsZXQgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTwnbm9ybWFsJyB8ICdjb25maXJtJyB8ICdsb2FkaW5nJ3wgJ2NvbXBsZXRlJyA+KCdub3JtYWwnKVxuXG4gIGlmIChzdGF0ZSA9PT0gXCJjb25maXJtXCIgfHwgc3RhdGUgPT09IFwibG9hZGluZ1wiKVxuICAgIHJldHVybiBoKFxuICAgICAgTW9kYWwsXG4gICAgICB7XG4gICAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICAgIGNsb3NlVGV4dDogXCJuZXZlcm1pbmRcIixcbiAgICAgICAgb25FeGl0OiAoKSA9PiBzZXRTdGF0ZShcIm5vcm1hbFwiKSxcbiAgICAgIH0sXG4gICAgICBbXG4gICAgICAgIGgoQm94LCB7IGdhcDogMzIgfSwgW1xuICAgICAgICAgIGgoXCJoMlwiLCB7IHN0eWxlOiB7IHRleHRBbGlnbjogXCJjZW50ZXJcIiB9IH0sIFwiQXJlIHlvdSBzdXJlP1wiKSxcbiAgICAgICAgICBoKEJveCwgeyBnYXA6IDE2IH0sIFtcbiAgICAgICAgICAgIFwiQmVmb3JlIGNsb3NpbmcgdGhpcyBjb3Vyc2UsIHBsZWFzZS4uLlwiLFxuICAgICAgICAgICAgaChCb3gsIHsgZ2FwOiAxNiB9LCBbXG4gICAgICAgICAgICAgIGgoQ2hlY2tCb3gsIFtcbiAgICAgICAgICAgICAgICBoKElucHV0LCB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaChcInNwYW5cIiwgW1xuICAgICAgICAgICAgICAgICAgXCJVc2UgdGhlIFwiLFxuICAgICAgICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGBodHRwOi8va3Jha2VuZWR1LmNvbS9jb3Vyc2VzLyR7cHJvcHMuY29ob3J0LmNvdXJzZXMuc2x1Z30vJHtwcm9wcy5jb2hvcnQuY291cnNlcy5pZH0vY29ob3J0cy8ke3Byb3BzLmNvaG9ydC5pZH0vdGVtcGxhdGVzP3RlbXBsYXRlPUFydGlmYWN0YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJBcnRpZmFjdCB0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgXCIgdG8gcHVibGljbHkgc2hhcmUgYW55IGFydGlmYWN0cyBvciBmaW5hbCBwcm9qZWN0cyBwcm9kdWNlZCBpbiB0aGUgY29ob3J0XCIsXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICBoKENoZWNrQm94LCBbXG4gICAgICAgICAgICAgICAgaChJbnB1dCwge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGgoXCJzcGFuXCIsIFtcbiAgICAgICAgICAgICAgICAgIFwiVXNlIHRoZSBcIixcbiAgICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICAgIExpbmssXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBocmVmOiBgaHR0cDovL2tyYWtlbmVkdS5jb20vY291cnNlcy8ke3Byb3BzLmNvaG9ydC5jb3Vyc2VzLnNsdWd9LyR7cHJvcHMuY29ob3J0LmNvdXJzZXMuaWR9L2NvaG9ydHMvJHtwcm9wcy5jb2hvcnQuaWR9L3RlbXBsYXRlcz90ZW1wbGF0ZT1SZXRyb2AsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwiUmV0cm9zcGVjdGl2ZSB0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgXCIgdG8gcG9zdCBhIGNvaG9ydCByZXRybyBpbiB0aGUgZm9ydW0uXCIsXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICBoKFNlcGVyYXRvciksXG4gICAgICAgICAgICAgIGgoXCJzcGFuXCIsIFtcbiAgICAgICAgICAgICAgICBcIllvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGFydGlmYWN0cyBhbmQgcmV0cm9zIGluIG91ciBcIixcbiAgICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICAgTGluayxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogYGh0dHBzOi8vYXBwLmtyYWtlbmVkdS5jb20vbWFudWFsL2ZhY2lsaXRhdG9ycyNmYWNpbGl0YXRpbmctYS1jb2hvcnRgLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIFwiZmFjaWxpdGF0b3IgZ3VpZGVcIlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgXCIuXCIsXG4gICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgXSksXG4gICAgICAgICAgaChcbiAgICAgICAgICAgIFByaW1hcnksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0eWxlOiB7IGp1c3RpZnlTZWxmOiBcImNlbnRlclwiIH0sXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNldFN0YXRlKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgY2FsbEFwaTxVcGRhdGVDb2hvcnRNc2csIFVwZGF0ZUNvaG9ydFJlc3BvbnNlPihcbiAgICAgICAgICAgICAgICAgIGAvYXBpL2NvaG9ydHMvJHtwcm9wcy5jb2hvcnQuaWR9YCxcbiAgICAgICAgICAgICAgICAgIHsgZGF0YTogeyBjb21wbGV0ZWQ6IHRydWUgfSB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKVxuICAgICAgICAgICAgICAgICAgcHJvcHMubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMuY29ob3J0LFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IHJlcy5yZXN1bHQuY29tcGxldGVkLFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoXCJjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0ZSA9PT0gXCJsb2FkaW5nXCIgPyBoKExvYWRlcikgOiBcIk1hcmsgdGhpcyBjb2hvcnQgY29tcGxldGVcIlxuICAgICAgICAgICksXG4gICAgICAgIF0pLFxuICAgICAgXVxuICAgICk7XG5cbiAgcmV0dXJuIGgoRGVzdHJ1Y3RpdmUsIHtvbkNsaWNrOiBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBzZXRTdGF0ZSgnY29uZmlybScpXG4gIH19LCAnTWFyayBhcyBjb21wbGV0ZScpXG59XG4vL2VuZCBtb2RhbCB0byBjb21wbGV0ZSBjb2hvcnRzXG5cblxuLy8gRGVmaW5pbmcgQmFubmVycyAodXBjb21pbmctZmFjaWxpdGF0b3IsIHVwY29taW5nLWxlYXJuZXIsIGRyYWZ0KVxuY29uc3QgQmFubmVycyA9IChwcm9wczp7XG4gIGNvaG9ydDogQ29ob3J0XG4gIG11dGF0ZTogKGM6Q29ob3J0KT0+dm9pZFxuICBmYWNpbGl0YXRpbmc/OiBib29sZWFuLFxuICBlbnJvbGxlZD86IGJvb2xlYW4sXG59KT0+e1xuICBsZXQgaXNTdGFydGVkID0gKG5ldyBEYXRlKHByb3BzLmNvaG9ydC5zdGFydF9kYXRlKSkuZ2V0VGltZSgpIC0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKVxuICBsZXQgZm9ydW0gPSBgJHtESVNDT1VSU0VfVVJMfS9zZXNzaW9uL3Nzbz9yZXR1cm5fcGF0aD0vYy8ke3Byb3BzLmNvaG9ydC5jYXRlZ29yeV9pZH1gXG5cbiAgaWYocHJvcHMuZmFjaWxpdGF0aW5nICYmICFwcm9wcy5jb2hvcnQubGl2ZSkgcmV0dXJuIGgoVE9ET0Jhbm5lciwgcHJvcHMpXG5cbiAgaWYocHJvcHMuY29ob3J0LmNvbXBsZXRlZCAmJiAocHJvcHMuZW5yb2xsZWQgfHwgcHJvcHMuZmFjaWxpdGF0aW5nKSkgIHJldHVybiBoKFR3b0NvbHVtbkJhbm5lciwgW1xuICAgIGgoQm94LCB7Z2FwOiA4LCBjbGFzc05hbWU6IFwidGV4dFNlY29uZGFyeVwifSwgW1xuICAgICAgaCgnaDQnLCBgWW91IGNvbXBsZXRlZCB0aGlzIGNvdXJzZSBvbiAke3ByZXR0eURhdGUocHJvcHMuY29ob3J0LmNvbXBsZXRlZCB8fCAnJyl9IWApLFxuICAgICAgaCgncCcsIFtgVGhpcyBjb2hvcnQncyBgLCBoKCdhJywge2hyZWY6IGZvcnVtfSwgJ3ByaXZhdGUgZm9ydW0nKSwgYCB3aWxsIGFsd2F5cyBiZSBvcGVuISBGZWVsIGZyZWUgdG8gY29tZSBiYWNrIHdoZW5ldmVyYF0pXG4gICAgXSlcbiAgXSlcblxuICBpZihpc1N0YXJ0ZWQgPiAwICYmIChwcm9wcy5lbnJvbGxlZCB8fCBwcm9wcy5mYWNpbGl0YXRpbmcpKSB7XG4gICAgaWYocHJvcHMuZmFjaWxpdGF0aW5nKSB7XG4gICAgICByZXR1cm4gaChUd29Db2x1bW5CYW5uZXIsIFtcbiAgICAgICAgICBoKEJveCwge2dhcDogOCwgY2xhc3NOYW1lOiBcInRleHRTZWNvbmRhcnlcIn0sIFtcbiAgICAgICAgICAgIGgoJ2g0JywgYFlvdSdyZSBmYWNpbGl0YXRpbmcgaW4gJHtNYXRoLnJvdW5kKGlzU3RhcnRlZCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSl9IGRheXMgYCksXG4gICAgICAgICAgICBoKCdwJywgW1xuICAgICAgICAgICAgICBgQ2hlY2sgb3V0IHRoZSBgLFxuICAgICAgICAgICAgICBoKCdhJywge2hyZWY6IGZvcnVtfSwgJ2ZvcnVtJyksXG4gICAgICAgICAgICAgIGAgYW5kIG1lZXQgdGhlIGxlYXJuZXJzLiBZb3UgY2FuIGFsc28gcmVhZCBvdXIgYCwgaCgnYScsIHtocmVmOiBcIi9tYW51YWwvZmFjaWxpdGF0b3JzXCJ9LCAnZmFjaWxpdGF0b3IgZ3VpZGUnKSwgYCBpbiB0aGUgS3Jha2VuZWR1IE1hbnVhbGBcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgXSlcbiAgICAgIF0pXG4gICAgfVxuICAgIHJldHVybiBoKFR3b0NvbHVtbkJhbm5lciwgW1xuICAgICAgICBoKEJveCwge2dhcDogOCwgY2xhc3NOYW1lOiBcInRleHRTZWNvbmRhcnlcIn0sIFtcbiAgICAgICAgICBoKCdoNCcsIGBZb3Ugc3RhcnQgaW4gJHtNYXRoLnJvdW5kKGlzU3RhcnRlZCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSl9IGRheXMgYCksXG4gICAgICAgICAgaCgncCcsIFtcbiAgICAgICAgICAgIGBDaGVjayBvdXQgdGhlIGAsXG4gICAgICAgICAgICBoKCdhJywge2hyZWY6IGZvcnVtfSwgJ2ZvcnVtJyksXG4gICAgICAgICAgICBgIHdoaWxlIHlvdSdyZSB3YWl0aW5nLiBZb3UgY2FuIGludHJvZHVjZSB5b3Vyc2VsZiBhbmQgbGVhcm4gbW9yZSBhYm91dCB3aGF0IHlvdSdsbCBiZSBkb2luZyB3aGVuIHlvdXIgY29ob3J0IHN0YXJ0cyFgXG4gICAgICAgICAgXSlcbiAgICAgICAgXSlcbiAgICBdKVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmNvbnN0IFRPRE9CYW5uZXIgPSAocHJvcHM6e1xuICBjb2hvcnQ6Q29ob3J0LCBcbiAgbXV0YXRlOihjOkNvaG9ydCk9PnZvaWRcbn0pID0+IHtcbiAgbGV0IFtleHBhbmRlZCwgc2V0RXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgcmV0dXJuIGgoVHdvQ29sdW1uQmFubmVyLCB7IHJlZDogdHJ1ZSB9LCBbXG4gICAgaChCYW5uZXJDb250ZW50LCBbXG4gICAgICBoKEFjY2VudEltZywge1xuICAgICAgICBoZWlnaHQ6IDMyLFxuICAgICAgICB3aWR0aDogMzYsXG4gICAgICAgIHNyYzpcbiAgICAgICAgICBcImh0dHBzOi8vaHlwZXJsaW5rLWRhdGEubnljMy5jZG4uZGlnaXRhbG9jZWFuc3BhY2VzLmNvbS9pY29ucy9TZWVkbGluZy5wbmdcIixcbiAgICAgIH0pLFxuICAgICAgaChCb3gsIHsgZ2FwOiA4IH0sIFtcbiAgICAgICAgaChcImg0XCIsIFwiVGhpcyBjb2hvcnQgaXMgc3RpbGwgYSBkcmFmdFwiKSxcbiAgICAgICAgaChcbiAgICAgICAgICBcInBcIixcbiAgICAgICAgICBcIkl04oCZcyBoaWRkZW4gZnJvbSBwdWJsaWMgdmlldy4gUGVvcGxlIGNhbuKAmXQgam9pbiB1bnRpbCB5b3UgcHVibGlzaCBpdC5cIlxuICAgICAgICApLFxuICAgICAgXSksXG5cbiAgICAgIC4uLighZXhwYW5kZWRcbiAgICAgICAgPyBbXVxuICAgICAgICA6IFtcbiAgICAgICAgICAgIGgoQWNjZW50SW1nLCB7XG4gICAgICAgICAgICAgIGhlaWdodDogMzIsXG4gICAgICAgICAgICAgIHdpZHRoOiAzNixcbiAgICAgICAgICAgICAgc3JjOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9oeXBlcmxpbmstZGF0YS5ueWMzLmNkbi5kaWdpdGFsb2NlYW5zcGFjZXMuY29tL2ljb25zL0J1ZC5wbmdcIixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgaChCb3gsIHsgZ2FwOiAxNiB9LCBbXG4gICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgXCJoNFwiLFxuICAgICAgICAgICAgICAgIFwiQmVmb3JlIHlvdSBwdWJsaXNoIHRoaXMgY29ob3J0IG1ha2Ugc3VyZSB0aGF0IHlvdSAuLi4gIFwiXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGgoVG9kb0xpc3QsIHtcbiAgICAgICAgICAgICAgICBwZXJzaXN0S2V5OiBcImNvaG9ydC1wdWJsaXNoLXRvZG8tXCIgKyBwcm9wcy5jb2hvcnQuaWQsXG4gICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgIFwiQWRkIGV2ZW50cyB0byB5b3VyIGNvaG9ydCBzY2hlZHVsZSBmb3IgYW55IGxpdmUgY2FsbHMgb3IgaW1wb3J0YW50IGRhdGVzIHBlb3BsZSBuZWVkIHRvIHJlbWVtYmVyLlwiLFxuICAgICAgICAgICAgICAgICAgaChcInNwYW5cIiwgW1xuICAgICAgICAgICAgICAgICAgICBcIkZpbGwgb3V0IFwiLFxuICAgICAgICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICAgICAgIExpbmssXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogYGh0dHBzOi8vYXBwLmtyYWtlbmVkdS5jb20vZGFzaGJvYXJkP3RhYj1Qcm9maWxlYCxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIFwieW91ciBiaW9cIlxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBcIiBhbmQgdGVsbCBwZW9wbGUgbW9yZSBhYm91dCB5b3UuXCIsXG4gICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgIGgoXCJzcGFuXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgXCJGaWxsIG91dCB0aGUgXCIsXG4gICAgICAgICAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogYCR7RElTQ09VUlNFX1VSTH0vc2Vzc2lvbi9zc28/cmV0dXJuX3BhdGg9L2MvJHtwcm9wcy5jb2hvcnQuY2F0ZWdvcnlfaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIFwiR2V0dGluZyBTdGFydGVkIHRvcGljXCJcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgXCIgaW4gdGhlIGZvcnVtIHdpdGggYW55IGZpcnN0IHN0ZXBzIGxlYXJuZXJzIHNob3VsZCB0YWtlLiBUaGlzIHdpbGwgYmUgbGlua2VkIGluIHRoZSB3ZWxjb21lIGVtYWlsIHNlbnQgdG8gZXZlcnlvbmUgd2hvIGVucm9sbHMuXCIsXG4gICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pLFxuXG4gICAgICAgICAgICBoKEFjY2VudEltZywge1xuICAgICAgICAgICAgICBoZWlnaHQ6IDMyLFxuICAgICAgICAgICAgICB3aWR0aDogMzYsXG4gICAgICAgICAgICAgIHNyYzpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vaHlwZXJsaW5rLWRhdGEubnljMy5jZG4uZGlnaXRhbG9jZWFuc3BhY2VzLmNvbS9pY29ucy9GbG93ZXIucG5nXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGgoQm94LCB7IGdhcDogMTYgfSwgW1xuICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgIFwiaDRcIixcbiAgICAgICAgICAgICAgICBcIk9uY2UgeW91J3JlIHJlYWR5LCBoaXQgcHVibGlzaCBhbmQgc3RhcnQgc3ByZWFkaW5nIHRoZSB3b3JkIVwiXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGgoTWFya0NvaG9ydExpdmUsIHsgY29ob3J0OiBwcm9wcy5jb2hvcnQsIG11dGF0ZTogcHJvcHMubXV0YXRlIH0pLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgXSksXG4gICAgXSksXG5cbiAgICBoKFxuICAgICAgTGlua0J1dHRvbixcbiAgICAgIHtcbiAgICAgICAgc3R5bGU6IHsganVzdGlmeVNlbGY6IFwicmlnaHRcIiwgdGV4dERlY29yYXRpb246IFwibm9uZVwiIH0sXG4gICAgICAgIG9uQ2xpY2s6ICgpID0+IHNldEV4cGFuZGVkKCFleHBhbmRlZCksXG4gICAgICB9LFxuICAgICAgZXhwYW5kZWQgPyBcImhpZGUgY2hlY2tsaXN0XCIgOiBcInNob3cgY2hlY2tsaXN0XCJcbiAgICApLFxuICBdKTtcbn1cblxuXG5jb25zdCBCYW5uZXJDb250ZW50ID0gc3R5bGVkKCdkaXYnKSBgXG5kaXNwbGF5OiBncmlkOyBcbmdyaWQtdGVtcGxhdGUtY29sdW1uczogbWluLWNvbnRlbnQgYXV0bztcbmdyaWQtY29sdW1uLWdhcDogMTZweDtcbmdyaWQtcm93LWdhcDogMzJweDtcblxuYFxuXG4vL0VuZCBCYW5uZXJhXG5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGFzeW5jIChjdHg6YW55KT0+e1xuICBsZXQgY291cnNlSWQgPSBwYXJzZUludCgoY3R4LnBhcmFtcz8uaWQgYXMgc3RyaW5nKSB8fCBcIlwiKTtcbiAgaWYgKE51bWJlci5pc05hTihjb3Vyc2VJZCkpIHJldHVybiB7IHByb3BzOiB7IG5vdEZvdW5kOiB0cnVlIH0gfSBhcyBjb25zdDtcblxuICBsZXQgY291cnNlID0gYXdhaXQgY291cnNlRGF0YVF1ZXJ5KGNvdXJzZUlkKTtcbiAgaWYgKCFjb3Vyc2UpIHJldHVybiB7IHByb3BzOiB7IG5vdEZvdW5kOiB0cnVlIH0gfSBhcyBjb25zdDtcblxuICBsZXQgY29ob3J0SWQgPSBwYXJzZUludCgoY3R4LnBhcmFtcz8uY29ob3J0SWQgYXMgc3RyaW5nKSB8fCBcIlwiKTtcbiAgaWYgKE51bWJlci5pc05hTihjb2hvcnRJZCkpIHJldHVybiB7IHByb3BzOiB7IG5vdEZvdW5kOiB0cnVlIH0gfSBhcyBjb25zdDtcbiAgbGV0IGNvaG9ydCA9IGF3YWl0IGNvaG9ydERhdGFRdWVyeShjb2hvcnRJZCk7XG5cbiAgaWYgKCFjb2hvcnQpIHJldHVybiB7IHByb3BzOiB7IG5vdEZvdW5kOiB0cnVlIH0gfSBhcyBjb25zdDtcblxuICBsZXQgW2FydGlmYWN0cywgY3VycmljdWx1bV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0VGFnZ2VkUG9zdChjb2hvcnQuY2F0ZWdvcnlfaWQsIFwiYXJ0aWZhY3RcIiksXG4gICAgZ2V0VGFnZ2VkUG9zdChjb2hvcnQuY291cnNlcy5jYXRlZ29yeV9pZCwgXCJjdXJyaWN1bHVtXCIpLFxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBub3RGb3VuZDogZmFsc2UsXG4gICAgICBjb3Vyc2VJZCxcbiAgICAgIGNvaG9ydElkLFxuICAgICAgY29ob3J0LFxuICAgICAgY291cnNlLFxuICAgICAgY3VycmljdWx1bSxcbiAgICAgIGFydGlmYWN0cyxcbiAgICB9LFxuICAgIHJldmFsaWRhdGU6IDEsXG4gIH0gYXMgY29uc3Q7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9ICgpID0+IHtcbiAgcmV0dXJuIHtwYXRoczpbXSwgZmFsbGJhY2s6IHRydWV9XG59XG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n}); //End Bannera\n\n\nexport const getStaticProps = async ctx => {\n  var _ctx$params, _ctx$params2;\n\n  let courseId = parseInt(((_ctx$params = ctx.params) === null || _ctx$params === void 0 ? void 0 : _ctx$params.id) || \"\");\n  if (Number.isNaN(courseId)) return {\n    props: {\n      notFound: true\n    }\n  };\n  let course = await courseDataQuery(courseId);\n  if (!course) return {\n    props: {\n      notFound: true\n    }\n  };\n  let cohortId = parseInt(((_ctx$params2 = ctx.params) === null || _ctx$params2 === void 0 ? void 0 : _ctx$params2.cohortId) || \"\");\n  if (Number.isNaN(cohortId)) return {\n    props: {\n      notFound: true\n    }\n  };\n  let cohort = await cohortDataQuery(cohortId);\n  if (!cohort) return {\n    props: {\n      notFound: true\n    }\n  };\n  let [artifacts, curriculum] = await Promise.all([getTaggedPost(cohort.category_id, \"artifact\"), getTaggedPost(cohort.courses.category_id, \"curriculum\")]);\n  return {\n    props: {\n      notFound: false,\n      courseId,\n      cohortId,\n      cohort,\n      course,\n      curriculum,\n      artifacts\n    },\n    revalidate: 1\n  };\n};\nexport const getStaticPaths = () => {\n  return {\n    paths: [],\n    fallback: true\n  };\n};","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/pages/courses/[slug]/[id]/cohorts/[cohortId]/index.ts"],"names":["h","useRouter","Link","useState","useEffect","Fragment","CourseDetails","EnrollButton","SubEnrollButton","TwoColumn","Box","LabelBox","Seperator","Sidebar","WhiteContainer","VerticalTabs","StickyWrapper","Primary","Destructive","DestructiveSmallButton","Secondary","LinkButton","Loader","PageLoader","CheckBox","Info","Input","Modal","TwoColumnBanner","Text","WelcomeModal","cohortName","prettyDate","getTaggedPost","DISCOURSE_URL","callApi","useApi","useCohortData","useUserCohorts","useUserData","useCourseData","useProfileData","ErrorPage","cohortDataQuery","courseDataQuery","Head","CohortEvents","CreateEvent","AccentImg","TodoList","WrappedCohortPage","props","notFound","CohortPage","router","data","user","userCohorts","profile","username","undefined","cohort","mutate","cohortId","course","courseId","selectedTab","query","tab","invited","invited_courses","find","id","inCohort","people_in_cohorts","p","person","isFacilitator","cohort_facilitators","f","people","isStarted","Date","start_date","Tabs","Artifacts","artifacts","text","gap","source","Schedule","cohort_events","length","map","c","style","maxWidth","textAlign","margin","EmptyImg","src","facilitating","events","filter","everyone","people_in_events","showCal","type","href","curriculum","Members","CohortMembers","tabKeys","Object","keys","t","children","property","content","name","key","card_image","split","display","welcome","user_calendar","calendar_id","Banners","enrolled","gridColumn","imageRendering","courses","slug","description","fontSize","max_size","cohort_max_size","learners","invite_only","selected","tabs","onChange","route","URL","window","location","searchParams","set","replace","shallow","completed","pathname","category_id","as","MarkCohortComplete","unenrollState","setUnenrollState","UnenrollModal","onExit","target","facilitator","className","display_name","pronouns","bio","email","join","gridTemplateColumns","justifySelf","marginRight","onClick","personID","cohortID","removeMember","status","callUnenroll","hideCloseButton","justifyItems","width","result","MarkCohortLive","state","setState","closeText","e","preventDefault","res","live","getTime","forum","TODOBanner","Math","round","expanded","setExpanded","red","BannerContent","height","persistKey","items","textDecoration","getStaticProps","ctx","parseInt","params","Number","isNaN","Promise","all","revalidate","getStaticPaths","paths","fallback"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\n\nimport styled from '@emotion/styled'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport {useState, useEffect, Fragment} from 'react'\nimport { InferGetStaticPropsType } from 'next'\n\nimport CourseDetails from 'components/Course/Enroll'\nimport { EnrollButton } from 'components/Course/EnrollButton';\nimport { SubEnrollButton } from 'components/Course/SubEnrollButton';\n\nimport { TwoColumn, Box, LabelBox, Seperator, Sidebar, WhiteContainer} from 'components/Layout'\nimport { VerticalTabs, StickyWrapper } from 'components/Tabs'\nimport { Primary, Destructive, DestructiveSmallButton, Secondary, LinkButton } from 'components/Button'\nimport Loader, { PageLoader } from 'components/Loader'\nimport { CheckBox, Info, Input } from 'components/Form'\nimport { Modal } from 'components/Modal'\nimport {TwoColumnBanner} from 'components/Banner'\nimport Text from 'components/Text'\nimport {WelcomeModal} from 'components/pages/cohorts/WelcomeModal'\n\nimport { cohortName, prettyDate} from 'src/utils'\nimport {  getTaggedPost } from 'src/discourse'\nimport {DISCOURSE_URL} from 'src/constants'\nimport { callApi, useApi } from 'src/apiHelpers'\nimport { useCohortData, useUserCohorts, useUserData, useCourseData, Cohort, useProfileData } from 'src/data'\nimport ErrorPage from 'pages/404'\nimport { cohortDataQuery, UpdateCohortMsg, UpdateCohortResponse } from 'pages/api/cohorts/[cohortId]'\nimport { courseDataQuery } from 'pages/api/courses/[id]'\nimport Head from 'next/head'\nimport { CohortEvents } from 'components/pages/cohorts/Events'\nimport { CreateEvent } from 'components/pages/cohorts/CreateEvent'\nimport { AccentImg } from 'components/Images'\nimport { TodoList } from 'components/TodoList'\nimport { UnEnrollMsg, UnEnrollResponse } from 'pages/api/cohorts/[cohortId]/enroll'\n\ntype Props = InferGetStaticPropsType<typeof getStaticProps>\nconst WrappedCohortPage = (props: Props)=>  props.notFound ? h(ErrorPage) : h(CohortPage, props)\nexport default WrappedCohortPage\nconst CohortPage = (props: Extract<Props, {notFound:false}>) => {\n  let router = useRouter()\n  let {data: user} = useUserData()\n  let {data: userCohorts} = useUserCohorts()\n  let {data:profile} = useProfileData(user ? user.username : undefined)\n  let {data: cohort, mutate} = useCohortData(props.cohortId, props.cohort)\n  let {data: course} = useCourseData(props.courseId, props.course)\n  let selectedTab = router.query.tab as string | undefined\n\n  useEffect(()=>{\n    mutate(undefined, true)\n  }, [!!cohort])\n\n\n  if(!cohort || !course) return h(PageLoader)\n\n  let invited = !!userCohorts?.invited_courses.find(course=>course.id === props.course.id )\n  let inCohort = cohort.people_in_cohorts.find(p => p.person === (user ? user.id : undefined))\n  let isFacilitator = !!user && !!cohort.cohort_facilitators.find(f=>user &&f.people.username === user.username)\n  let isStarted = cohort && new Date() > new Date(cohort.start_date)\n\n  let Tabs = {\n    Artifacts: props.artifacts.text === '' ? null : h(Box, {gap: 64}, [\n      h(Box, {gap: 32},[\n        h(Box, [\n          h(Text, {source: props.artifacts?.text})\n        ]),\n      ])\n    ]),\n    Schedule: cohort.cohort_events.length === 0 && !isFacilitator ? null : h(Box, {gap: 32}, [\n      isFacilitator || inCohort ? h(CreateEvent, {\n        cohort: cohort.id,\n        people: [...cohort.people_in_cohorts.map(p=>p.people.username), ...cohort.cohort_facilitators.map(f=>f.people.username)],\n        mutate: (c)=>{\n          if(!cohort) return\n          mutate({...cohort, cohort_events: [...cohort.cohort_events, c]})\n        }}) : null,\n      h(Box, [\n        cohort.cohort_events.length === 0\n          ? h(WhiteContainer, [\n            h(Box, {gap:16, style: {maxWidth: 400, textAlign: 'center', margin: 'auto'}}, [\n              h( EmptyImg, {src: '/img/empty.png'}),\n              h('small.textSecondary', \"Events are great for scheduling live calls or other important cohort dates. Learners can add these to their calendars. Looks like you haven't created any events yet. Hit the button above to schedule one!!\" ),\n            ])])\n          : h(CohortEvents, {\n            facilitating: isFacilitator,\n            inCohort:!!inCohort,\n            people: cohort.people_in_cohorts.map(p=>p.people.username),\n            cohort: cohort.id,\n            events: cohort.cohort_events.filter(c=>{\n              if(!user || !cohort) return c.everyone\n              if(isFacilitator) return true\n              return c.everyone || c.events.people_in_events.find(p=>user&&p.people.username===user.username)\n            }),\n            mutate: (events)=>{\n              if(!cohort) return\n              mutate({\n                ...cohort, cohort_events: events})\n            },\n            showCal: (inCohort || isFacilitator) && cohort.cohort_events.length > 0\n          })\n      ])\n    ]),\n    [course.type === 'club' ? \"Details\" : \"Curriculum\"]: h(Box, [\n      !isFacilitator ? null : h(Info, [\n        `ðŸ’¡ You can make changes to this page by editing `,\n        h('a', {href: `${DISCOURSE_URL}/session/sso?return_path=/t/${props.curriculum?.id}`}, `this topic`),\n        ` in the forum`\n      ]),\n      h(Text, {source:props.curriculum?.text})\n    ]),\n    Members: h(CohortMembers, {cohort: cohort, isFacilitator, mutate, user: user ? user.id : undefined})\n      } as {[k:string]:React.ReactElement}\n  let tabKeys = Object.keys(Tabs).filter(t=>!!Tabs[t])\n\n  return h(\"div\", {}, [\n    h(Head, {\n      children: [\n        h(\"meta\", {\n          property: \"og:title\",\n          content: course.name,\n          key: \"og:title\",\n        }),\n        h(\"meta\", {\n          property: \"og:description\",\n          content: \"Starting \" + prettyDate(cohort.start_date),\n          key: \"og:description\",\n        }),\n        h(\"meta\", {\n          property: \"og:image\",\n          content: course.card_image.split(\",\")[0],\n          key: \"og:image\",\n        }),\n        h(\"meta\", {\n          property: \"twitter:card\",\n          content: \"summary\",\n          key: \"twitter:card\",\n        }),\n      ],\n    }),\n    h(WelcomeModal, {\n      display: router.query.welcome !== undefined,\n      cohort,\n      user_calendar: profile ? profile.calendar_id : \"\",\n    }),\n    h(Banners, {\n      cohort,\n      mutate,\n      enrolled: !!inCohort,\n      facilitating: isFacilitator,\n    }),\n    h(Box, { gap: 32 }, [\n      h(TwoColumn, [\n        h(Box, { gap: 8, style: { gridColumn: 1 } }, [\n          course.type === \"course\"\n            ? null\n            : h(\n                Box,\n                { h: true },\n                props.course.card_image\n                  .split(\",\")\n                  .map((src) =>\n                    h(\"img\", { src, style: { imageRendering: \"pixelated\" } })\n                  )\n              ),\n          h(\"h1\", cohortName(cohort.name)),\n          h(\n            Link,\n            {\n              href: `/courses/${cohort.courses.slug}/${cohort.courses.id}`,\n            },\n            h(\"a.notBlue\", {}, h(\"h3.textSecondary\", cohort?.courses.name))\n          ),\n          h(\"p.big\", cohort.description),\n        ]),\n        Tabs[selectedTab ? selectedTab : tabKeys[0]],\n        h(Sidebar, {}, [\n          h(StickyWrapper, [\n            h(Box, { gap: 16 }, [\n              inCohort || isStarted || isFacilitator\n                ? null\n                : h(CourseDetails, { course }),\n              inCohort || isStarted || isFacilitator\n                ? null\n                : \n            h(Box, [\n               h(LabelBox,{style:{fontSize: '2rem'}} ,\"Join this cohort\"),\n                h(SubEnrollButton, {\n                      id: cohort.id,\n                      course: course.id,\n                      max_size: course.cohort_max_size,\n                      learners: cohort.people_in_cohorts.length,\n                      invited: !course.invite_only || invited,\n                    },  \"via Paystack\"),\n                h(EnrollButton,\n                    {\n                      id: cohort.id,\n                      course: course.id,\n                      max_size: course.cohort_max_size,\n                      learners: cohort.people_in_cohorts.length,\n                      invited: !course.invite_only || invited,\n                    },\n                    \"via Stripe\"\n                  ),\n                   ]),\n              h(Box, [\n                h(\"h3\", \"Information\"),\n                h(VerticalTabs, {\n                  selected:\n                    selectedTab && Tabs[selectedTab] ? selectedTab : tabKeys[0],\n                  tabs: tabKeys,\n                  onChange: (tab) => {\n                    let route = new URL(window.location.href);\n                    route.searchParams.set(\"tab\", tab);\n                    router.replace(route, undefined, { shallow: true });\n                  },\n                }),\n              ]),\n              inCohort || isFacilitator || cohort.completed\n                ? h(Box, {}, [\n                    !isFacilitator\n                      ? null\n                      : h(\n                          Link,\n                          { href: window.location.pathname + \"/settings\" },\n                          h(\"a\", {}, h(Primary, \"Cohort Settings\"))\n                        ),\n                    !inCohort && !isFacilitator\n                      ? null\n                      : h(Box, [\n                          h(\n                            \"a\",\n                            {\n                              href: `${DISCOURSE_URL}/session/sso?return_path=/c/${cohort.category_id}`,\n                            },\n                            h(Secondary, \"The Forum\")\n                          ),\n                          !isFacilitator\n                            ? null\n                            : h(\n                                Link,\n                                {\n                                  href:\n                                    \"/courses/[slug]/[id]/cohorts/[cohortId]/templates\",\n                                  as: `/courses/${cohort.courses.slug}/${cohort.courses.id}/cohorts/${cohort.id}/templates`,\n                                },\n                                h(Secondary, \"Forum Post from Template\")\n                              ),\n                          !cohort.completed && isFacilitator && isStarted\n                            ? h(MarkCohortComplete, { cohort, mutate })\n                            : null,\n                        ]),\n                  ])\n                : null,\n            ]),\n          ]),\n        ]),\n      ]),\n    ]),\n  ]);\n}\n\n\nexport let EmptyImg = styled ('img') `\nimage-rendering: pixelated;\nimage-rendering: -moz-crisp-edges;\nimage-rendering: crisp-edges;\ndisplay: block;\nmargin: auto auto;\nborder: none;\nheight: 200px;\nwidth: 200px;\n`\n\nexport const CohortMembers = (props:{cohort:Cohort, isFacilitator: boolean, user?: string, mutate: (c:Cohort)=>void}) => {\n  let [unenrollState, setUnenrollState] = useState<{personID:string, username: string, cohortID:number, display_name?:string, removeMember:()=>void}>()\n  return h(Fragment, [\n    !unenrollState\n      ? null\n      : h(UnenrollModal, {\n          display: !!unenrollState,\n          onExit: () => setUnenrollState(undefined),\n          ...unenrollState,\n        }),\n    h(Box, { gap: 16 }, [\n      h(\"h3\", \"Facilitators\"),\n      props.isFacilitator\n        ? null\n        : h(Info, [\n            `Questions about this `,\n            props.cohort.courses.type === \"club\" ? `club` : `course`,\n            `? `,\n            h(\n              \"a\",\n              {\n                href: `https://forum.krakenedu.com/new-message?groupname=${props.cohort.courses.slug}-m`,\n                target: `_blank`,\n              },\n              `Message the facilitator`\n            ),\n            ` on the forum.`,\n          ]),\n      ...props.cohort.cohort_facilitators.map((f) =>\n        h(Box, [\n          props.user === f.facilitator\n            ? h(Info, [\n                `ðŸ’¡ You can edit your bio in the profile tab on your `,\n                h(Link, { href: \"/dashboard\" }, h(\"a\", \"dashboard\")),\n              ])\n            : null,\n          h(\"h3\", [\n            ``,\n            h(\n              Link,\n              {\n                href: \"/people/[id]\",\n                as: `/people/${f.people.username}`,\n              },\n              h(\n                \"a\",\n                { className: \"notBlue\" },\n                f.people.display_name || f.people.username\n              )\n            ),\n            f.people.pronouns\n              ? h(\"span.textSecondary\", {}, ` (${f.people.pronouns})`)\n              : null,\n          ]),\n          h(Text, { source: f.people.bio || \"\" }),\n        ])\n      ),\n\n      // message facilitator - shows for logged in and anon users; hidden on things you're facilitating\n\n      props.cohort.people_in_cohorts.length === 0\n        ? null\n        : h(Box, { h: true }, [\n            h(\"h4\", [\n              \"Members \",\n              h(\n                \"span.textSecondary\",\n                `(${props.cohort.people_in_cohorts.length}${\n                  props.cohort.courses.cohort_max_size !== 0\n                    ? `/${props.cohort.courses.cohort_max_size}`\n                    : \"\"\n                })`\n              ),\n            ]),\n            !props.isFacilitator\n              ? null\n              : h(\n                  \"a\",\n                  {\n                    href: `mailto:?bcc=${props.cohort.people_in_cohorts\n                      .map((p) => p.people.email)\n                      .join(\",\")}`,\n                  },\n                  \"email everyone\"\n                ),\n          ]),\n      ...props.cohort.people_in_cohorts.map((person) => {\n        return h(\n          \"div\",\n          { style: { display: \"grid\", gridTemplateColumns: \"auto auto\" } },\n          [\n            h(Box, { h: true }, [\n              h(\n                Link,\n                {\n                  href: \"/people/[id]\",\n                  as: `/people/${person.people.username}`,\n                },\n                [\n                  h(\n                    \"a\",\n                    { className: \"notBlue\" },\n                    person.people.display_name || person.people.username\n                  ),\n                ]\n              ),\n              person.people.pronouns\n                ? h(\"span.textSecondary\", {}, ` (${person.people.pronouns})`)\n                : null,\n            ]),\n            !props.isFacilitator\n              ? null\n              : h(\"div\", { style: { justifySelf: \"right\" } }, [\n                  h(\n                    \"a\",\n                    {\n                      style: { marginRight: \"10px\" },\n                      href: `mailto:${person.people.email}`,\n                    },\n                    \"email\"\n                  ),\n                  h(\n                    DestructiveSmallButton,\n                    {\n                      onClick: () => {\n                        setUnenrollState({\n                          personID: person.person,\n                          cohortID: props.cohort.id,\n                          username: person.people.username,\n                          display_name: person.people.display_name,\n                          removeMember: () => {\n                            props.mutate({\n                              ...props.cohort,\n                              people_in_cohorts: props.cohort.people_in_cohorts.filter(\n                                (p) => p.person !== person.person\n                              ),\n                            });\n                          },\n                        });\n                      },\n                    },\n                    \"unenroll\"\n                  ),\n                ]),\n          ]\n        );\n      }),\n    ]),\n  ]);\n}\n\nconst UnenrollModal = (props:{\n  personID: string,\n  username: string,\n  cohortID:number,\n  display_name?: string,\n  removeMember: ()=>void\n  display: boolean,\n  onExit: ()=>void\n})=>{\n  let [status, callUnenroll] = useApi<UnEnrollMsg, UnEnrollResponse>([])\n  return h(Modal, {display: props.display, onExit:props.onExit, hideCloseButton: true} ,[\n    status === 'success'\n      ? h(Box, {style:{textAlign:'center', justifyItems:'center'}}, [\n        h('h2', \"Unenrolled!\"),\n        h('p', [`You've unenrolled `, h('b', props.display_name || props.username), ` from this cohort`]),\n        h('p', [`They'll be refunded within 5 business days`]),\n        h(Secondary, {onClick:props.onExit, style:{width:\"250px\"}}, \"exit\")\n      ])\n      : h(Box, {gap:32, style:{textAlign:'center', justifyItems:'center'}}, [\n        h(Box,[\n          h('h2', \"Un-Enroll and Issue Refund\"),\n          h('p', [\n            `You are about to un-enroll `, h('b', props.display_name || props.username), ` from this cohort`\n          ]),\n        ]),\n        h(Box, {gap:8}, [\n          h(Destructive, {status, onClick:async ()=>{\n            let result = await  callUnenroll(`/api/cohorts/${props.cohortID}/enroll`, {\n              person: props.personID\n            }, \"DELETE\")\n            if(result.status===200){\n              props.removeMember()\n            }\n          }, style:{width:\"250px\"}}, 'Un-enroll'),\n          h(Secondary, {onClick:props.onExit, style:{width:\"250px\"}}, \"Cancel\")\n        ])\n      ])\n  ])\n}\n\n// Button to Publish Draft Cohort\nconst MarkCohortLive = (props:{cohort:Cohort, mutate:(c:Cohort)=>void})=> {\n  let [state, setState] = useState<'normal' | 'confirm' | 'loading'| 'complete' >('normal')\n  if(state === 'confirm' || state === 'loading') return h(Modal, {display: true, closeText:\"nevermind\", onExit: ()=> setState('normal')}, [\n    h(Box, {gap: 32}, [\n      h('h2', \"Are you sure?\"),\n      h(Box, {gap: 16, style: {textAlign: 'right'}}, [\n        h(Primary, {onClick: async e => {\n          e.preventDefault()\n          setState('loading')\n          let res = await callApi<UpdateCohortMsg, UpdateCohortResponse>(`/api/cohorts/${props.cohort.id}`, {data: {live: true}})\n          if(res.status === 200) props.mutate({...props.cohort, live: res.result.live})\n          setState('complete')\n        }}, state === 'loading' ? h(Loader) : 'Publish!'),\n      ])\n    ])\n  ])\n\n  return h(Primary, {style: {justifySelf:\"center\"}, onClick: async e => {\n    e.preventDefault()\n    setState('confirm')\n  }}, 'Publish!')\n}\n//End Button to publish cohort\n\n//Modal to complete cohort\nconst MarkCohortComplete = (props:{cohort:Cohort, mutate:(c:Cohort)=>void})=> {\n  let [state, setState] = useState<'normal' | 'confirm' | 'loading'| 'complete' >('normal')\n\n  if (state === \"confirm\" || state === \"loading\")\n    return h(\n      Modal,\n      {\n        display: true,\n        closeText: \"nevermind\",\n        onExit: () => setState(\"normal\"),\n      },\n      [\n        h(Box, { gap: 32 }, [\n          h(\"h2\", { style: { textAlign: \"center\" } }, \"Are you sure?\"),\n          h(Box, { gap: 16 }, [\n            \"Before closing this course, please...\",\n            h(Box, { gap: 16 }, [\n              h(CheckBox, [\n                h(Input, {\n                  type: \"checkbox\",\n                }),\n                h(\"span\", [\n                  \"Use the \",\n                  h(\n                    Link,\n                    {\n                      href: `http://krakenedu.com/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}/templates?template=Artifact`,\n                    },\n                    \"Artifact template\"\n                  ),\n                  \" to publicly share any artifacts or final projects produced in the cohort\",\n                ]),\n              ]),\n              h(CheckBox, [\n                h(Input, {\n                  type: \"checkbox\",\n                }),\n                h(\"span\", [\n                  \"Use the \",\n                  h(\n                    Link,\n                    {\n                      href: `http://krakenedu.com/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}/templates?template=Retro`,\n                    },\n                    \"Retrospective template\"\n                  ),\n                  \" to post a cohort retro in the forum.\",\n                ]),\n              ]),\n              h(Seperator),\n              h(\"span\", [\n                \"You can find more information about artifacts and retros in our \",\n                h(\n                  Link,\n                  {\n                    href: `https://app.krakenedu.com/manual/facilitators#facilitating-a-cohort`,\n                  },\n                  \"facilitator guide\"\n                ),\n                \".\",\n              ]),\n            ]),\n          ]),\n          h(\n            Primary,\n            {\n              style: { justifySelf: \"center\" },\n              onClick: async (e) => {\n                e.preventDefault();\n                setState(\"loading\");\n                let res = await callApi<UpdateCohortMsg, UpdateCohortResponse>(\n                  `/api/cohorts/${props.cohort.id}`,\n                  { data: { completed: true } }\n                );\n                if (res.status === 200)\n                  props.mutate({\n                    ...props.cohort,\n                    completed: res.result.completed,\n                  });\n                setState(\"complete\");\n              },\n            },\n            state === \"loading\" ? h(Loader) : \"Mark this cohort complete\"\n          ),\n        ]),\n      ]\n    );\n\n  return h(Destructive, {onClick: async e => {\n    e.preventDefault()\n    setState('confirm')\n  }}, 'Mark as complete')\n}\n//end modal to complete cohorts\n\n\n// Defining Banners (upcoming-facilitator, upcoming-learner, draft)\nconst Banners = (props:{\n  cohort: Cohort\n  mutate: (c:Cohort)=>void\n  facilitating?: boolean,\n  enrolled?: boolean,\n})=>{\n  let isStarted = (new Date(props.cohort.start_date)).getTime() - (new Date()).getTime()\n  let forum = `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`\n\n  if(props.facilitating && !props.cohort.live) return h(TODOBanner, props)\n\n  if(props.cohort.completed && (props.enrolled || props.facilitating))  return h(TwoColumnBanner, [\n    h(Box, {gap: 8, className: \"textSecondary\"}, [\n      h('h4', `You completed this course on ${prettyDate(props.cohort.completed || '')}!`),\n      h('p', [`This cohort's `, h('a', {href: forum}, 'private forum'), ` will always be open! Feel free to come back whenever`])\n    ])\n  ])\n\n  if(isStarted > 0 && (props.enrolled || props.facilitating)) {\n    if(props.facilitating) {\n      return h(TwoColumnBanner, [\n          h(Box, {gap: 8, className: \"textSecondary\"}, [\n            h('h4', `You're facilitating in ${Math.round(isStarted / (1000 * 60 * 60 * 24))} days `),\n            h('p', [\n              `Check out the `,\n              h('a', {href: forum}, 'forum'),\n              ` and meet the learners. You can also read our `, h('a', {href: \"/manual/facilitators\"}, 'facilitator guide'), ` in the Krakenedu Manual`\n            ])\n          ])\n      ])\n    }\n    return h(TwoColumnBanner, [\n        h(Box, {gap: 8, className: \"textSecondary\"}, [\n          h('h4', `You start in ${Math.round(isStarted / (1000 * 60 * 60 * 24))} days `),\n          h('p', [\n            `Check out the `,\n            h('a', {href: forum}, 'forum'),\n            ` while you're waiting. You can introduce yourself and learn more about what you'll be doing when your cohort starts!`\n          ])\n        ])\n    ])\n  }\n  return null\n}\n\nconst TODOBanner = (props:{\n  cohort:Cohort, \n  mutate:(c:Cohort)=>void\n}) => {\n  let [expanded, setExpanded] = useState(false)\n\n  return h(TwoColumnBanner, { red: true }, [\n    h(BannerContent, [\n      h(AccentImg, {\n        height: 32,\n        width: 36,\n        src:\n          \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Seedling.png\",\n      }),\n      h(Box, { gap: 8 }, [\n        h(\"h4\", \"This cohort is still a draft\"),\n        h(\n          \"p\",\n          \"Itâ€™s hidden from public view. People canâ€™t join until you publish it.\"\n        ),\n      ]),\n\n      ...(!expanded\n        ? []\n        : [\n            h(AccentImg, {\n              height: 32,\n              width: 36,\n              src:\n                \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Bud.png\",\n            }),\n            h(Box, { gap: 16 }, [\n              h(\n                \"h4\",\n                \"Before you publish this cohort make sure that you ...  \"\n              ),\n              h(TodoList, {\n                persistKey: \"cohort-publish-todo-\" + props.cohort.id,\n                items: [\n                  \"Add events to your cohort schedule for any live calls or important dates people need to remember.\",\n                  h(\"span\", [\n                    \"Fill out \",\n                    h(\n                      Link,\n                      {\n                        href: `https://app.krakenedu.com/dashboard?tab=Profile`,\n                      },\n                      \"your bio\"\n                    ),\n                    \" and tell people more about you.\",\n                  ]),\n                  h(\"span\", [\n                    \"Fill out the \",\n                    h(\n                      \"a\",\n                      {\n                        href: `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`,\n                      },\n                      \"Getting Started topic\"\n                    ),\n                    \" in the forum with any first steps learners should take. This will be linked in the welcome email sent to everyone who enrolls.\",\n                  ]),\n                ],\n              }),\n            ]),\n\n            h(AccentImg, {\n              height: 32,\n              width: 36,\n              src:\n                \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Flower.png\",\n            }),\n            h(Box, { gap: 16 }, [\n              h(\n                \"h4\",\n                \"Once you're ready, hit publish and start spreading the word!\"\n              ),\n              h(MarkCohortLive, { cohort: props.cohort, mutate: props.mutate }),\n            ]),\n          ]),\n    ]),\n\n    h(\n      LinkButton,\n      {\n        style: { justifySelf: \"right\", textDecoration: \"none\" },\n        onClick: () => setExpanded(!expanded),\n      },\n      expanded ? \"hide checklist\" : \"show checklist\"\n    ),\n  ]);\n}\n\n\nconst BannerContent = styled('div') `\ndisplay: grid; \ngrid-template-columns: min-content auto;\ngrid-column-gap: 16px;\ngrid-row-gap: 32px;\n\n`\n\n//End Bannera\n\nexport const getStaticProps = async (ctx:any)=>{\n  let courseId = parseInt((ctx.params?.id as string) || \"\");\n  if (Number.isNaN(courseId)) return { props: { notFound: true } } as const;\n\n  let course = await courseDataQuery(courseId);\n  if (!course) return { props: { notFound: true } } as const;\n\n  let cohortId = parseInt((ctx.params?.cohortId as string) || \"\");\n  if (Number.isNaN(cohortId)) return { props: { notFound: true } } as const;\n  let cohort = await cohortDataQuery(cohortId);\n\n  if (!cohort) return { props: { notFound: true } } as const;\n\n  let [artifacts, curriculum] = await Promise.all([\n    getTaggedPost(cohort.category_id, \"artifact\"),\n    getTaggedPost(cohort.courses.category_id, \"curriculum\"),\n  ]);\n\n  return {\n    props: {\n      notFound: false,\n      courseId,\n      cohortId,\n      cohort,\n      course,\n      curriculum,\n      artifacts,\n    },\n    revalidate: 1,\n  } as const;\n}\n\nexport const getStaticPaths = () => {\n  return {paths:[], fallback: true}\n}\n"]},"metadata":{},"sourceType":"module"}