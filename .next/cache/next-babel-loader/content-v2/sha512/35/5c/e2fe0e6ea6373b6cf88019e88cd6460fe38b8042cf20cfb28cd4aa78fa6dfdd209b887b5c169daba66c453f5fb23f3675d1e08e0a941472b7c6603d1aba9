{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _styled from \"@emotion/styled-base\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport h from 'react-hyperscript';\nimport { useState } from 'react';\nimport { Box, LabelBox, FormBox } from 'components/Layout';\nimport { Input, Textarea, Info, Select } from 'components/Form';\nimport { Primary, Destructive } from 'components/Button';\nimport { colors } from 'components/Tokens';\nimport { callApi, useApi } from 'src/apiHelpers';\nimport { useFormData } from 'src/hooks';\nvar COPY = {\n  usernameField: \"Username\",\n  emailField: \"Email\",\n  pronounsField: \"Your Pronouns\",\n  displayNameField: \"Nickname\",\n  displayNameDescription: \"This is displayed when you post on the forum or enroll in a course.\",\n  linkField: \"Link\",\n  linkDescription: \"Where you're hanging on the internet (your website, Twitter, etc.)\",\n  bioField: \"Bio\"\n};\n\nvar Settings = function Settings(props) {\n  _s();\n\n  var _useFormData = useFormData(props.profile),\n      state = _useFormData.state,\n      changed = _useFormData.changed,\n      form = _useFormData.form,\n      reset = _useFormData.reset;\n\n  var _useApi = useApi([]),\n      _useApi2 = _slicedToArray(_useApi, 2),\n      status = _useApi2[0],\n      callUpdatePerson = _useApi2[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (changed) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.next = 5;\n              return callUpdatePerson(\"/api/people/\".concat(props.user.username), {\n                profile: state\n              });\n\n            case 5:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                props.mutate(state);\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return h(Box, {\n    gap: 64\n  }, [h(FormBox, {\n    onSubmit: onSubmit,\n    width: 400,\n    gap: 32\n  }, [h(Box, {\n    gap: 8\n  }, [h('h4', 'Username'), h(Info, props.user.username)]), h(Box, {\n    gap: 8\n  }, [h('h4', 'Email'), h(Info, props.user.email)]), h(LabelBox, {\n    gap: 8\n  }, [h('div', [h('h4', COPY.displayNameField), h(Description, COPY.displayNameDescription)]), h(Input, form.display_name)]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', COPY.pronounsField), h(Input, form.pronouns)]), h(LabelBox, {\n    gap: 8\n  }, [h(Box, {\n    gap: 4\n  }, [h('h4', COPY.linkField), h(Description, COPY.linkDescription)]), h(Input, form.link)]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', COPY.bioField), h(Textarea, form.bio)]), h(SubmitButtons, [h(Destructive, {\n    disabled: !changed,\n    onClick: function onClick() {\n      if (props.profile) reset();\n    }\n  }, \"Discard Changes\"), h(Primary, {\n    status: status,\n    type: 'submit',\n    disabled: !changed\n  }, 'Save Changes')])]), !props.facilitator ? null : h(StripeSettings, {\n    stripe_connected_accounts: props.profile.stripe_connected_accounts\n  })]);\n};\n\n_s(Settings, \"cv3e/hBO1hF4pD/Q+f+1izfUIqw=\", false, function () {\n  return [useFormData, useApi];\n});\n\n_c = Settings;\n\nvar StripeSettings = function StripeSettings(props) {\n  _s2();\n\n  var _props$stripe_connect;\n\n  var _useState = useState('normal'),\n      status = _useState[0],\n      setStatus = _useState[1];\n\n  var _useState2 = useState('US'),\n      country = _useState2[0],\n      setCountry = _useState2[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              setStatus('loading');\n              _context2.next = 4;\n              return callApi('/api/user/connectStripe?country=' + country);\n\n            case 4:\n              res = _context2.sent;\n\n              if (!(res.status !== 200)) {\n                _context2.next = 7;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", setStatus('normal'));\n\n            case 7:\n              window.location.assign(res.result.url);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onSubmit(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return h(FormBox, {\n    width: 400,\n    onSubmit: onSubmit\n  }, [h('div', [h('h3', {\n    id: \"connect-stripe\"\n  }, 'Stripe Account'), h('p.textSecondary', 'We use Stripe to handle payments from learners and payouts to facilitators')]), props.stripe_connected_accounts ? null : h(Box, [h('h4', \"Select Your Country\"), h(Select, {\n    required: true,\n    onChange: function onChange(e) {\n      return setCountry(e.currentTarget.value);\n    }\n  }, [h('option', {\n    value: \"US\"\n  }, \"United States of America\"), h('option', {\n    value: \"CA\"\n  }, \"Canada\")])]), h(Primary, {\n    status: status,\n    type: 'submit'\n  }, !((_props$stripe_connect = props.stripe_connected_accounts) !== null && _props$stripe_connect !== void 0 && _props$stripe_connect.connected) ? 'Connect to Stripe' : props.stripe_connected_accounts.payouts_enabled ? 'Update your Stripe details' : \"Finish your Stripe onboarding\")]);\n};\n\n_s2(StripeSettings, \"kFD0AfBcZv4ZxDzJSIyFtvcr1T0=\");\n\n_c2 = StripeSettings;\nexport default Settings;\n\nvar Description = /*#__PURE__*/_styled('p', {\n  target: \"e12hwfc60\",\n  label: \"Description\"\n})(\"font-size:0.75rem;font-weight:normal;color:\", colors.textSecondary, \";\" + (false ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvY29tcG9uZW50cy9wYWdlcy9kYXNoYm9hcmQvU2V0dGluZ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBOEgrQiIsImZpbGUiOiIvVXNlcnMvYXlvb2x1d2FhbGZvbnNvL2NvZGUva3Jha2VuZWR1YXBwL2NvbXBvbmVudHMvcGFnZXMvZGFzaGJvYXJkL1NldHRpbmdzLnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGggZnJvbSAncmVhY3QtaHlwZXJzY3JpcHQnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCdcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IEJveCwgTGFiZWxCb3gsIEZvcm1Cb3h9IGZyb20gJ2NvbXBvbmVudHMvTGF5b3V0J1xuaW1wb3J0IHsgSW5wdXQsIFRleHRhcmVhLCBJbmZvLCBTZWxlY3QgfSBmcm9tICdjb21wb25lbnRzL0Zvcm0nXG5pbXBvcnQgeyBQcmltYXJ5LCBEZXN0cnVjdGl2ZSB9IGZyb20gJ2NvbXBvbmVudHMvQnV0dG9uJ1xuaW1wb3J0IHsgY29sb3JzIH0gZnJvbSAnY29tcG9uZW50cy9Ub2tlbnMnXG5cbmltcG9ydCB7IGNhbGxBcGksIHVzZUFwaSB9IGZyb20gJ3NyYy9hcGlIZWxwZXJzJ1xuaW1wb3J0IHsgVXBkYXRlUGVyc29uTXNnLCBVcGRhdGVQZXJzb25SZXN1bHQgfSBmcm9tICdwYWdlcy9hcGkvcGVvcGxlL1tpZF0nXG5pbXBvcnQgeyBHRVRDb25uZWN0U3RyaXBlUmVzdWx0IH0gZnJvbSAncGFnZXMvYXBpL3VzZXIvY29ubmVjdFN0cmlwZSdcbmltcG9ydCB7IHVzZUZvcm1EYXRhIH0gZnJvbSAnc3JjL2hvb2tzJ1xuXG5jb25zdCBDT1BZID0ge1xuICB1c2VybmFtZUZpZWxkOiBcIlVzZXJuYW1lXCIsXG4gIGVtYWlsRmllbGQ6IFwiRW1haWxcIixcbiAgcHJvbm91bnNGaWVsZDogXCJZb3VyIFByb25vdW5zXCIsXG4gIGRpc3BsYXlOYW1lRmllbGQ6IFwiTmlja25hbWVcIixcbiAgZGlzcGxheU5hbWVEZXNjcmlwdGlvbjogXCJUaGlzIGlzIGRpc3BsYXllZCB3aGVuIHlvdSBwb3N0IG9uIHRoZSBmb3J1bSBvciBlbnJvbGwgaW4gYSBjb3Vyc2UuXCIsXG4gIGxpbmtGaWVsZDogXCJMaW5rXCIsXG4gIGxpbmtEZXNjcmlwdGlvbjogXCJXaGVyZSB5b3UncmUgaGFuZ2luZyBvbiB0aGUgaW50ZXJuZXQgKHlvdXIgd2Vic2l0ZSwgVHdpdHRlciwgZXRjLilcIixcbiAgYmlvRmllbGQ6IFwiQmlvXCJcbn1cblxudHlwZSBQcm9maWxlID0ge1xuICBiaW86IHN0cmluZyxcbiAgZGlzcGxheV9uYW1lOiBzdHJpbmcsXG4gIHByb25vdW5zOiBzdHJpbmcsXG4gIGxpbms6IHN0cmluZyxcbiAgc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50czp7XG4gICAgc3RyaXBlX2FjY291bnQ6IHN0cmluZyxcbiAgICBwYXlvdXRzX2VuYWJsZWQ6IGJvb2xlYW4sXG4gICAgY29ubmVjdGVkOiBib29sZWFuXG4gIH0gfCBudWxsXG59XG5jb25zdCBTZXR0aW5ncyA9IChwcm9wczp7XG4gIHVzZXI6IHtlbWFpbDogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nfVxuICBmYWNpbGl0YXRvcjogYm9vbGVhbixcbiAgcHJvZmlsZTogUHJvZmlsZVxuICBtdXRhdGU6IChwOk9taXQ8UHJvZmlsZSwgJ3N0cmlwZV9jb25uZWN0ZWRfYWNjb3VudHMnPik9PnZvaWRcbn0pID0+IHtcbiAgbGV0IHtzdGF0ZSwgY2hhbmdlZCwgZm9ybSwgcmVzZXR9ID0gdXNlRm9ybURhdGEocHJvcHMucHJvZmlsZSlcbiAgbGV0IFtzdGF0dXMsIGNhbGxVcGRhdGVQZXJzb25dID0gdXNlQXBpPFVwZGF0ZVBlcnNvbk1zZywgVXBkYXRlUGVyc29uUmVzdWx0PihbXSlcblxuICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBpZighY2hhbmdlZCkgcmV0dXJuXG4gICAgbGV0IHJlcyA9IGF3YWl0IGNhbGxVcGRhdGVQZXJzb24oYC9hcGkvcGVvcGxlLyR7cHJvcHMudXNlci51c2VybmFtZX1gLCB7cHJvZmlsZTpzdGF0ZX0pXG4gICAgaWYocmVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBwcm9wcy5tdXRhdGUoc3RhdGUpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGgoQm94LCB7Z2FwOjY0fSwgW1xuICAgIGgoRm9ybUJveCwge29uU3VibWl0LCB3aWR0aDogNDAwLCBnYXA6IDMyfSwgW1xuICAgICAgaChCb3gsIHtnYXA6OH0sIFtoKCdoNCcsICdVc2VybmFtZScpLCBoKEluZm8sIHByb3BzLnVzZXIudXNlcm5hbWUpXSksXG4gICAgICBoKEJveCwge2dhcDo4fSwgW2goJ2g0JywgJ0VtYWlsJyksIGgoSW5mbywgcHJvcHMudXNlci5lbWFpbCldKSxcbiAgICAgIGgoTGFiZWxCb3gsIHtnYXA6OH0sIFtcbiAgICAgICAgaCgnZGl2JywgW1xuICAgICAgICAgIGgoJ2g0JywgQ09QWS5kaXNwbGF5TmFtZUZpZWxkKSxcbiAgICAgICAgICBoKERlc2NyaXB0aW9uLCBDT1BZLmRpc3BsYXlOYW1lRGVzY3JpcHRpb24pXG4gICAgICAgIF0pLFxuICAgICAgICBoKElucHV0LGZvcm0uZGlzcGxheV9uYW1lKVxuICAgICAgXSksXG4gICAgICBoKExhYmVsQm94LCB7Z2FwOjh9LCBbXG4gICAgICAgIGgoJ2g0JywgQ09QWS5wcm9ub3Vuc0ZpZWxkKSxcbiAgICAgICAgaChJbnB1dCwgZm9ybS5wcm9ub3VucylcbiAgICAgIF0pLFxuICAgICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgICBoKEJveCwge2dhcDo0fSwgW1xuICAgICAgICAgIGgoJ2g0JywgQ09QWS5saW5rRmllbGQpLFxuICAgICAgICAgIGgoRGVzY3JpcHRpb24sIENPUFkubGlua0Rlc2NyaXB0aW9uKSxcbiAgICAgICAgXSksXG4gICAgICAgIGgoSW5wdXQsIGZvcm0ubGluaylcbiAgICAgIF0pLFxuICAgICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgICBoKCdoNCcsIENPUFkuYmlvRmllbGQpLFxuICAgICAgICBoKFRleHRhcmVhLCBmb3JtLmJpbylcbiAgICAgIF0pLFxuICAgIGgoU3VibWl0QnV0dG9ucywgW1xuICAgICAgaChEZXN0cnVjdGl2ZSwge2Rpc2FibGVkOiAhY2hhbmdlZCwgb25DbGljazogKCk9PntcbiAgICAgICAgaWYocHJvcHMucHJvZmlsZSkgcmVzZXQoKVxuICAgICAgfX0sIFwiRGlzY2FyZCBDaGFuZ2VzXCIpLFxuICAgICAgaChQcmltYXJ5LCB7c3RhdHVzLCB0eXBlOiAnc3VibWl0JywgZGlzYWJsZWQ6ICFjaGFuZ2VkfSwgJ1NhdmUgQ2hhbmdlcycpXG4gICAgXSlcbiAgXSksXG4gICAgIXByb3BzLmZhY2lsaXRhdG9yID8gbnVsbCA6IGgoU3RyaXBlU2V0dGluZ3MsIHtzdHJpcGVfY29ubmVjdGVkX2FjY291bnRzOiBwcm9wcy5wcm9maWxlLnN0cmlwZV9jb25uZWN0ZWRfYWNjb3VudHN9KVxuICBdKVxufVxuXG5jb25zdCBTdHJpcGVTZXR0aW5ncyA9IChwcm9wczp7c3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50czoge2Nvbm5lY3RlZDogYm9vbGVhbiwgcGF5b3V0c19lbmFibGVkOmJvb2xlYW59IHwgbnVsbH0pID0+IHtcbiAgbGV0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZTwnbm9ybWFsJyB8ICdsb2FkaW5nJz4oJ25vcm1hbCcpXG4gIGxldCBbY291bnRyeSwgc2V0Q291bnRyeV0gPSB1c2VTdGF0ZSgnVVMnKVxuXG4gIGxldCBvblN1Ym1pdCA9IGFzeW5jIChlOlJlYWN0LkZvcm1FdmVudCk9PntcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBzZXRTdGF0dXMoJ2xvYWRpbmcnKVxuICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPG51bGwsIEdFVENvbm5lY3RTdHJpcGVSZXN1bHQ+KCcvYXBpL3VzZXIvY29ubmVjdFN0cmlwZT9jb3VudHJ5PScrY291bnRyeSlcbiAgICBpZihyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiBzZXRTdGF0dXMoJ25vcm1hbCcpXG4gICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihyZXMucmVzdWx0LnVybClcbiAgfVxuXG4gIHJldHVybiBoKEZvcm1Cb3gsIHt3aWR0aDogNDAwLCBvblN1Ym1pdH0sIFtcbiAgICBoKCdkaXYnLFtcbiAgICAgIGgoJ2gzJywge2lkOlwiY29ubmVjdC1zdHJpcGVcIn0sICdTdHJpcGUgQWNjb3VudCcpLFxuICAgICAgaCgncC50ZXh0U2Vjb25kYXJ5JywgJ1dlIHVzZSBTdHJpcGUgdG8gaGFuZGxlIHBheW1lbnRzIGZyb20gbGVhcm5lcnMgYW5kIHBheW91dHMgdG8gZmFjaWxpdGF0b3JzJyksXG4gICAgXSksXG4gICAgcHJvcHMuc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50cyA/IG51bGwgOiBoKEJveCwgW1xuICAgICAgaCgnaDQnLCBcIlNlbGVjdCBZb3VyIENvdW50cnlcIiksXG4gICAgICBoKFNlbGVjdCwge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgb25DaGFuZ2U6IGU9PnNldENvdW50cnkoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgfSwgW1xuICAgICAgICBoKCdvcHRpb24nLCB7dmFsdWU6IFwiVVNcIn0sIFwiVW5pdGVkIFN0YXRlcyBvZiBBbWVyaWNhXCIpLFxuICAgICAgICBoKCdvcHRpb24nLCB7dmFsdWU6IFwiQ0FcIn0sIFwiQ2FuYWRhXCIpXG4gICAgICBdKVxuICAgIF0pLFxuICAgIGgoUHJpbWFyeSwge3N0YXR1cywgdHlwZTogJ3N1Ym1pdCd9LCAhcHJvcHMuc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50cz8uY29ubmVjdGVkXG4gICAgICA/ICdDb25uZWN0IHRvIFN0cmlwZSdcbiAgICAgIDogcHJvcHMuc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50cy5wYXlvdXRzX2VuYWJsZWQgPyAnVXBkYXRlIHlvdXIgU3RyaXBlIGRldGFpbHMnIDogXCJGaW5pc2ggeW91ciBTdHJpcGUgb25ib2FyZGluZ1wiKVxuICBdKVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZXR0aW5nc1xuXG5jb25zdCBEZXNjcmlwdGlvbiA9IHN0eWxlZCgncCcpYFxuZm9udC1zaXplOiAwLjc1cmVtO1xuZm9udC13ZWlnaHQ6IG5vcm1hbDtcbmNvbG9yOiAke2NvbG9ycy50ZXh0U2Vjb25kYXJ5fTtcbmBcblxuY29uc3QgU3VibWl0QnV0dG9ucyA9IHN0eWxlZCgnZGl2JylgXG5qdXN0aWZ5LXNlbGY6IHJpZ2h0O1xuZGlzcGxheTogZ3JpZDtcbmdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byBhdXRvO1xuZ3JpZC1nYXA6IDE2cHg7XG5gXG4iXX0= */\"));\n\nvar SubmitButtons = /*#__PURE__*/_styled('div', {\n  target: \"e12hwfc61\",\n  label: \"SubmitButtons\"\n})(false ? {\n  name: \"1mxcumu\",\n  styles: \"justify-self:right;display:grid;grid-template-columns:auto auto;grid-gap:16px;\"\n} : {\n  name: \"1mxcumu\",\n  styles: \"justify-self:right;display:grid;grid-template-columns:auto auto;grid-gap:16px;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9heW9vbHV3YWFsZm9uc28vY29kZS9rcmFrZW5lZHVhcHAvY29tcG9uZW50cy9wYWdlcy9kYXNoYm9hcmQvU2V0dGluZ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBb0ltQyIsImZpbGUiOiIvVXNlcnMvYXlvb2x1d2FhbGZvbnNvL2NvZGUva3Jha2VuZWR1YXBwL2NvbXBvbmVudHMvcGFnZXMvZGFzaGJvYXJkL1NldHRpbmdzLnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGggZnJvbSAncmVhY3QtaHlwZXJzY3JpcHQnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCdcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IEJveCwgTGFiZWxCb3gsIEZvcm1Cb3h9IGZyb20gJ2NvbXBvbmVudHMvTGF5b3V0J1xuaW1wb3J0IHsgSW5wdXQsIFRleHRhcmVhLCBJbmZvLCBTZWxlY3QgfSBmcm9tICdjb21wb25lbnRzL0Zvcm0nXG5pbXBvcnQgeyBQcmltYXJ5LCBEZXN0cnVjdGl2ZSB9IGZyb20gJ2NvbXBvbmVudHMvQnV0dG9uJ1xuaW1wb3J0IHsgY29sb3JzIH0gZnJvbSAnY29tcG9uZW50cy9Ub2tlbnMnXG5cbmltcG9ydCB7IGNhbGxBcGksIHVzZUFwaSB9IGZyb20gJ3NyYy9hcGlIZWxwZXJzJ1xuaW1wb3J0IHsgVXBkYXRlUGVyc29uTXNnLCBVcGRhdGVQZXJzb25SZXN1bHQgfSBmcm9tICdwYWdlcy9hcGkvcGVvcGxlL1tpZF0nXG5pbXBvcnQgeyBHRVRDb25uZWN0U3RyaXBlUmVzdWx0IH0gZnJvbSAncGFnZXMvYXBpL3VzZXIvY29ubmVjdFN0cmlwZSdcbmltcG9ydCB7IHVzZUZvcm1EYXRhIH0gZnJvbSAnc3JjL2hvb2tzJ1xuXG5jb25zdCBDT1BZID0ge1xuICB1c2VybmFtZUZpZWxkOiBcIlVzZXJuYW1lXCIsXG4gIGVtYWlsRmllbGQ6IFwiRW1haWxcIixcbiAgcHJvbm91bnNGaWVsZDogXCJZb3VyIFByb25vdW5zXCIsXG4gIGRpc3BsYXlOYW1lRmllbGQ6IFwiTmlja25hbWVcIixcbiAgZGlzcGxheU5hbWVEZXNjcmlwdGlvbjogXCJUaGlzIGlzIGRpc3BsYXllZCB3aGVuIHlvdSBwb3N0IG9uIHRoZSBmb3J1bSBvciBlbnJvbGwgaW4gYSBjb3Vyc2UuXCIsXG4gIGxpbmtGaWVsZDogXCJMaW5rXCIsXG4gIGxpbmtEZXNjcmlwdGlvbjogXCJXaGVyZSB5b3UncmUgaGFuZ2luZyBvbiB0aGUgaW50ZXJuZXQgKHlvdXIgd2Vic2l0ZSwgVHdpdHRlciwgZXRjLilcIixcbiAgYmlvRmllbGQ6IFwiQmlvXCJcbn1cblxudHlwZSBQcm9maWxlID0ge1xuICBiaW86IHN0cmluZyxcbiAgZGlzcGxheV9uYW1lOiBzdHJpbmcsXG4gIHByb25vdW5zOiBzdHJpbmcsXG4gIGxpbms6IHN0cmluZyxcbiAgc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50czp7XG4gICAgc3RyaXBlX2FjY291bnQ6IHN0cmluZyxcbiAgICBwYXlvdXRzX2VuYWJsZWQ6IGJvb2xlYW4sXG4gICAgY29ubmVjdGVkOiBib29sZWFuXG4gIH0gfCBudWxsXG59XG5jb25zdCBTZXR0aW5ncyA9IChwcm9wczp7XG4gIHVzZXI6IHtlbWFpbDogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nfVxuICBmYWNpbGl0YXRvcjogYm9vbGVhbixcbiAgcHJvZmlsZTogUHJvZmlsZVxuICBtdXRhdGU6IChwOk9taXQ8UHJvZmlsZSwgJ3N0cmlwZV9jb25uZWN0ZWRfYWNjb3VudHMnPik9PnZvaWRcbn0pID0+IHtcbiAgbGV0IHtzdGF0ZSwgY2hhbmdlZCwgZm9ybSwgcmVzZXR9ID0gdXNlRm9ybURhdGEocHJvcHMucHJvZmlsZSlcbiAgbGV0IFtzdGF0dXMsIGNhbGxVcGRhdGVQZXJzb25dID0gdXNlQXBpPFVwZGF0ZVBlcnNvbk1zZywgVXBkYXRlUGVyc29uUmVzdWx0PihbXSlcblxuICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBpZighY2hhbmdlZCkgcmV0dXJuXG4gICAgbGV0IHJlcyA9IGF3YWl0IGNhbGxVcGRhdGVQZXJzb24oYC9hcGkvcGVvcGxlLyR7cHJvcHMudXNlci51c2VybmFtZX1gLCB7cHJvZmlsZTpzdGF0ZX0pXG4gICAgaWYocmVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBwcm9wcy5tdXRhdGUoc3RhdGUpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGgoQm94LCB7Z2FwOjY0fSwgW1xuICAgIGgoRm9ybUJveCwge29uU3VibWl0LCB3aWR0aDogNDAwLCBnYXA6IDMyfSwgW1xuICAgICAgaChCb3gsIHtnYXA6OH0sIFtoKCdoNCcsICdVc2VybmFtZScpLCBoKEluZm8sIHByb3BzLnVzZXIudXNlcm5hbWUpXSksXG4gICAgICBoKEJveCwge2dhcDo4fSwgW2goJ2g0JywgJ0VtYWlsJyksIGgoSW5mbywgcHJvcHMudXNlci5lbWFpbCldKSxcbiAgICAgIGgoTGFiZWxCb3gsIHtnYXA6OH0sIFtcbiAgICAgICAgaCgnZGl2JywgW1xuICAgICAgICAgIGgoJ2g0JywgQ09QWS5kaXNwbGF5TmFtZUZpZWxkKSxcbiAgICAgICAgICBoKERlc2NyaXB0aW9uLCBDT1BZLmRpc3BsYXlOYW1lRGVzY3JpcHRpb24pXG4gICAgICAgIF0pLFxuICAgICAgICBoKElucHV0LGZvcm0uZGlzcGxheV9uYW1lKVxuICAgICAgXSksXG4gICAgICBoKExhYmVsQm94LCB7Z2FwOjh9LCBbXG4gICAgICAgIGgoJ2g0JywgQ09QWS5wcm9ub3Vuc0ZpZWxkKSxcbiAgICAgICAgaChJbnB1dCwgZm9ybS5wcm9ub3VucylcbiAgICAgIF0pLFxuICAgICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgICBoKEJveCwge2dhcDo0fSwgW1xuICAgICAgICAgIGgoJ2g0JywgQ09QWS5saW5rRmllbGQpLFxuICAgICAgICAgIGgoRGVzY3JpcHRpb24sIENPUFkubGlua0Rlc2NyaXB0aW9uKSxcbiAgICAgICAgXSksXG4gICAgICAgIGgoSW5wdXQsIGZvcm0ubGluaylcbiAgICAgIF0pLFxuICAgICAgaChMYWJlbEJveCwge2dhcDo4fSwgW1xuICAgICAgICBoKCdoNCcsIENPUFkuYmlvRmllbGQpLFxuICAgICAgICBoKFRleHRhcmVhLCBmb3JtLmJpbylcbiAgICAgIF0pLFxuICAgIGgoU3VibWl0QnV0dG9ucywgW1xuICAgICAgaChEZXN0cnVjdGl2ZSwge2Rpc2FibGVkOiAhY2hhbmdlZCwgb25DbGljazogKCk9PntcbiAgICAgICAgaWYocHJvcHMucHJvZmlsZSkgcmVzZXQoKVxuICAgICAgfX0sIFwiRGlzY2FyZCBDaGFuZ2VzXCIpLFxuICAgICAgaChQcmltYXJ5LCB7c3RhdHVzLCB0eXBlOiAnc3VibWl0JywgZGlzYWJsZWQ6ICFjaGFuZ2VkfSwgJ1NhdmUgQ2hhbmdlcycpXG4gICAgXSlcbiAgXSksXG4gICAgIXByb3BzLmZhY2lsaXRhdG9yID8gbnVsbCA6IGgoU3RyaXBlU2V0dGluZ3MsIHtzdHJpcGVfY29ubmVjdGVkX2FjY291bnRzOiBwcm9wcy5wcm9maWxlLnN0cmlwZV9jb25uZWN0ZWRfYWNjb3VudHN9KVxuICBdKVxufVxuXG5jb25zdCBTdHJpcGVTZXR0aW5ncyA9IChwcm9wczp7c3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50czoge2Nvbm5lY3RlZDogYm9vbGVhbiwgcGF5b3V0c19lbmFibGVkOmJvb2xlYW59IHwgbnVsbH0pID0+IHtcbiAgbGV0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZTwnbm9ybWFsJyB8ICdsb2FkaW5nJz4oJ25vcm1hbCcpXG4gIGxldCBbY291bnRyeSwgc2V0Q291bnRyeV0gPSB1c2VTdGF0ZSgnVVMnKVxuXG4gIGxldCBvblN1Ym1pdCA9IGFzeW5jIChlOlJlYWN0LkZvcm1FdmVudCk9PntcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBzZXRTdGF0dXMoJ2xvYWRpbmcnKVxuICAgIGxldCByZXMgPSBhd2FpdCBjYWxsQXBpPG51bGwsIEdFVENvbm5lY3RTdHJpcGVSZXN1bHQ+KCcvYXBpL3VzZXIvY29ubmVjdFN0cmlwZT9jb3VudHJ5PScrY291bnRyeSlcbiAgICBpZihyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiBzZXRTdGF0dXMoJ25vcm1hbCcpXG4gICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihyZXMucmVzdWx0LnVybClcbiAgfVxuXG4gIHJldHVybiBoKEZvcm1Cb3gsIHt3aWR0aDogNDAwLCBvblN1Ym1pdH0sIFtcbiAgICBoKCdkaXYnLFtcbiAgICAgIGgoJ2gzJywge2lkOlwiY29ubmVjdC1zdHJpcGVcIn0sICdTdHJpcGUgQWNjb3VudCcpLFxuICAgICAgaCgncC50ZXh0U2Vjb25kYXJ5JywgJ1dlIHVzZSBTdHJpcGUgdG8gaGFuZGxlIHBheW1lbnRzIGZyb20gbGVhcm5lcnMgYW5kIHBheW91dHMgdG8gZmFjaWxpdGF0b3JzJyksXG4gICAgXSksXG4gICAgcHJvcHMuc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50cyA/IG51bGwgOiBoKEJveCwgW1xuICAgICAgaCgnaDQnLCBcIlNlbGVjdCBZb3VyIENvdW50cnlcIiksXG4gICAgICBoKFNlbGVjdCwge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgb25DaGFuZ2U6IGU9PnNldENvdW50cnkoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgfSwgW1xuICAgICAgICBoKCdvcHRpb24nLCB7dmFsdWU6IFwiVVNcIn0sIFwiVW5pdGVkIFN0YXRlcyBvZiBBbWVyaWNhXCIpLFxuICAgICAgICBoKCdvcHRpb24nLCB7dmFsdWU6IFwiQ0FcIn0sIFwiQ2FuYWRhXCIpXG4gICAgICBdKVxuICAgIF0pLFxuICAgIGgoUHJpbWFyeSwge3N0YXR1cywgdHlwZTogJ3N1Ym1pdCd9LCAhcHJvcHMuc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50cz8uY29ubmVjdGVkXG4gICAgICA/ICdDb25uZWN0IHRvIFN0cmlwZSdcbiAgICAgIDogcHJvcHMuc3RyaXBlX2Nvbm5lY3RlZF9hY2NvdW50cy5wYXlvdXRzX2VuYWJsZWQgPyAnVXBkYXRlIHlvdXIgU3RyaXBlIGRldGFpbHMnIDogXCJGaW5pc2ggeW91ciBTdHJpcGUgb25ib2FyZGluZ1wiKVxuICBdKVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZXR0aW5nc1xuXG5jb25zdCBEZXNjcmlwdGlvbiA9IHN0eWxlZCgncCcpYFxuZm9udC1zaXplOiAwLjc1cmVtO1xuZm9udC13ZWlnaHQ6IG5vcm1hbDtcbmNvbG9yOiAke2NvbG9ycy50ZXh0U2Vjb25kYXJ5fTtcbmBcblxuY29uc3QgU3VibWl0QnV0dG9ucyA9IHN0eWxlZCgnZGl2JylgXG5qdXN0aWZ5LXNlbGY6IHJpZ2h0O1xuZGlzcGxheTogZ3JpZDtcbmdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byBhdXRvO1xuZ3JpZC1nYXA6IDE2cHg7XG5gXG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n});\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Settings\");\n$RefreshReg$(_c2, \"StripeSettings\");","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/components/pages/dashboard/Settings.ts"],"names":["h","useState","Box","LabelBox","FormBox","Input","Textarea","Info","Select","Primary","Destructive","colors","callApi","useApi","useFormData","COPY","usernameField","emailField","pronounsField","displayNameField","displayNameDescription","linkField","linkDescription","bioField","Settings","props","profile","state","changed","form","reset","status","callUpdatePerson","onSubmit","e","preventDefault","user","username","res","mutate","gap","width","email","Description","display_name","pronouns","link","bio","SubmitButtons","disabled","onClick","type","facilitator","StripeSettings","stripe_connected_accounts","setStatus","country","setCountry","window","location","assign","result","url","id","required","onChange","currentTarget","value","connected","payouts_enabled","textSecondary"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\nimport styled from '@emotion/styled'\nimport { useState } from 'react'\n\nimport { Box, LabelBox, FormBox} from 'components/Layout'\nimport { Input, Textarea, Info, Select } from 'components/Form'\nimport { Primary, Destructive } from 'components/Button'\nimport { colors } from 'components/Tokens'\n\nimport { callApi, useApi } from 'src/apiHelpers'\nimport { UpdatePersonMsg, UpdatePersonResult } from 'pages/api/people/[id]'\nimport { GETConnectStripeResult } from 'pages/api/user/connectStripe'\nimport { useFormData } from 'src/hooks'\n\nconst COPY = {\n  usernameField: \"Username\",\n  emailField: \"Email\",\n  pronounsField: \"Your Pronouns\",\n  displayNameField: \"Nickname\",\n  displayNameDescription: \"This is displayed when you post on the forum or enroll in a course.\",\n  linkField: \"Link\",\n  linkDescription: \"Where you're hanging on the internet (your website, Twitter, etc.)\",\n  bioField: \"Bio\"\n}\n\ntype Profile = {\n  bio: string,\n  display_name: string,\n  pronouns: string,\n  link: string,\n  stripe_connected_accounts:{\n    stripe_account: string,\n    payouts_enabled: boolean,\n    connected: boolean\n  } | null\n}\nconst Settings = (props:{\n  user: {email: string, username: string}\n  facilitator: boolean,\n  profile: Profile\n  mutate: (p:Omit<Profile, 'stripe_connected_accounts'>)=>void\n}) => {\n  let {state, changed, form, reset} = useFormData(props.profile)\n  let [status, callUpdatePerson] = useApi<UpdatePersonMsg, UpdatePersonResult>([])\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if(!changed) return\n    let res = await callUpdatePerson(`/api/people/${props.user.username}`, {profile:state})\n    if(res.status === 200) {\n      props.mutate(state)\n    }\n  }\n\n  return h(Box, {gap:64}, [\n    h(FormBox, {onSubmit, width: 400, gap: 32}, [\n      h(Box, {gap:8}, [h('h4', 'Username'), h(Info, props.user.username)]),\n      h(Box, {gap:8}, [h('h4', 'Email'), h(Info, props.user.email)]),\n      h(LabelBox, {gap:8}, [\n        h('div', [\n          h('h4', COPY.displayNameField),\n          h(Description, COPY.displayNameDescription)\n        ]),\n        h(Input,form.display_name)\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', COPY.pronounsField),\n        h(Input, form.pronouns)\n      ]),\n      h(LabelBox, {gap:8}, [\n        h(Box, {gap:4}, [\n          h('h4', COPY.linkField),\n          h(Description, COPY.linkDescription),\n        ]),\n        h(Input, form.link)\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', COPY.bioField),\n        h(Textarea, form.bio)\n      ]),\n    h(SubmitButtons, [\n      h(Destructive, {disabled: !changed, onClick: ()=>{\n        if(props.profile) reset()\n      }}, \"Discard Changes\"),\n      h(Primary, {status, type: 'submit', disabled: !changed}, 'Save Changes')\n    ])\n  ]),\n    !props.facilitator ? null : h(StripeSettings, {stripe_connected_accounts: props.profile.stripe_connected_accounts})\n  ])\n}\n\nconst StripeSettings = (props:{stripe_connected_accounts: {connected: boolean, payouts_enabled:boolean} | null}) => {\n  let [status, setStatus] = useState<'normal' | 'loading'>('normal')\n  let [country, setCountry] = useState('US')\n\n  let onSubmit = async (e:React.FormEvent)=>{\n    e.preventDefault()\n    setStatus('loading')\n    let res = await callApi<null, GETConnectStripeResult>('/api/user/connectStripe?country='+country)\n    if(res.status !== 200) return setStatus('normal')\n    window.location.assign(res.result.url)\n  }\n\n  return h(FormBox, {width: 400, onSubmit}, [\n    h('div',[\n      h('h3', {id:\"connect-stripe\"}, 'Stripe Account'),\n      h('p.textSecondary', 'We use Stripe to handle payments from learners and payouts to facilitators'),\n    ]),\n    props.stripe_connected_accounts ? null : h(Box, [\n      h('h4', \"Select Your Country\"),\n      h(Select, {\n        required: true,\n        onChange: e=>setCountry(e.currentTarget.value)\n      }, [\n        h('option', {value: \"US\"}, \"United States of America\"),\n        h('option', {value: \"CA\"}, \"Canada\")\n      ])\n    ]),\n    h(Primary, {status, type: 'submit'}, !props.stripe_connected_accounts?.connected\n      ? 'Connect to Stripe'\n      : props.stripe_connected_accounts.payouts_enabled ? 'Update your Stripe details' : \"Finish your Stripe onboarding\")\n  ])\n}\n\nexport default Settings\n\nconst Description = styled('p')`\nfont-size: 0.75rem;\nfont-weight: normal;\ncolor: ${colors.textSecondary};\n`\n\nconst SubmitButtons = styled('div')`\njustify-self: right;\ndisplay: grid;\ngrid-template-columns: auto auto;\ngrid-gap: 16px;\n`\n"]},"metadata":{},"sourceType":"module"}