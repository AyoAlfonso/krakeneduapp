{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport h from 'react-hyperscript';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport { Input, Error, Info, Textarea, CheckBox } from 'components/Form';\nimport { Primary } from 'components/Button';\nimport { LabelBox, FormBox } from 'components/Layout';\nimport { useApi } from 'src/apiHelpers';\nimport { useUserData } from 'src/data';\n\nvar CreateCourse = function CreateCourse() {\n  var _useUserData = useUserData(),\n      user = _useUserData.data;\n\n  var router = useRouter();\n\n  var _useState = useState({\n    name: '',\n    description: '',\n    prerequisites: '',\n    duration: \"\",\n    cost: 5,\n    type: 'course',\n    maintainers: []\n  }),\n      formData = _useState[0],\n      setFormData = _useState[1];\n\n  var _useApi = useApi([formData]),\n      _useApi2 = _slicedToArray(_useApi, 2),\n      status = _useApi2[0],\n      callCreateCourse = _useApi2[1];\n\n  if (user === false) router.push('/');\n  if (user && user.admin === false) router.push('/dashboard');\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return callCreateCourse('/api/courses', _objectSpread({}, formData));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return h('div', [h('h1', 'Create a New Course'), status === 'error' ? h(Error, 'An error occured') : null, status === 'success' ? h(Info, 'Course created!') : null, h(FormBox, {\n    onSubmit: onSubmit\n  }, [h(CheckBox, {\n    style: {\n      marginTop: '16px'\n    }\n  }, [h(Input, {\n    type: 'checkbox',\n    checked: formData.type === 'club',\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        type: e.currentTarget.checked ? 'club' : 'course'\n      }));\n    }\n  }), h('h4', 'Club? ')]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Name'), h(Input, {\n    required: true,\n    type: 'text',\n    maxLength: 50,\n    value: formData.name,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        name: e.currentTarget.value\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Description'), h(Textarea, {\n    required: true,\n    maxLength: 200,\n    value: formData.description,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        description: e.currentTarget.value\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Duration'), h(Input, {\n    type: 'text',\n    value: formData.duration,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        duration: e.currentTarget.value\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Prerequisites'), h(Textarea, {\n    value: formData.prerequisites,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        prerequisites: e.currentTarget.value\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Cost (USD)'), h(Input, {\n    required: true,\n    type: 'number',\n    min: '5',\n    max: '1000',\n    value: formData.cost,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        cost: parseInt(e.currentTarget.value)\n      }));\n    }\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Maintainers'), h(Input, {\n    required: true,\n    type: 'email',\n    multiple: true,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        maintainers: e.currentTarget.value.split(',').map(function (x) {\n          return x.trim();\n        })\n      }));\n    }\n  })]), h(Primary, {\n    status: status,\n    type: 'submit'\n  }, 'Submit')])]);\n};\n\nexport default CreateCourse;","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/pages/courses/create.ts"],"names":["h","useRouter","useState","Input","Error","Info","Textarea","CheckBox","Primary","LabelBox","FormBox","useApi","useUserData","CreateCourse","user","data","router","name","description","prerequisites","duration","cost","type","maintainers","formData","setFormData","status","callCreateCourse","push","admin","onSubmit","e","preventDefault","style","marginTop","checked","onChange","currentTarget","gap","required","maxLength","value","min","max","parseInt","multiple","split","map","x","trim"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\nimport { useRouter } from 'next/router'\nimport { useState } from 'react'\n\nimport {  Input, Error, Info, Textarea, CheckBox} from 'components/Form'\nimport { Primary } from 'components/Button'\nimport { LabelBox, FormBox } from 'components/Layout'\n\nimport { useApi } from 'src/apiHelpers'\nimport { useUserData } from 'src/data'\nimport { CreateCourseMsg, CreateCourseResponse } from 'pages/api/courses'\n\nconst CreateCourse = ()=> {\n  let {data: user} = useUserData()\n  let router = useRouter()\n  let [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    prerequisites: '',\n    duration: \"\",\n    cost: 5,\n    type: 'course' as 'course' | 'club',\n    maintainers: [] as string[]\n  })\n\n  let [status, callCreateCourse] = useApi<CreateCourseMsg, CreateCourseResponse>([formData])\n\n  if(user === false) router.push('/')\n  if(user &&  user.admin === false) router.push('/dashboard')\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n    await callCreateCourse('/api/courses', {...formData})\n  }\n\n  return h('div', [\n    h('h1', 'Create a New Course'),\n    status === 'error' ? h(Error, 'An error occured') : null,\n    status === 'success' ? h(Info, 'Course created!') : null,\n    h(FormBox, {onSubmit}, [\n      h(CheckBox, {style:{marginTop: '16px'}}, [\n        h(Input, {\n          type: 'checkbox',\n          checked: formData.type === 'club',\n          onChange: e=> setFormData({...formData, type: e.currentTarget.checked ? 'club' : 'course'})\n        }),\n        h('h4', 'Club? '),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Name'),\n          h(Input, {\n            required: true,\n            type: 'text',\n            maxLength: 50,\n            value: formData.name,\n            onChange: e => setFormData({...formData, name: e.currentTarget.value})\n          }),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Description'),\n          h(Textarea, {\n            required: true,\n            maxLength: 200,\n            value: formData.description,\n            onChange: e => setFormData({...formData, description: e.currentTarget.value})\n          }),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Duration'),\n        h(Input, {\n          type: 'text',\n          value: formData.duration,\n          onChange: e=> setFormData({...formData, duration: e.currentTarget.value})\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Prerequisites'),\n        h(Textarea, {\n          value: formData.prerequisites,\n          onChange: e=> setFormData({...formData, prerequisites: e.currentTarget.value})\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Cost (USD)'),\n        h(Input, {\n          required: true,\n          type: 'number',\n          min: '5',\n          max: '1000',\n          value: formData.cost,\n          onChange: e=> setFormData({...formData, cost: parseInt(e.currentTarget.value)})\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Maintainers'),\n        h(Input, {\n          required: true,\n          type: 'email',\n          multiple: true,\n          onChange: e=> setFormData({...formData, maintainers: e.currentTarget.value.split(',').map(x=>x.trim())})\n        })\n      ]),\n      h(Primary, {status, type: 'submit'}, 'Submit')\n    ])\n  ])\n}\n\nexport default CreateCourse\n"]},"metadata":{},"sourceType":"module"}