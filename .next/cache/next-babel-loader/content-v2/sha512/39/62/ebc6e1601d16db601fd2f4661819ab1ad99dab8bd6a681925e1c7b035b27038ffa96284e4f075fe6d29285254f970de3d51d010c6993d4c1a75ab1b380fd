{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport h from 'react-hyperscript';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport { Input, Error, Info, Textarea, CheckBox } from 'components/Form';\nimport { Primary } from 'components/Button';\nimport { LabelBox, FormBox } from 'components/Layout';\nimport { useApi } from 'src/apiHelpers';\nimport { useUserData } from 'src/data';\n\nconst CreateCourse = () => {\n  let {\n    data: user\n  } = useUserData();\n  let router = useRouter();\n  let {\n    0: formData,\n    1: setFormData\n  } = useState({\n    name: '',\n    description: '',\n    prerequisites: '',\n    duration: \"\",\n    cost: 5,\n    type: 'course',\n    maintainers: []\n  });\n  let [status, callCreateCourse] = useApi([formData]);\n  if (user === false) router.push('/');\n  if (user && user.admin === false) router.push('/dashboard');\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    await callCreateCourse('/api/courses', _objectSpread({}, formData));\n  };\n\n  return h('div', [h('h1', 'Create a New Course'), status === 'error' ? h(Error, 'An error occured') : null, status === 'success' ? h(Info, 'Course created!') : null, h(FormBox, {\n    onSubmit\n  }, [h(CheckBox, {\n    style: {\n      marginTop: '16px'\n    }\n  }, [h(Input, {\n    type: 'checkbox',\n    checked: formData.type === 'club',\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      type: e.currentTarget.checked ? 'club' : 'course'\n    }))\n  }), h('h4', 'Club? ')]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Name'), h(Input, {\n    required: true,\n    type: 'text',\n    maxLength: 50,\n    value: formData.name,\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      name: e.currentTarget.value\n    }))\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Description'), h(Textarea, {\n    required: true,\n    maxLength: 200,\n    value: formData.description,\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      description: e.currentTarget.value\n    }))\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Duration'), h(Input, {\n    type: 'text',\n    value: formData.duration,\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      duration: e.currentTarget.value\n    }))\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Prerequisites'), h(Textarea, {\n    value: formData.prerequisites,\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      prerequisites: e.currentTarget.value\n    }))\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Cost (USD)'), h(Input, {\n    required: true,\n    type: 'number',\n    min: '5',\n    max: '1000',\n    value: formData.cost,\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      cost: parseInt(e.currentTarget.value)\n    }))\n  })]), h(LabelBox, {\n    gap: 8\n  }, [h('h4', 'Maintainers'), h(Input, {\n    required: true,\n    type: 'email',\n    multiple: true,\n    onChange: e => setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      maintainers: e.currentTarget.value.split(',').map(x => x.trim())\n    }))\n  })]), h(Primary, {\n    status,\n    type: 'submit'\n  }, 'Submit')])]);\n};\n\nexport default CreateCourse;","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/pages/courses/create.ts"],"names":["h","useRouter","useState","Input","Error","Info","Textarea","CheckBox","Primary","LabelBox","FormBox","useApi","useUserData","CreateCourse","data","user","router","formData","setFormData","name","description","prerequisites","duration","cost","type","maintainers","status","callCreateCourse","push","admin","onSubmit","e","preventDefault","style","marginTop","checked","onChange","currentTarget","gap","required","maxLength","value","min","max","parseInt","multiple","split","map","x","trim"],"mappings":"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","sourcesContent":["import h from 'react-hyperscript'\nimport { useRouter } from 'next/router'\nimport { useState } from 'react'\n\nimport {  Input, Error, Info, Textarea, CheckBox} from 'components/Form'\nimport { Primary } from 'components/Button'\nimport { LabelBox, FormBox } from 'components/Layout'\n\nimport { useApi } from 'src/apiHelpers'\nimport { useUserData } from 'src/data'\nimport { CreateCourseMsg, CreateCourseResponse } from 'pages/api/courses'\n\nconst CreateCourse = ()=> {\n  let {data: user} = useUserData()\n  let router = useRouter()\n  let [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    prerequisites: '',\n    duration: \"\",\n    cost: 5,\n    type: 'course' as 'course' | 'club',\n    maintainers: [] as string[]\n  })\n\n  let [status, callCreateCourse] = useApi<CreateCourseMsg, CreateCourseResponse>([formData])\n\n  if(user === false) router.push('/')\n  if(user &&  user.admin === false) router.push('/dashboard')\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n    await callCreateCourse('/api/courses', {...formData})\n  }\n\n  return h('div', [\n    h('h1', 'Create a New Course'),\n    status === 'error' ? h(Error, 'An error occured') : null,\n    status === 'success' ? h(Info, 'Course created!') : null,\n    h(FormBox, {onSubmit}, [\n      h(CheckBox, {style:{marginTop: '16px'}}, [\n        h(Input, {\n          type: 'checkbox',\n          checked: formData.type === 'club',\n          onChange: e=> setFormData({...formData, type: e.currentTarget.checked ? 'club' : 'course'})\n        }),\n        h('h4', 'Club? '),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Name'),\n          h(Input, {\n            required: true,\n            type: 'text',\n            maxLength: 50,\n            value: formData.name,\n            onChange: e => setFormData({...formData, name: e.currentTarget.value})\n          }),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Description'),\n          h(Textarea, {\n            required: true,\n            maxLength: 200,\n            value: formData.description,\n            onChange: e => setFormData({...formData, description: e.currentTarget.value})\n          }),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Duration'),\n        h(Input, {\n          type: 'text',\n          value: formData.duration,\n          onChange: e=> setFormData({...formData, duration: e.currentTarget.value})\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Prerequisites'),\n        h(Textarea, {\n          value: formData.prerequisites,\n          onChange: e=> setFormData({...formData, prerequisites: e.currentTarget.value})\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Cost (USD)'),\n        h(Input, {\n          required: true,\n          type: 'number',\n          min: '5',\n          max: '1000',\n          value: formData.cost,\n          onChange: e=> setFormData({...formData, cost: parseInt(e.currentTarget.value)})\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Maintainers'),\n        h(Input, {\n          required: true,\n          type: 'email',\n          multiple: true,\n          onChange: e=> setFormData({...formData, maintainers: e.currentTarget.value.split(',').map(x=>x.trim())})\n        })\n      ]),\n      h(Primary, {status, type: 'submit'}, 'Submit')\n    ])\n  ])\n}\n\nexport default CreateCourse\n"]},"metadata":{},"sourceType":"module"}