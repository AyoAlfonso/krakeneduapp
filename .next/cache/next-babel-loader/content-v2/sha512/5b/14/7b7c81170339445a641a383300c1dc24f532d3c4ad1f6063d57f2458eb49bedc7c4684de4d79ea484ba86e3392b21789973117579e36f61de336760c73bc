{"ast":null,"code":"import { APIHandler } from '../../src/apiHelpers';\nimport { createPost } from '../../src/discourse';\nexport default APIHandler(handler);\n\nasync function handler(req) {\n  let msg = req.body;\n  await createPost({\n    topic_id: 231,\n    raw: `\n${msg.username ? \"username: @\" + msg.username : \"\"}\n${msg.email ? \"email: \" + msg.email : \"\"}\npage: ${req.headers.referer}\n\n${msg.feedback}\n`\n  });\n  return {\n    status: 200,\n    result: \"\"\n  };\n}","map":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/pages/api/feedback.ts"],"names":["APIHandler","createPost","handler","req","msg","body","topic_id","raw","username","email","headers","referer","feedback","status","result"],"mappings":"AAAA,SAAQA,UAAR,QAA8C,sBAA9C;AACA,SAAQC,UAAR,QAAyB,qBAAzB;AASA,eAAeD,UAAU,CAACE,OAAD,CAAzB;;AAEA,eAAeA,OAAf,CAAuBC,GAAvB,EAAoC;AAClC,MAAIC,GAAG,GAAGD,GAAG,CAACE,IAAd;AACA,QAAMJ,UAAU,CAAC;AAACK,IAAAA,QAAQ,EAAE,GAAX;AAAgBC,IAAAA,GAAG,EAAG;AACzC,EAAEH,GAAG,CAACI,QAAJ,GAAe,gBAAcJ,GAAG,CAACI,QAAjC,GAA4C,EAAG;AACjD,EAAEJ,GAAG,CAACK,KAAJ,GAAY,YAAUL,GAAG,CAACK,KAA1B,GAAkC,EAAG;AACvC,QAAQN,GAAG,CAACO,OAAJ,CAAYC,OAAQ;AAC5B;AACA,EAAEP,GAAG,CAACQ,QAAS;AACf;AANmB,GAAD,CAAhB;AAOA,SAAO;AAACC,IAAAA,MAAM,EAAC,GAAR;AAAaC,IAAAA,MAAM,EAAE;AAArB,GAAP;AACD","sourcesContent":["import {APIHandler, ResultType, Request} from '../../src/apiHelpers'\nimport {createPost} from '../../src/discourse'\nexport type FeedbackResult = ResultType<typeof handler>\nexport type FeedbackMsg = {\n  feedback: string,\n  email?: string,\n  page: string\n  username?: string\n}\n\nexport default APIHandler(handler)\n\nasync function handler(req:Request) {\n  let msg = req.body as Partial<FeedbackMsg>\n  await createPost({topic_id: 231, raw: `\n${msg.username ? \"username: @\"+msg.username : \"\"}\n${msg.email ? \"email: \"+msg.email : \"\"}\npage: ${req.headers.referer}\n\n${msg.feedback}\n`})\n  return {status:200, result: \"\"} as const\n}\n"]},"metadata":{},"sourceType":"module"}