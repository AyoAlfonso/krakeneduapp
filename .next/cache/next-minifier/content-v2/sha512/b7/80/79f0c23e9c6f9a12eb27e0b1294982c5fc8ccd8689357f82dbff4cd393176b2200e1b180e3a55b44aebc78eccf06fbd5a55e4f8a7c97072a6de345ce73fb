{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{V5Xn:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/courses/[slug]/[id]/settings/templates/[templateId]\",function(){return n(\"uAbH\")}])},u5GO:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return d}));var r=n(\"wTIg\"),a=n(\"j+1P\"),i=n.n(a),o=n(\"BTHN\"),c=n(\"mirl\"),s=n(\"mB65\"),u=n(\"q1tI\"),p=n(\"9Hbq\"),l=n(\"Hzj1\");function d(e){var t=Object(s.c)(\"(max-width:640px)\"),n=Object(u.useState)(\"edit\"),r=n[0],a=n[1];return t?i()(p.b,{gap:4},[i()(\"div\",{style:{justifySelf:\"right\"}},[\"preview\"===r?i()(l.e,{onClick:function(){return a(\"edit\")}},\"edit\"):i()(l.e,{onClick:function(){return a(\"preview\")}},\"preview\")]),\"preview\"===r?i()(f,{},i()(o.a,{source:e.value})):i()(b,e)]):i()(g,[i()(b,e),i()(f,{height:e.height},i()(o.a,{source:e.value}))])}var g=Object(r.a)(\"div\",{target:\"efj9xzw0\"})({name:\"17v6q2h\",styles:\"display:grid;max-width:1200px;grid-template-columns:50% 50%;\"}),b=Object(r.a)(\"textarea\",{target:\"efj9xzw1\"})(\"box-sizing:border-box;height:\",(function(e){return e.height?e.height:512}),\"px;padding:16px;font-family:'Lato',sans-serif;border-color:\",c.d.grey55,\" !important;border:1px solid;border-radius:2px 0 0 2px;resize:none;font-size:inherit;line-height:inherit;\"),f=Object(r.a)(\"div\",{target:\"efj9xzw2\"})(\"overflow:scroll;box-sizing:border-box;padding:16px;font-size:16px;height:\",(function(e){return e.height?e.height:512}),\"px;background-color:\",c.d.accentPeach,\";border-radius:0 2px 2px 0;\")},uAbH:function(e,t,n){\"use strict\";n.r(t);var r=n(\"cpVT\"),a=n(\"vJKn\"),i=n.n(a),o=n(\"rg98\"),c=n(\"j+1P\"),s=n.n(c),u=n(\"20a2\"),p=n(\"0CBl\"),l=n(\"kacE\"),d=n(\"q1tI\"),g=n(\"9Hbq\"),b=n(\"rk+T\"),f=n(\"Hzj1\"),h=n(\"u5GO\");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=Object(u.useRouter)(),t=e.query.templateId,n=e.query.id,r=Object(p.c)(n?\"/api/courses/\".concat(n,\"/templates\"):void 0),a=r.data,c=r.mutate,m=a?a.find((function(e){return e.name===t})):void 0,w=Object(d.useState)(m||{name:\"\",content:\"\",type:\"prepopulated\",title:\"\"}),v=w[0],x=w[1],j=Object(d.useState)(\"normal\"),O=j[0],T=j[1];if(Object(d.useEffect)((function(){m&&x(m)}),[m]),\"new\"!==t&&void 0===a)return s()(l.a);var q=function(){var r=Object(o.a)(i.a.mark((function r(o){var s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),T(\"loading\"),\"new\"!==t){r.next=9;break}return r.next=5,Object(p.a)(\"/api/courses/\".concat(n,\"/templates\"),v);case 5:200===(s=r.sent).status&&a&&(a.push(s.result),c(a)),r.next=13;break;case 9:return r.next=11,Object(p.a)(\"/api/courses/\".concat(n,\"/templates/\").concat(t),v);case 11:200===(s=r.sent).status&&a&&(s.result.name!==t&&e.replace(\"/courses/[slug]/[id]/settings/templates/[templateId]\",\"/courses/\".concat(e.query.slug,\"/\").concat(e.query.id,\"/settings/templates/\").concat(s.result.name),{shallow:!0}),c(null===a||void 0===a?void 0:a.map((function(e){return 200===s.status&&m&&e.name===m.name?s.result:e}))));case 13:200===s.status&&(T(\"success\"),\"new\"===t&&e.push(\"/courses/[slug]/[id]/settings/templates/[templateId]\",\"/courses/\".concat(e.query.slug,\"/\").concat(e.query.id,\"/settings/templates/\").concat(s.result.name)));case 14:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),k=\"new\"!==t&&m&&!(v.name!==m.name||v.title!==m.title||v.content!==m.content||v.type!==m.type);return s()(g.b,{gap:32},[s()(g.b,{width:640},[s()(f.a,{href:\"/courses/[slug]/[id]/settings\",as:\"/courses/\".concat(e.query.slug,\"/\").concat(n,\"/settings\")},\"Settings\"),s()(\"h2\",\"new\"===e.query.templateId?\"Add New Template\":\"Edit Template\"),s()(\"p.big\",\"Create templates for topics to either be included in every new cohort's forum, or to be triggered by a facilitator at any time.\")]),s()(g.d,{onSubmit:q,gap:32},[s()(g.e,{width:400,gap:8},[s()(\"h4\",\"Template Name\"),s()(b.d,{disabled:(null===m||void 0===m?void 0:m.required)||void 0,type:\"text\",value:v.name,onChange:function(e){return x(y(y({},v),{},{name:e.currentTarget.value}))}})]),s()(g.e,{width:640,gap:8},[s()(\"h4\",\"Type\"),s()(b.f,{disabled:(null===m||void 0===m?void 0:m.required)||void 0,name:\"type\",selected:v.type,onChange:function(e){x(y(y({},v),{},{type:e}))},items:[{value:\"prepopulated\",component:s()(\"div\",[s()(\"h4\",\"Prepopulated\"),s()(\"span.textSecondary\",\"This topic will automatically be posted when each new cohort is created.\")])},{value:\"triggered\",component:s()(\"div\",[s()(\"h4\",\"Triggered\"),s()(\"span.textSecondary\",\"This topic will be posted when the facilitator triggers it from the cohort settings page.\")])}]})]),s()(g.e,{width:400,gap:8},[s()(g.b,{gap:4},[s()(\"h4\",\"Default Topic Title\"),s()(\"p.textSecondary\",\"Default title of the published topic. For a triggered template, you'll be able to edit before publishing.\")]),s()(b.d,{type:\"text\",value:v.title,onChange:function(e){return x(y(y({},v),{},{title:e.currentTarget.value}))}})]),s()(g.e,{gap:8},[s()(g.b,{gap:4},[s()(\"h4\",\"Default Topic Body\"),s()(g.b,{width:400},[s()(\"p.textSecondary\",\"Default body text of the published topic. For a triggered template, you'll be able to edit before publishing.\"),s()(\"p.textSecondary\",[\"You can use Markdown to format \",s()(\"a\",{href:\"https://commonmark.org/help/\"},\"(quick reference)\"),\".\"])])]),s()(h.a,{value:v.content,onChange:function(e){return x(y(y({},v),{},{content:e.currentTarget.value}))}})]),s()(g.b,{h:!0,gap:8,style:{justifySelf:\"end\"}},[s()(f.b,{disabled:k,onClick:function(e){e.preventDefault(),m&&x(m)}},\"Discard Changes\"),s()(f.f,{status:O,type:\"submit\",disabled:k},\"new\"===t?\"Create New Template\":\"Update Template\")])])])}}},[[\"V5Xn\",0,2,1,3,4,5,7]]]);","map":{"version":3,"sources":["static/chunks/pages/courses/[slug]/[id]/settings/templates/[templateId]-a7e123b8cbf1e92b4b7a.js"],"names":["_N_E","window","push","V5Xn","module","exports","__webpack_require__","__NEXT_P","u5GO","__webpack_exports__","d","EditorWithPreview","_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__","react_hyperscript__WEBPACK_IMPORTED_MODULE_1__","react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default","n","_Text__WEBPACK_IMPORTED_MODULE_2__","_Tokens__WEBPACK_IMPORTED_MODULE_3__","src_hooks__WEBPACK_IMPORTED_MODULE_4__","react__WEBPACK_IMPORTED_MODULE_5__","_Layout__WEBPACK_IMPORTED_MODULE_6__","_Button__WEBPACK_IMPORTED_MODULE_7__","props","mobile","Object","_useState","mode","setMode","gap","style","justifySelf","onClick","Preview","source","value","Editor","EditorPreviewContainer","height","target","name","styles","grey55","accentPeach","uAbH","r","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","react_hyperscript__WEBPACK_IMPORTED_MODULE_3__","react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default","next_router__WEBPACK_IMPORTED_MODULE_4__","src_apiHelpers__WEBPACK_IMPORTED_MODULE_5__","components_Loader__WEBPACK_IMPORTED_MODULE_6__","react__WEBPACK_IMPORTED_MODULE_7__","components_Layout__WEBPACK_IMPORTED_MODULE_8__","components_Form__WEBPACK_IMPORTED_MODULE_9__","components_Button__WEBPACK_IMPORTED_MODULE_10__","components_EditorWithPreview__WEBPACK_IMPORTED_MODULE_11__","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","i","arguments","length","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","router","templateId","query","courseId","id","_useApiData","concat","undefined","templates","data","mutate","template","find","t","content","type","title","formState","setFormState","_useState2","status","setStatus","onSubmit","_ref","a","mark","_callee","e","res","wrap","_context","prev","next","preventDefault","sent","result","replace","slug","shallow","map","stop","_x","this","disabled","width","href","as","required","onChange","currentTarget","selected","v","items","component","h"],"mappings":"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"},"name":"static/chunks/pages/courses/[slug]/[id]/settings/templates/[templateId]-a7e123b8cbf1e92b4b7a.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[28],{\n\n/***/ \"V5Xn\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/courses/[slug]/[id]/settings/templates/[templateId]\",\n        function () {\n          return __webpack_require__(\"uAbH\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"u5GO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EditorWithPreview; });\n/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wTIg\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"j+1P\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_hyperscript__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"BTHN\");\n/* harmony import */ var _Tokens__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"mirl\");\n/* harmony import */ var src_hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"mB65\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _Layout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"9Hbq\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"Hzj1\");\n\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\n\n\n\n\n\n\n\nfunction EditorWithPreview(props) {\n  var mobile = Object(src_hooks__WEBPACK_IMPORTED_MODULE_4__[/* useMediaQuery */ \"c\"])('(max-width:640px)');\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])('edit'),\n      mode = _useState[0],\n      setMode = _useState[1];\n\n  if (mobile) return react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(_Layout__WEBPACK_IMPORTED_MODULE_6__[/* Box */ \"b\"], {\n    gap: 4\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()('div', {\n    style: {\n      justifySelf: 'right'\n    }\n  }, [mode === 'preview' ? react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(_Button__WEBPACK_IMPORTED_MODULE_7__[/* LinkButton */ \"e\"], {\n    onClick: function onClick() {\n      return setMode('edit');\n    }\n  }, 'edit') : react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(_Button__WEBPACK_IMPORTED_MODULE_7__[/* LinkButton */ \"e\"], {\n    onClick: function onClick() {\n      return setMode('preview');\n    }\n  }, 'preview')]), mode === 'preview' ? react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(Preview, {}, react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(_Text__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n    source: props.value\n  })) : react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(Editor, props)]);\n  return react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(EditorPreviewContainer, [react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(Editor, props), react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(Preview, {\n    height: props.height\n  }, react_hyperscript__WEBPACK_IMPORTED_MODULE_1___default()(_Text__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n    source: props.value\n  }))]);\n}\n\nvar EditorPreviewContainer = /*#__PURE__*/Object(_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])('div', {\n  target: \"efj9xzw0\"\n})(true ? {\n  name: \"17v6q2h\",\n  styles: \"display:grid;max-width:1200px;grid-template-columns:50% 50%;\"\n} : undefined);\n\nvar Editor = /*#__PURE__*/Object(_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])('textarea', {\n  target: \"efj9xzw1\"\n})(\"box-sizing:border-box;height:\", function (props) {\n  return props.height ? props.height : 512;\n}, \"px;padding:16px;font-family:'Lato',sans-serif;border-color:\", _Tokens__WEBPACK_IMPORTED_MODULE_3__[/* colors */ \"d\"].grey55, \" !important;border:1px solid;border-radius:2px 0 0 2px;resize:none;font-size:inherit;line-height:inherit;\" + (true ? \"\" : undefined));\n\nvar Preview = /*#__PURE__*/Object(_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])('div', {\n  target: \"efj9xzw2\"\n})(\"overflow:scroll;box-sizing:border-box;padding:16px;font-size:16px;height:\", function (props) {\n  return props.height ? props.height : 512;\n}, \"px;background-color:\", _Tokens__WEBPACK_IMPORTED_MODULE_3__[/* colors */ \"d\"].accentPeach, \";border-radius:0 2px 2px 0;\" + (true ? \"\" : undefined));\n\n/***/ }),\n\n/***/ \"uAbH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"cpVT\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"j+1P\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_hyperscript__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var src_apiHelpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"0CBl\");\n/* harmony import */ var components_Loader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"kacE\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var components_Layout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"9Hbq\");\n/* harmony import */ var components_Form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"rk+T\");\n/* harmony import */ var components_Button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"Hzj1\");\n/* harmony import */ var components_EditorWithPreview__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"u5GO\");\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\nfunction TemplateSettings() {\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_4__[\"useRouter\"])();\n  var templateId = router.query.templateId;\n  var courseId = router.query.id;\n\n  var _useApiData = Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_5__[/* useApiData */ \"c\"])(courseId ? \"/api/courses/\".concat(courseId, \"/templates\") : undefined),\n      templates = _useApiData.data,\n      mutate = _useApiData.mutate;\n\n  var template = templates ? templates.find(function (t) {\n    return t.name === templateId;\n  }) : undefined;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_7__[\"useState\"])(template || {\n    name: '',\n    content: '',\n    type: 'prepopulated',\n    title: ''\n  }),\n      formState = _useState[0],\n      setFormState = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_7__[\"useState\"])('normal'),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_7__[\"useEffect\"])(function () {\n    if (template) setFormState(template);\n  }, [template]);\n  if (templateId !== 'new' && templates === undefined) return react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Loader__WEBPACK_IMPORTED_MODULE_6__[/* PageLoader */ \"a\"]);\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(e) {\n      var res;\n      return _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setStatus('loading');\n\n              if (!(templateId === 'new')) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 5;\n              return Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_5__[/* callApi */ \"a\"])(\"/api/courses/\".concat(courseId, \"/templates\"), formState);\n\n            case 5:\n              res = _context.sent;\n\n              if (res.status === 200 && templates) {\n                templates.push(res.result);\n                mutate(templates);\n              }\n\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_5__[/* callApi */ \"a\"])(\"/api/courses/\".concat(courseId, \"/templates/\").concat(templateId), formState);\n\n            case 11:\n              res = _context.sent;\n\n              if (res.status === 200 && templates) {\n                if (res.result.name !== templateId) {\n                  router.replace(\"/courses/[slug]/[id]/settings/templates/[templateId]\", \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/settings/templates/\").concat(res.result.name), {\n                    shallow: true\n                  });\n                }\n\n                mutate(templates === null || templates === void 0 ? void 0 : templates.map(function (t) {\n                  if (res.status === 200 && template && t.name === template.name) return res.result;\n                  return t;\n                }));\n              }\n\n            case 13:\n              if (res.status === 200) {\n                setStatus('success');\n                if (templateId === 'new') router.push(\"/courses/[slug]/[id]/settings/templates/[templateId]\", \"/courses/\".concat(router.query.slug, \"/\").concat(router.query.id, \"/settings/templates/\").concat(res.result.name));\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var disabled = templateId !== 'new' && template && !(formState.name !== template.name || formState.title !== template.title || formState.content !== template.content || formState.type !== template.type);\n  return react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], {\n    gap: 32\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], {\n    width: 640\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Button__WEBPACK_IMPORTED_MODULE_10__[/* BackButton */ \"a\"], {\n    href: \"/courses/[slug]/[id]/settings\",\n    as: \"/courses/\".concat(router.query.slug, \"/\").concat(courseId, \"/settings\")\n  }, 'Settings'), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h2', router.query.templateId === 'new' ? 'Add New Template' : \"Edit Template\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('p.big', \"Create templates for topics to either be included in every new cohort's forum, or to be triggered by a facilitator at any time.\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* FormBox */ \"d\"], {\n    onSubmit: onSubmit,\n    gap: 32\n  }, [// Template Name Input\n  react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* LabelBox */ \"e\"], {\n    width: 400,\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h4', \"Template Name\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Form__WEBPACK_IMPORTED_MODULE_9__[/* Input */ \"d\"], {\n    disabled: (template === null || template === void 0 ? void 0 : template.required) || undefined,\n    type: \"text\",\n    value: formState.name,\n    onChange: function onChange(e) {\n      return setFormState(_objectSpread(_objectSpread({}, formState), {}, {\n        name: e.currentTarget.value\n      }));\n    }\n  })]), // Template Type Input\n  react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* LabelBox */ \"e\"], {\n    width: 640,\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h4', \"Type\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Form__WEBPACK_IMPORTED_MODULE_9__[/* Radio */ \"f\"], {\n    disabled: (template === null || template === void 0 ? void 0 : template.required) || undefined,\n    name: \"type\",\n    selected: formState.type,\n    onChange: function onChange(v) {\n      setFormState(_objectSpread(_objectSpread({}, formState), {}, {\n        type: v\n      }));\n    },\n    items: [{\n      value: \"prepopulated\",\n      component: react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('div', [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h4', 'Prepopulated'), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('span.textSecondary', \"This topic will automatically be posted when each new cohort is created.\")])\n    }, {\n      value: \"triggered\",\n      component: react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('div', [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h4', \"Triggered\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('span.textSecondary', \"This topic will be posted when the facilitator triggers it from the cohort settings page.\")])\n    }]\n  })]), // Template Title Input\n  react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* LabelBox */ \"e\"], {\n    width: 400,\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], {\n    gap: 4\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h4', \"Default Topic Title\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('p.textSecondary', \"Default title of the published topic. For a triggered template, you'll be able to edit before publishing.\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Form__WEBPACK_IMPORTED_MODULE_9__[/* Input */ \"d\"], {\n    type: \"text\",\n    value: formState.title,\n    onChange: function onChange(e) {\n      return setFormState(_objectSpread(_objectSpread({}, formState), {}, {\n        title: e.currentTarget.value\n      }));\n    }\n  })]), // Template Body Input\n  react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* LabelBox */ \"e\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], {\n    gap: 4\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('h4', \"Default Topic Body\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], {\n    width: 400\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('p.textSecondary', \"Default body text of the published topic. For a triggered template, you'll be able to edit before publishing.\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('p.textSecondary', [\"You can use Markdown to format \", react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()('a', {\n    href: 'https://commonmark.org/help/'\n  }, \"(quick reference)\"), '.'])])]), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_EditorWithPreview__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n    value: formState.content,\n    onChange: function onChange(e) {\n      return setFormState(_objectSpread(_objectSpread({}, formState), {}, {\n        content: e.currentTarget.value\n      }));\n    }\n  })]), // Submit and Discard Changes Button\n  react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], {\n    h: true,\n    gap: 8,\n    style: {\n      justifySelf: 'end'\n    }\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Button__WEBPACK_IMPORTED_MODULE_10__[/* Destructive */ \"b\"], {\n    disabled: disabled,\n    onClick: function onClick(e) {\n      e.preventDefault();\n      if (template) setFormState(template);\n    }\n  }, \"Discard Changes\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_3___default()(components_Button__WEBPACK_IMPORTED_MODULE_10__[/* Primary */ \"f\"], {\n    status: status,\n    type: 'submit',\n    disabled: disabled\n  }, templateId === 'new' ? 'Create New Template' : \"Update Template\")])])]);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TemplateSettings);\n\n/***/ })\n\n},[[\"V5Xn\",0,2,1,3,4,5,7]]]);","inputSourceMap":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fcourses%2F%5Bslug%5D%2F%5Bid%5D%2Fsettings%2Ftemplates%2F%5BtemplateId%5D&absolutePagePath=private-next-pages%2Fcourses%2F%5Bslug%5D%2F%5Bid%5D%2Fsettings%2Ftemplates%2F%5BtemplateId%5D.ts!","/Users/ayooluwaalfonso/code/krakeneduapp/components/EditorWithPreview.ts","/Users/ayooluwaalfonso/code/krakeneduapp/pages/courses/[slug]/[id]/settings/templates/[templateId].ts"],"names":["EditorWithPreview","props","mobile","useMediaQuery","useState","mode","setMode","h","Box","gap","style","justifySelf","LinkButton","onClick","Preview","Text","source","value","Editor","EditorPreviewContainer","height","colors","grey55","accentPeach","TemplateSettings","router","useRouter","templateId","query","courseId","id","useApiData","undefined","templates","data","mutate","template","find","t","name","content","type","title","formState","setFormState","status","setStatus","useEffect","PageLoader","onSubmit","e","preventDefault","callApi","res","push","result","replace","slug","shallow","map","disabled","width","BackButton","href","as","FormBox","LabelBox","Input","required","onChange","currentTarget","Radio","selected","v","items","component","Destructive","Primary"],"mappings":"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","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/courses/[slug]/[id]/settings/templates/[templateId]\",\n        function () {\n          return require(\"private-next-pages/courses/[slug]/[id]/settings/templates/[templateId].ts\");\n        }\n      ]);\n    ","import h from 'react-hyperscript'\nimport styled from '@emotion/styled'\nimport Text from './Text'\nimport {colors} from './Tokens'\nimport { useMediaQuery } from 'src/hooks'\nimport { useState } from 'react'\nimport { Box } from './Layout'\nimport { LinkButton } from './Button'\n\nexport default function EditorWithPreview(props:{height?: number, value: string, onChange: (e:React.ChangeEvent<HTMLTextAreaElement>)=>void}) {\n  let mobile = useMediaQuery('(max-width:640px)')\n\n  let [mode, setMode] = useState<'edit'|'preview'>('edit')\n  if(mobile) return h(Box, {gap:4}, [\n    h('div', {style:{justifySelf: 'right'}}, [\n      mode === 'preview'\n        ? h(LinkButton, {onClick: ()=>setMode('edit')}, 'edit')\n        : h(LinkButton, {onClick: ()=>setMode('preview')}, 'preview'),\n    ]),\n    mode === 'preview'\n      ? h(Preview, {}, h(Text, {source: props.value}))\n      : h(Editor, props),\n  ])\n  return h(EditorPreviewContainer, [\n    h(Editor, props),\n    h(Preview, {height:props.height}, h(Text, {source: props.value}))\n  ])\n}\nlet EditorPreviewContainer = styled('div')`\ndisplay: grid;\nmax-width: 1200px;\ngrid-template-columns: 50% 50%;\n`\n\nlet Editor = styled('textarea')<{height?:number}>`\nbox-sizing: border-box;\nheight: ${props=>props.height ? props.height : 512}px;\npadding: 16px;\nfont-family: 'Lato', sans-serif;\nborder-color: ${colors.grey55} !important;\nborder: 1px solid;\nborder-radius: 2px 0 0 2px;\nresize: none;\nfont-size: inherit;\nline-height: inherit;\n`\n\nlet Preview = styled('div')<{height?:number}>`\noverflow: scroll;\nbox-sizing: border-box;\npadding: 16px;\nfont-size: 16px;\nheight: ${props=>props.height ? props.height : 512}px;\nbackground-color:${colors.accentPeach};\nborder-radius: 0 2px 2px 0;\n`\n","import h from 'react-hyperscript'\nimport { useRouter } from 'next/router'\nimport { useApiData, callApi } from 'src/apiHelpers'\nimport { GetTemplatesResult } from 'pages/api/courses/[id]/templates'\nimport { PageLoader } from 'components/Loader'\nimport { useState, useEffect } from 'react'\nimport { course_templates } from '@prisma/client'\nimport { Box, LabelBox, FormBox } from 'components/Layout'\nimport { Input, Radio } from 'components/Form'\nimport { Primary, BackButton, Destructive } from 'components/Button'\nimport {CreateTemplateMsg, CreateTemplateResult} from 'pages/api/courses/[id]/templates'\nimport { UpdateTemplateMsg, UpdateTemplateResult } from 'pages/api/courses/[id]/templates/[templateId]'\nimport EditorWithPreview from 'components/EditorWithPreview'\n\nfunction TemplateSettings() {\n  let router = useRouter()\n  let templateId = router.query.templateId\n  let courseId = router.query.id as string\n  let {data: templates, mutate }= useApiData<GetTemplatesResult>(courseId ? `/api/courses/${courseId}/templates` : undefined)\n  let template = templates ? templates.find(t=> t.name === templateId) : undefined\n\n  let [formState, setFormState] = useState<Omit<course_templates, 'course' | 'required'>>(template || {name: '', content:'', type: 'prepopulated', title: ''})\n  let [status, setStatus] = useState<'loading' | 'normal' |'success'>('normal')\n\n  useEffect(()=>{\n    if(template) setFormState(template)\n  }, [template])\n\n  if(templateId !=='new' && templates === undefined) return h(PageLoader)\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n    let res:CreateTemplateResult | UpdateTemplateResult\n    setStatus('loading')\n    if(templateId === 'new') {\n      res = await callApi<CreateTemplateMsg, CreateTemplateResult>(`/api/courses/${courseId}/templates`, formState)\n      if(res.status === 200 && templates) {\n        templates.push(res.result)\n        mutate(templates)\n      }\n    } else {\n      res = await callApi<UpdateTemplateMsg, UpdateTemplateResult>(`/api/courses/${courseId}/templates/${templateId}`, formState)\n      if(res.status === 200 && templates) {\n        if(res.result.name !== templateId) {\n          router.replace(`/courses/[slug]/[id]/settings/templates/[templateId]`,\n                      `/courses/${router.query.slug}/${router.query.id}/settings/templates/${res.result.name}`, {shallow: true})\n        }\n        mutate(templates?.map(t=>{\n          if(res.status === 200 && template && t.name===template.name) return res.result\n          return t\n        }))\n      }\n    }\n    if(res.status === 200) {\n      setStatus('success')\n      if(templateId === 'new') router.push(`/courses/[slug]/[id]/settings/templates/[templateId]`,\n                                           `/courses/${router.query.slug}/${router.query.id}/settings/templates/${res.result.name}`)\n    }\n  }\n\n  let disabled = templateId !== 'new' && template &&\n    !(formState.name !== template.name ||\n      formState.title !== template.title ||\n      formState.content !== template.content ||\n      formState.type !== template.type)\n\n  return h(Box, {gap: 32}, [\n    h(Box, {width: 640}, [\n      h(BackButton, {href: \"/courses/[slug]/[id]/settings\", as: `/courses/${router.query.slug}/${courseId}/settings`}, 'Settings'),\n      h('h2', router.query.templateId === 'new' ? 'Add New Template' : \"Edit Template\"),\n      h('p.big', `Create templates for topics to either be included in every new cohort's forum, or to be triggered by a facilitator at any time.`)\n    ]),\n    h(FormBox, {onSubmit, gap: 32}, [\n\n      // Template Name Input\n      h(LabelBox, {width: 400, gap: 8}, [\n        h('h4', \"Template Name\"),\n        h(Input, {\n          disabled: template?.required || undefined,\n          type: \"text\",\n          value: formState.name,\n          onChange: e => setFormState({...formState, name: e.currentTarget.value})\n        })\n      ]),\n\n      // Template Type Input\n      h(LabelBox, {width: 640, gap: 8}, [\n        h('h4', \"Type\"),\n        h(Radio, {\n          disabled: template?.required || undefined,\n          name: \"type\",\n          selected: formState.type,\n          onChange: (v)=>{\n            setFormState({...formState, type:v as typeof formState.type})\n          },\n          items: [\n            {value: \"prepopulated\", component: h('div', [\n              h('h4', 'Prepopulated'),\n              h('span.textSecondary', \"This topic will automatically be posted when each new cohort is created.\")\n            ])},\n            {value:\"triggered\", component: h('div', [\n              h('h4', \"Triggered\"),\n              h('span.textSecondary', \"This topic will be posted when the facilitator triggers it from the cohort settings page.\")\n            ])}\n          ] as const\n        })\n      ]),\n\n      // Template Title Input\n      h(LabelBox, {width: 400, gap: 8}, [\n        h(Box, {gap:4}, [\n          h('h4', \"Default Topic Title\"),\n          h('p.textSecondary', \"Default title of the published topic. For a triggered template, you'll be able to edit before publishing.\"),\n        ]),\n        h(Input, {\n          type: \"text\",\n          value: formState.title,\n          onChange: e => setFormState({...formState, title: e.currentTarget.value})\n        })\n      ]),\n\n      // Template Body Input\n      h(LabelBox, {gap: 8}, [\n        h(Box, {gap:4}, [\n          h('h4', \"Default Topic Body\"),\n          h(Box, {width: 400}, [\n            h('p.textSecondary', \"Default body text of the published topic. For a triggered template, you'll be able to edit before publishing.\"),\n            h('p.textSecondary', [\"You can use Markdown to format \", h('a', {href: 'https://commonmark.org/help/'}, \"(quick reference)\"), '.']),\n          ]),\n        ]),\n        h(EditorWithPreview, {\n          value: formState.content,\n          onChange: e=>setFormState({...formState, content: e.currentTarget.value})\n        }),\n      ]),\n\n      // Submit and Discard Changes Button\n      h(Box, {h: true, gap: 8, style:{justifySelf: 'end'}}, [\n        h(Destructive, {\n          disabled,\n          onClick: (e) => {\n            e.preventDefault()\n            if(template) setFormState(template)\n          }\n        }, \"Discard Changes\"),\n        h(Primary, {\n          status,\n          type: 'submit',\n          disabled\n        }, templateId === 'new' ? 'Create New Template' : \"Update Template\")\n      ])\n    ])\n  ])\n}\n\nexport default TemplateSettings\n"]}}