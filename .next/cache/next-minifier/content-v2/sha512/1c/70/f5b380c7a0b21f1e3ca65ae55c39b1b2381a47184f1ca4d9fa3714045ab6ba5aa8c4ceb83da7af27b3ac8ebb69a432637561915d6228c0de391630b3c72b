{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[69],{LAm1:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signup\",function(){return n(\"qygY\")}])},R1ly:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return s})),n.d(t,\"b\",(function(){return o}));var r=n(\"wTIg\"),a=n(\"q1tI\"),i=n(\"j+1P\"),u=n.n(i),s=Object(r.a)(\"img\",{target:\"e1gjxmdy1\"})(\"image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;display:block;border:none;height:\",(function(e){return e.height?e.height+\"px\":\"100px\"}),\";width:\",(function(e){return e.width?e.width+\"px\":\"100px\"}),\";\");function o(e){var t=Object(a.useState)(!1),n=t[0],r=t[1],i=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t;null!==(t=i.current)&&void 0!==t&&t.complete&&!n&&setTimeout((function(){return r(!0)}),e.startLoop)}),[]),n?u()(s,{src:e.src2,alt:e.alt}):u()(s,{ref:i,onLoad:function(){setTimeout((function(){return r(!0)}),e.startLoop)},src:e.src1,alt:e.alt})}},qygY:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"SignUpHeader\",(function(){return q}));var r=n(\"cpVT\"),a=n(\"vJKn\"),i=n.n(a),u=n(\"rg98\"),s=n(\"xvhg\"),o=n(\"wTIg\"),c=n(\"j+1P\"),l=n.n(c),p=n(\"q1tI\"),m=n(\"20a2\"),d=n(\"YFqc\"),f=n.n(d),g=n(\"9Hbq\"),h=n(\"rk+T\"),b=n(\"Hzj1\"),y=n(\"R1ly\"),v=n(\"5++N\"),w=n(\"0CBl\"),j=n(\"mB65\"),O=n(\"fdqv\");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=\"Create your account\",E=\"We're hyped for you to join the KrakenEdu community! Let's learn together.\",T=function(e){var t=Object(m.useRouter)(),n=Object(p.useState)(\"\"),r=n[0],a=n[1],o=Object(w.b)([r],(function(){setTimeout((function(){t.push(\"/dashboard\")}),3e3)})),c=Object(s.a)(o,2),d=c[0],v=c[1],j=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v(\"/api/signup/verify\",{key:r});case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){t.query.verifyEmail&&\"string\"===typeof t.query.verifyEmail&&v(\"/api/signup/verify\",{key:t.query.verifyEmail})}),[]),t.query.verifyEmail&&null===d?null:\"success\"===d?l()(g.b,{width:400,ma:!0,gap:16},[l()(\"h1\",\"All Done!\"),l()(\"p.big\",\"Click the button below if you're not redirected in a couple seconds\"),l()(f.a,{href:\"/dashboard\"},l()(\"a\",{},l()(b.f,\"Back to Krakenedu\")))]):l()(g.d,{onSubmit:j,width:400,ma:!0,gap:32},[l()(y.a,{src:\"/img/plane.gif\",alt:\"an animated gif of a paper airplane taking off\"}),l()(\"h1\",\"Verify your email\"),e.email?l()(g.b,{gap:8},[\"Sweet! We sent an email with a verification code to\",l()(h.c,{},l()(\"b\",e.email))]):null,l()(g.b,{gap:8},[l()(\"h4\",\"Copy the code there and submit it here:\"),l()(h.d,{spellCheck:!1,type:\"text\",value:r,onChange:function(e){return a(e.currentTarget.value.trim())}})]),\"error\"===d?l()(h.b,{},[\"Your email link is invalid or out of date, please try \",l()(f.a,{href:\"/signup\"},l()(\"a\",\"signing up again\")),\".\"]):null,l()(b.f,{type:\"submit\",status:d,style:{justifySelf:\"right\"}},\"Confirm your email\")])},q=Object(o.a)(\"div\",{target:\"e1qhha6s0\"})({name:\"1uaajjg\",styles:\"display:grid;grid-gap:16px;grid-template-columns:auto min-content;align-items:end;\"});t.default=function(){var e=Object(p.useState)({email:\"\",username:\"\",password:\"\",newsletter:!1}),t=e[0],n=e[1],r=Object(w.b)([t],(function(){return _.push(\"/signup?verifyEmail\")})),a=Object(s.a)(r,2),o=a[0],c=a[1],d=Object(p.useState)(null),x=d[0],P=d[1],C=Object(v.i)().data,_=Object(m.useRouter)();Object(p.useEffect)((function(){C&&_.push(\"/dashboard\")}),[C]),Object(j.a)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.username){e.next=2;break}return e.abrupt(\"return\",P(null));case 2:if(Object(O.h)(t.username)){e.next=4;break}return e.abrupt(\"return\",P(null));case 4:return e.next=6,Object(w.a)(\"/api/get/username/\"+t.username);case 6:404===e.sent.status?P(!0):P(!1);case 8:case\"end\":return e.stop()}}),e)}))),500,[t.username]);var L=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c(\"/api/signup/request\",t);case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return void 0!==_.query.verifyEmail?l()(T,{email:t.email,resendEmail:L}):l()(g.d,{onSubmit:L,width:400,ma:!0,gap:32},[l()(g.b,{gap:8},[l()(q,[l()(\"h1\",\"Sign Up\"),l()(y.b,{src1:\"/img/sailboat-1.gif\",src2:\"/img/sailboat-2.gif\",alt:\"an animated gif of a sailboat, boatin'\",startLoop:333})]),l()(\"p.big\",E),l()(\"p.textSecondary\",[\"Or \",l()(f.a,{href:\"/login\"},l()(\"a\",\"log in\")),\" with an existing account.\"])]),\"error\"===o?l()(h.b,{},l()(\"div\",[\"A user already exists with that email. Try \",l()(f.a,{href:\"/login\"},l()(\"a\",\"logging in\")),\".\"])):null,l()(g.e,{gap:8},[l()(\"div\",[l()(\"h4\",\"Username\"),l()(\"small.textSecondary\",\"Pick a unique username between 3-15 characters.\")]),l()(h.d,{type:\"text\",name:\"username\",required:!0,minLength:3,maxLength:15,value:t.username,onChange:function(e){n(k(k({},t),{},{username:e.currentTarget.value})),Object(O.h)(e.currentTarget.value||\"\")?e.currentTarget.setCustomValidity(\"\"):e.currentTarget.setCustomValidity(\"Your username must contain only letters, numbers, underscores, periods or dashes\")}}),t.username.length<3?null:Object(O.h)(t.username)?null===x?\"\":x?l()(\"span.accentSuccess\",\"Great! This username is available.\"):l()(\"span.accentRed\",\"Sorry, that username is taken.\"):l()(\"span.accentRed\",\"Your username must contain only letters, numbers, underscores, periods or dashes\")]),l()(g.e,{gap:8},[l()(\"div\",[l()(\"h4\",\"Your Email\"),l()(\"small.textSecondary\",\"You'll have to verify this in a moment.\")]),l()(h.d,{type:\"email\",name:\"email\",required:!0,value:t.email,onChange:function(e){return n(k(k({},t),{},{email:e.currentTarget.value}))}})]),l()(g.e,{gap:8},[l()(\"div\",[l()(\"h4\",\"Password\"),l()(\"small.textSecondary\",\"Minimum length 8 characters\")]),l()(h.e,{name:\"new-password\",required:!0,minLength:8,value:t.password,onChange:function(e){return n(k(k({},t),{},{password:e.currentTarget.value}))}})]),l()(g.e,{gap:8},[l()(\"div\",[l()(\"h4\",\"Get email updates?\"),l()(\"small.textSecondary\",\"We send out occasional updates on new courses and features. We'll never spam or share your email.\")]),l()(h.a,[l()(h.d,{type:\"checkbox\",name:\"newsletter\",checked:t.newsletter,onChange:function(e){n(k(k({},t),{},{newsletter:e.currentTarget.checked}))}}),\"Sure! Gimme the updates.\"])]),l()(b.f,{status:o,style:{justifySelf:\"end\"},type:\"submit\"},S)])}}},[[\"LAm1\",0,2,1,3,4]]]);","map":{"version":3,"sources":["static/chunks/pages/signup-cbf2f03f6dc86a960e23.js"],"names":["_N_E","window","push","LAm1","module","exports","__webpack_require__","__NEXT_P","R1ly","__webpack_exports__","d","AccentImg","HalfLoopImg","_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react_hyperscript__WEBPACK_IMPORTED_MODULE_2__","react_hyperscript__WEBPACK_IMPORTED_MODULE_2___default","n","Object","target","props","height","width","_useState","looping","setLooping","imageRef","_imageRef$current","current","complete","setTimeout","startLoop","src","src2","alt","ref","onLoad","src1","qygY","r","SignUpHeader","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","_emotion_styled_base__WEBPACK_IMPORTED_MODULE_4__","react_hyperscript__WEBPACK_IMPORTED_MODULE_5__","react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default","react__WEBPACK_IMPORTED_MODULE_6__","next_router__WEBPACK_IMPORTED_MODULE_7__","next_link__WEBPACK_IMPORTED_MODULE_8__","next_link__WEBPACK_IMPORTED_MODULE_8___default","components_Layout__WEBPACK_IMPORTED_MODULE_9__","components_Form__WEBPACK_IMPORTED_MODULE_10__","components_Button__WEBPACK_IMPORTED_MODULE_11__","components_Images__WEBPACK_IMPORTED_MODULE_12__","src_data__WEBPACK_IMPORTED_MODULE_13__","src_apiHelpers__WEBPACK_IMPORTED_MODULE_14__","src_hooks__WEBPACK_IMPORTED_MODULE_15__","src_utils__WEBPACK_IMPORTED_MODULE_16__","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","COPY","VerifyEmail","router","_useState3","setKey","_useApi3","_useApi4","status","callSignupVerify","onSubmit","_ref3","a","mark","_callee3","e","wrap","_context3","prev","next","preventDefault","stop","_x2","this","query","verifyEmail","ma","gap","href","email","spellCheck","type","value","onChange","currentTarget","trim","style","justifySelf","name","styles","username","password","newsletter","formData","setFormData","_useApi","_useApi2","callSignupRequest","_useState2","usernameValid","setUsernameValid","user","data","_callee","_context","abrupt","sent","_ref2","_callee2","_context2","_x","undefined","resendEmail","required","minLength","maxLength","setCustomValidity","checked"],"mappings":"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"},"name":"static/chunks/pages/signup-cbf2f03f6dc86a960e23.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[69],{\n\n/***/ \"LAm1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/signup\",\n        function () {\n          return __webpack_require__(\"qygY\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"R1ly\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export TitleImg */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return AccentImg; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return HalfLoopImg; });\n/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wTIg\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"j+1P\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_hyperscript__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar TitleImg = /*#__PURE__*/Object(_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])('img', {\n  target: \"e1gjxmdy0\"\n})(\"image-rendering:pixelated;image-rendering:crisp-edges;display:block;border:2px solid;height:\", function (props) {\n  return props.height ? props.height + 'px' : 'auto';\n}, \";width:\", function (props) {\n  return props.width;\n}, \"px;\" + (true ? \"\" : undefined));\nvar AccentImg = /*#__PURE__*/Object(_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])('img', {\n  target: \"e1gjxmdy1\"\n})(\"image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;display:block;border:none;height:\", function (props) {\n  return props.height ? props.height + 'px' : '100px';\n}, \";width:\", function (props) {\n  return props.width ? props.width + 'px' : '100px';\n}, \";\" + (true ? \"\" : undefined));\nfunction HalfLoopImg(props) {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      looping = _useState[0],\n      setLooping = _useState[1];\n\n  var imageRef = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(null);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var _imageRef$current;\n\n    if ((_imageRef$current = imageRef.current) !== null && _imageRef$current !== void 0 && _imageRef$current.complete && !looping) {\n      setTimeout(function () {\n        return setLooping(true);\n      }, props.startLoop);\n    }\n  }, []);\n\n  if (!looping) {\n    return react_hyperscript__WEBPACK_IMPORTED_MODULE_2___default()(AccentImg, {\n      ref: imageRef,\n      onLoad: function onLoad() {\n        setTimeout(function () {\n          return setLooping(true);\n        }, props.startLoop);\n      },\n      src: props.src1,\n      alt: props.alt\n    });\n  }\n\n  return react_hyperscript__WEBPACK_IMPORTED_MODULE_2___default()(AccentImg, {\n    src: props.src2,\n    alt: props.alt\n  });\n}\n\n/***/ }),\n\n/***/ \"qygY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SignUpHeader\", function() { return SignUpHeader; });\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"cpVT\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"xvhg\");\n/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"wTIg\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"j+1P\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_hyperscript__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var components_Layout__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"9Hbq\");\n/* harmony import */ var components_Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"rk+T\");\n/* harmony import */ var components_Button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"Hzj1\");\n/* harmony import */ var components_Images__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"R1ly\");\n/* harmony import */ var src_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"5++N\");\n/* harmony import */ var src_apiHelpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"0CBl\");\n/* harmony import */ var src_hooks__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"mB65\");\n/* harmony import */ var src_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"fdqv\");\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar COPY = {\n  submitButton: \"Create your account\",\n  headerDescription: \"We're hyped for you to join the KrakenEdu community! Let's learn together.\"\n};\n\nvar Signup = function Signup() {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useState\"])({\n    email: '',\n    username: '',\n    password: '',\n    newsletter: false\n  }),\n      formData = _useState[0],\n      setFormData = _useState[1];\n\n  var _useApi = Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_14__[/* useApi */ \"b\"])([formData], function () {\n    return router.push('/signup?verifyEmail');\n  }),\n      _useApi2 = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useApi, 2),\n      status = _useApi2[0],\n      callSignupRequest = _useApi2[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useState\"])(null),\n      usernameValid = _useState2[0],\n      setUsernameValid = _useState2[1];\n\n  var _useUserData = Object(src_data__WEBPACK_IMPORTED_MODULE_13__[/* useUserData */ \"i\"])(),\n      user = _useUserData.data;\n\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_7__[\"useRouter\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useEffect\"])(function () {\n    if (user) router.push('/dashboard');\n  }, [user]);\n  Object(src_hooks__WEBPACK_IMPORTED_MODULE_15__[/* useDebouncedEffect */ \"a\"])( /*#__PURE__*/Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n    var res;\n    return _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (formData.username) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", setUsernameValid(null));\n\n          case 2:\n            if (Object(src_utils__WEBPACK_IMPORTED_MODULE_16__[/* usernameValidate */ \"h\"])(formData.username)) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", setUsernameValid(null));\n\n          case 4:\n            _context.next = 6;\n            return Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_14__[/* callApi */ \"a\"])('/api/get/username/' + formData.username);\n\n          case 6:\n            res = _context.sent;\n            if (res.status === 404) setUsernameValid(true);else setUsernameValid(false);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), 500, [formData.username]);\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(e) {\n      return _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.next = 3;\n              return callSignupRequest('/api/signup/request', formData);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  if (router.query.verifyEmail !== undefined) {\n    return react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(VerifyEmail, {\n      email: formData.email,\n      resendEmail: onSubmit\n    });\n  }\n\n  return react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* FormBox */ \"d\"], {\n    onSubmit: onSubmit,\n    width: 400,\n    ma: true,\n    gap: 32\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* Box */ \"b\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(SignUpHeader, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h1', 'Sign Up'), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Images__WEBPACK_IMPORTED_MODULE_12__[/* HalfLoopImg */ \"b\"], {\n    src1: '/img/sailboat-1.gif',\n    src2: '/img/sailboat-2.gif',\n    alt: \"an animated gif of a sailboat, boatin'\",\n    startLoop: 333\n  })]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('p.big', COPY.headerDescription), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('p.textSecondary', ['Or ', react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(next_link__WEBPACK_IMPORTED_MODULE_8___default.a, {\n    href: \"/login\"\n  }, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('a', 'log in')), ' with an existing account.'])]), status === 'error' ? react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Error */ \"b\"], {}, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('div', [\"A user already exists with that email. Try \", react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(next_link__WEBPACK_IMPORTED_MODULE_8___default.a, {\n    href: '/login'\n  }, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('a', 'logging in')), '.'])) : null, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* LabelBox */ \"e\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('div', [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h4', \"Username\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('small.textSecondary', \"Pick a unique username between 3-15 characters.\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Input */ \"d\"], {\n    type: 'text',\n    name: \"username\",\n    required: true,\n    minLength: 3,\n    maxLength: 15,\n    value: formData.username,\n    onChange: function onChange(e) {\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        username: e.currentTarget.value\n      }));\n\n      if (!Object(src_utils__WEBPACK_IMPORTED_MODULE_16__[/* usernameValidate */ \"h\"])(e.currentTarget.value || '')) {\n        e.currentTarget.setCustomValidity('Your username must contain only letters, numbers, underscores, periods or dashes');\n      } else {\n        e.currentTarget.setCustomValidity('');\n      }\n    }\n  }), formData.username.length < 3 ? null : !Object(src_utils__WEBPACK_IMPORTED_MODULE_16__[/* usernameValidate */ \"h\"])(formData.username) ? react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('span.accentRed', 'Your username must contain only letters, numbers, underscores, periods or dashes') : usernameValid === null ? '' : usernameValid ? react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('span.accentSuccess', 'Great! This username is available.') : react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('span.accentRed', \"Sorry, that username is taken.\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* LabelBox */ \"e\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('div', [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h4', \"Your Email\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('small.textSecondary', \"You'll have to verify this in a moment.\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Input */ \"d\"], {\n    type: 'email',\n    name: 'email',\n    required: true,\n    value: formData.email,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        email: e.currentTarget.value\n      }));\n    }\n  })]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* LabelBox */ \"e\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(\"div\", [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h4', \"Password\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('small.textSecondary', \"Minimum length 8 characters\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* PasswordInput */ \"e\"], {\n    name: \"new-password\",\n    required: true,\n    minLength: 8,\n    value: formData.password,\n    onChange: function onChange(e) {\n      return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        password: e.currentTarget.value\n      }));\n    }\n  })]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* LabelBox */ \"e\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('div', [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h4', \"Get email updates?\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('small.textSecondary', \"We send out occasional updates on new courses and features. We'll never spam or share your email.\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* CheckBox */ \"a\"], [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Input */ \"d\"], {\n    type: 'checkbox',\n    name: 'newsletter',\n    checked: formData.newsletter,\n    onChange: function onChange(e) {\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        newsletter: e.currentTarget.checked\n      }));\n    }\n  }), \"Sure! Gimme the updates.\"])]), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Button__WEBPACK_IMPORTED_MODULE_11__[/* Primary */ \"f\"], {\n    status: status,\n    style: {\n      justifySelf: 'end'\n    },\n    type: 'submit'\n  }, COPY.submitButton)]);\n};\n\nvar VerifyEmail = function VerifyEmail(props) {\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_7__[\"useRouter\"])();\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useState\"])(''),\n      key = _useState3[0],\n      setKey = _useState3[1];\n\n  var _useApi3 = Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_14__[/* useApi */ \"b\"])([key], function () {\n    setTimeout(function () {\n      router.push('/dashboard');\n    }, 3000);\n  }),\n      _useApi4 = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useApi3, 2),\n      status = _useApi4[0],\n      callSignupVerify = _useApi4[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref3 = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(e) {\n      return _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              _context3.next = 3;\n              return callSignupVerify('/api/signup/verify', {\n                key: key\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onSubmit(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  Object(react__WEBPACK_IMPORTED_MODULE_6__[\"useEffect\"])(function () {\n    if (router.query.verifyEmail && typeof router.query.verifyEmail === 'string') {\n      callSignupVerify('/api/signup/verify', {\n        key: router.query.verifyEmail\n      });\n    }\n  }, []);\n  if (router.query.verifyEmail && status === null) return null;\n  if (status === 'success') return react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* Box */ \"b\"], {\n    width: 400,\n    ma: true,\n    gap: 16\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(\"h1\", \"All Done!\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(\"p.big\", \"Click the button below if you're not redirected in a couple seconds\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(next_link__WEBPACK_IMPORTED_MODULE_8___default.a, {\n    href: \"/dashboard\"\n  }, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(\"a\", {}, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Button__WEBPACK_IMPORTED_MODULE_11__[/* Primary */ \"f\"], \"Back to Krakenedu\")))]);\n  return react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* FormBox */ \"d\"], {\n    onSubmit: onSubmit,\n    width: 400,\n    ma: true,\n    gap: 32\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Images__WEBPACK_IMPORTED_MODULE_12__[/* AccentImg */ \"a\"], {\n    src: '/img/plane.gif',\n    alt: \"an animated gif of a paper airplane taking off\"\n  }), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h1', 'Verify your email'), props.email ? react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* Box */ \"b\"], {\n    gap: 8\n  }, [\"Sweet! We sent an email with a verification code to\", react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Info */ \"c\"], {}, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('b', props.email))]) : null, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Layout__WEBPACK_IMPORTED_MODULE_9__[/* Box */ \"b\"], {\n    gap: 8\n  }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('h4', \"Copy the code there and submit it here:\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Input */ \"d\"], {\n    spellCheck: false,\n    type: 'text',\n    value: key,\n    onChange: function onChange(e) {\n      return setKey(e.currentTarget.value.trim());\n    }\n  })]), status === 'error' ? react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Error */ \"b\"], {}, ['Your email link is invalid or out of date, please try ', react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(next_link__WEBPACK_IMPORTED_MODULE_8___default.a, {\n    href: '/signup'\n  }, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()('a', 'signing up again')), '.']) : null, react_hyperscript__WEBPACK_IMPORTED_MODULE_5___default()(components_Button__WEBPACK_IMPORTED_MODULE_11__[/* Primary */ \"f\"], {\n    type: 'submit',\n    status: status,\n    style: {\n      justifySelf: 'right'\n    }\n  }, \"Confirm your email\")]);\n};\n\nvar SignUpHeader = /*#__PURE__*/Object(_emotion_styled_base__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])('div', {\n  target: \"e1qhha6s0\"\n})(true ? {\n  name: \"1uaajjg\",\n  styles: \"display:grid;grid-gap:16px;grid-template-columns:auto min-content;align-items:end;\"\n} : undefined);\n/* harmony default export */ __webpack_exports__[\"default\"] = (Signup);\n\n/***/ })\n\n},[[\"LAm1\",0,2,1,3,4]]]);","inputSourceMap":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fsignup&absolutePagePath=private-next-pages%2Fsignup.ts!","/Users/ayooluwaalfonso/code/krakeneduapp/components/Images.ts","/Users/ayooluwaalfonso/code/krakeneduapp/pages/signup.ts"],"names":["TitleImg","props","height","width","AccentImg","HalfLoopImg","useState","looping","setLooping","imageRef","useRef","useEffect","current","complete","setTimeout","startLoop","h","ref","onLoad","src","src1","alt","src2","COPY","submitButton","headerDescription","Signup","email","username","password","newsletter","formData","setFormData","useApi","router","push","status","callSignupRequest","usernameValid","setUsernameValid","useUserData","user","data","useRouter","useDebouncedEffect","usernameValidate","callApi","res","onSubmit","e","preventDefault","query","verifyEmail","undefined","VerifyEmail","resendEmail","FormBox","ma","gap","Box","SignUpHeader","Link","href","Error","LabelBox","Input","type","name","required","minLength","maxLength","value","onChange","currentTarget","setCustomValidity","length","PasswordInput","CheckBox","checked","Primary","style","justifySelf","key","setKey","callSignupVerify","Info","spellCheck","trim"],"mappings":"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","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/signup\",\n        function () {\n          return require(\"private-next-pages/signup.ts\");\n        }\n      ]);\n    ","import styled from '@emotion/styled'\nimport { useState, useEffect, useRef } from 'react'\nimport h from 'react-hyperscript'\n\nexport let TitleImg = styled('img')<{height?: number, width: number}>`\nimage-rendering: pixelated;\nimage-rendering: crisp-edges;\ndisplay: block;\nborder: 2px solid;\nheight: ${props=> props.height ? props.height +'px' : 'auto'};\nwidth: ${props=> props.width}px;\n`\n\nexport let AccentImg = styled('img')<{height?: number, width?: number}>`\nimage-rendering: pixelated;\nimage-rendering: -moz-crisp-edges;\nimage-rendering: crisp-edges;\ndisplay: block;\nborder: none;\nheight: ${props=> props.height ? props.height +'px' : '100px'};\nwidth: ${props=> props.width ? props.width +'px' : '100px'};\n`\n\nexport function HalfLoopImg(props:\n    {\n        src1:string,\n        src2:string,\n        alt:string,\n        startLoop:number,\n    }) {\n    let [looping, setLooping] = useState(false)\n    let imageRef = useRef<HTMLImageElement>(null)\n    useEffect(()=> {\n      if(imageRef.current?.complete && !looping) {\n        setTimeout(()=>setLooping(true), props.startLoop)\n      }\n    }, [])\n  \n    if(!looping) {\n      return h(AccentImg, {ref: imageRef, onLoad: () => {\n        setTimeout(()=>setLooping(true), props.startLoop)\n      }, src: props.src1, alt: props.alt })\n    }\n    return h(AccentImg, {src: props.src2, alt: props.alt })\n  }","import h from 'react-hyperscript'\nimport { useState, useEffect } from 'react'\nimport {useRouter} from 'next/router'\nimport Link from 'next/link'\n\nimport { Box, LabelBox, FormBox} from 'components/Layout'\nimport { Input, Error, Info, CheckBox, PasswordInput} from 'components/Form'\nimport { Primary } from 'components/Button'\nimport {AccentImg, HalfLoopImg} from 'components/Images'\nimport { useUserData } from 'src/data'\nimport { callApi, useApi } from 'src/apiHelpers'\nimport { useDebouncedEffect} from 'src/hooks'\nimport { VerifyEmailMsg, SignupMsg, VerifyEmailResponse, SignupResponse} from 'pages/api/signup/[action]'\nimport { CheckUsernameResult } from 'pages/api/get/[...item]'\nimport styled from '@emotion/styled'\nimport { usernameValidate } from 'src/utils'\n\nconst COPY = {\n  submitButton: \"Create your account\",\n  headerDescription:\n    \"We're hyped for you to join the KrakenEdu community! Let's learn together.\",\n};\n\nconst Signup = () => {\n  let [formData, setFormData] = useState({\n    email:'',\n    username: '',\n    password:'',\n    newsletter: false,\n  })\n\n  let [status, callSignupRequest] = useApi<SignupMsg, SignupResponse>([formData], ()=> router.push('/signup?verifyEmail'))\n  let [usernameValid, setUsernameValid] = useState<null | boolean>(null)\n  let {data:user} = useUserData()\n  let router = useRouter()\n\n  useEffect(()=>{if(user) router.push('/dashboard')}, [user])\n  useDebouncedEffect(async ()=>{\n    if(!formData.username) return setUsernameValid(null)\n    if(!usernameValidate(formData.username)) return setUsernameValid(null)\n    let res = await callApi<null, CheckUsernameResult>('/api/get/username/'+formData.username)\n    if(res.status===404) setUsernameValid(true)\n    else setUsernameValid(false)\n  }, 500, [formData.username])\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n    await callSignupRequest('/api/signup/request', formData)\n  }\n\n  if(router.query.verifyEmail !== undefined) {\n    return h(VerifyEmail, {email: formData.email, resendEmail: onSubmit})\n  }\n\n  return h(FormBox, {onSubmit, width: 400, ma: true, gap: 32}, [\n    h(Box, {gap:8}, [\n      h(SignUpHeader, [\n        h('h1', 'Sign Up'),\n        h(HalfLoopImg, {\n          src1: '/img/sailboat-1.gif',\n          src2: '/img/sailboat-2.gif',\n          alt: \"an animated gif of a sailboat, boatin'\",\n          startLoop: 333,\n        }),\n      ]),\n      h('p.big', COPY.headerDescription),\n      h('p.textSecondary', ['Or ', h(Link, {href:\"/login\"}, h('a', 'log in')), ' with an existing account.'])\n    ]),\n    status === 'error' ? h(Error, {}, h('div', [\n      \"A user already exists with that email. Try \", h(Link,{href:'/login'}, h('a', 'logging in')),\n      '.'\n    ])) : null,\n    h(LabelBox, {gap:8},[\n      h('div', [\n        h('h4', \"Username\"),\n        h('small.textSecondary', \"Pick a unique username between 3-15 characters.\"),\n      ]),\n      h(Input, {\n        type: 'text',\n        name: \"username\",\n        required: true,\n        minLength: 3,\n        maxLength: 15,\n        value: formData.username,\n        onChange: (e)=> {\n          setFormData({...formData, username:e.currentTarget.value})\n          if(!usernameValidate(e.currentTarget.value || '')){\n            e.currentTarget.setCustomValidity('Your username must contain only letters, numbers, underscores, periods or dashes')\n          }\n          else {\n            e.currentTarget.setCustomValidity('')\n          }\n        }}),\n      formData.username.length < 3 ? null :\n        !usernameValidate(formData.username) ? h('span.accentRed', 'Your username must contain only letters, numbers, underscores, periods or dashes') :\n        usernameValid === null\n        ? ''\n        : usernameValid ? h('span.accentSuccess', 'Great! This username is available.') : h('span.accentRed', \"Sorry, that username is taken.\")\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('div', [\n        h('h4', \"Your Email\"),\n        h('small.textSecondary', \"You'll have to verify this in a moment.\"),\n      ]),\n      h(Input, {type: 'email',\n                name: 'email',\n                required: true,\n                value: formData.email,\n                onChange: (e)=> setFormData({...formData, email:e.currentTarget.value})})\n    ]),\n    h(LabelBox, {gap:8}, [\n      h(\"div\", [\n        h('h4', \"Password\"),\n        h('small.textSecondary', \"Minimum length 8 characters\"),\n      ]),\n      h(PasswordInput, {\n                name: \"new-password\",\n                required: true,\n                minLength: 8,\n                value: formData.password,\n                onChange: (e)=> setFormData({...formData, password:e.currentTarget.value})})\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('div', [\n        h('h4', \"Get email updates?\"),\n        h('small.textSecondary', \"We send out occasional updates on new courses and features. We'll never spam or share your email.\"),\n      ]),\n      h(CheckBox, [\n        h(Input, {type: 'checkbox', name: 'newsletter', checked: formData.newsletter, onChange: e=> {\n          setFormData({...formData, newsletter: e.currentTarget.checked})\n        }}),\n        \"Sure! Gimme the updates.\"\n      ]),\n    ]),\n    h(Primary, {status, style: {justifySelf: 'end'}, type: 'submit'}, COPY.submitButton),\n  ])\n}\n\nconst VerifyEmail = (props: {email?:string, resendEmail: any}) =>  {\n  let router = useRouter()\n  let [key, setKey] = useState('')\n  let [status, callSignupVerify] = useApi<VerifyEmailMsg, VerifyEmailResponse>([key], ()=>{\n    setTimeout(()=>{\n      router.push('/dashboard')\n    }, 3000)\n  })\n\n  const onSubmit = async (e: React.FormEvent)=>{\n    e.preventDefault()\n    await callSignupVerify('/api/signup/verify', {key})\n  }\n\n  useEffect(()=>{\n    if(router.query.verifyEmail && typeof router.query.verifyEmail === 'string') {\n      callSignupVerify('/api/signup/verify', {key:router.query.verifyEmail})\n    }\n  }, [])\n\n  if(router.query.verifyEmail && status === null) return null\n\n  if(status === 'success') return h(Box, { width: 400, ma: true, gap: 16 }, [\n    h(\"h1\", \"All Done!\"),\n    h(\n      \"p.big\",\n      \"Click the button below if you're not redirected in a couple seconds\"\n    ),\n    h(\n      Link,\n      { href: \"/dashboard\" },\n      h(\"a\", {}, h(Primary, \"Back to Krakenedu\"))\n    ),\n  ]);\n\n  return h(FormBox, {onSubmit, width: 400, ma: true, gap: 32}, [\n    h(AccentImg, {src: '/img/plane.gif', alt: \"an animated gif of a paper airplane taking off\" }),\n    h('h1', 'Verify your email'),\n    props.email ? h(Box, {gap: 8}, [\n      `Sweet! We sent an email with a verification code to`,\n      h(Info, {}, h('b', props.email)),\n    ]) : null,\n    h(Box, {gap: 8}, [\n      h('h4', `Copy the code there and submit it here:`),\n      h(Input, {\n        spellCheck: false,\n        type: 'text',\n        value: key,\n        onChange: e=>setKey(e.currentTarget.value.trim())\n      })\n    ]),\n    status === 'error' ? h(Error, {}, [\n      'Your email link is invalid or out of date, please try ',\n      h(Link, {href:'/signup'}, h('a', 'signing up again' )), '.'\n    ]) : null,\n    h(Primary, {type: 'submit', status, style:{justifySelf: 'right'}}, \"Confirm your email\")\n  ])\n}\n\nexport const SignUpHeader = styled('div') `\n  display:grid;\n  grid-gap:16px;\n  grid-template-columns:  auto min-content;\n  align-items: end;\n`\n\nexport default Signup\n"]}}