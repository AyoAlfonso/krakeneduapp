{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[68],{oT8e:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/resetPassword\",function(){return t(\"ze8x\")}])},ze8x:function(e,r,t){\"use strict\";t.r(r);var n=t(\"cpVT\"),s=t(\"vJKn\"),o=t.n(s),a=t(\"rg98\"),c=t(\"xvhg\"),u=t(\"j+1P\"),i=t.n(u),p=t(\"q1tI\"),w=t(\"20a2\"),f=t(\"YFqc\"),d=t.n(f),b=t(\"9Hbq\"),l=t(\"Hzj1\"),h=t(\"rk+T\"),y=t(\"0CBl\");function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){Object(n.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var j={header:\"Reset Password\",button:\"Reset Password\",passwordInput:\"New Password\",confirmInput:\"Confirm Password\",error:i()(h.b,[\"Looks like that link is expired or invalid, please try to \",i()(d.a,{href:\"/login?reset\"},i()(\"a\",\"reset your password\")),\" again\"])};r.default=function(){var e=Object(p.useState)({password:\"\",confirmPassword:\"\"}),r=e[0],t=e[1],n=Object(y.b)([r]),s=Object(c.a)(n,2),u=s[0],f=s[1],O=Object(w.useRouter)(),P=O.query.key;if(Object(p.useEffect)((function(){\"success\"===u&&setTimeout((function(){O.push(\"/login\")}),3500)})),!P||\"string\"!==typeof P)return j.error;var m=function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f(\"/api/user/resetPassword/reset\",{key:P,password:r.password});case 3:case\"end\":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();switch(u){case\"normal\":case\"loading\":return i()(b.d,{onSubmit:m,width:400,ma:!0},[i()(\"h1\",j.header),i()(b.e,{gap:8},[i()(\"div\",[i()(\"h4\",j.passwordInput),i()(\"small.textSecondary\",\"Minimum length 8 characters\")]),i()(h.e,{type:\"password\",minLength:8,value:r.password,onChange:function(e){return t(g(g({},r),{},{password:e.target.value}))}})]),i()(l.f,{type:\"submit\",status:u,style:{justifySelf:\"end\"}},\"Submit\")]);case\"success\":return i()(b.b,[i()(\"h1\",\"Great\"),i()(\"p\",\"You can now log in with your new password\"),i()(d.a,{href:\"/login\"},i()(\"a\",i()(l.f,\"Log In\")))]);case\"error\":return j.error}}}},[[\"oT8e\",0,2,1,3,4]]]);","map":{"version":3,"sources":["static/chunks/pages/resetPassword-5c111c9ea64d86982342.js"],"names":["_N_E","window","push","oT8e","module","exports","__webpack_require__","__NEXT_P","ze8x","__webpack_exports__","r","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","n","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","react_hyperscript__WEBPACK_IMPORTED_MODULE_4__","react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default","react__WEBPACK_IMPORTED_MODULE_5__","next_router__WEBPACK_IMPORTED_MODULE_6__","next_link__WEBPACK_IMPORTED_MODULE_7__","next_link__WEBPACK_IMPORTED_MODULE_7___default","components_Layout__WEBPACK_IMPORTED_MODULE_8__","components_Button__WEBPACK_IMPORTED_MODULE_9__","components_Form__WEBPACK_IMPORTED_MODULE_10__","src_apiHelpers__WEBPACK_IMPORTED_MODULE_11__","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","COPY","header","button","passwordInput","confirmInput","error","a","href","_useState","password","confirmPassword","formData","setFormData","_useApi","_useApi2","status","callResetPassword","router","query","setTimeout","onSubmit","_ref","mark","_callee","e","wrap","_context","prev","next","preventDefault","stop","_x","this","width","ma","gap","type","minLength","value","onChange","style","justifySelf"],"mappings":"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"},"name":"static/chunks/pages/resetPassword-5c111c9ea64d86982342.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[68],{\n\n/***/ \"oT8e\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/resetPassword\",\n        function () {\n          return __webpack_require__(\"ze8x\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"ze8x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"cpVT\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"xvhg\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"j+1P\");\n/* harmony import */ var react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_hyperscript__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var components_Layout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"9Hbq\");\n/* harmony import */ var components_Button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"Hzj1\");\n/* harmony import */ var components_Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"rk+T\");\n/* harmony import */ var src_apiHelpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"0CBl\");\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\nvar COPY = {\n  header: \"Reset Password\",\n  button: \"Reset Password\",\n  passwordInput: \"New Password\",\n  confirmInput: \"Confirm Password\",\n  error: react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* Error */ \"b\"], ['Looks like that link is expired or invalid, please try to ', react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(next_link__WEBPACK_IMPORTED_MODULE_7___default.a, {\n    href: \"/login?reset\"\n  }, react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('a', 'reset your password')), ' again'])\n};\n\nvar ResetPassword = function ResetPassword() {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])({\n    password: '',\n    confirmPassword: ''\n  }),\n      formData = _useState[0],\n      setFormData = _useState[1];\n\n  var _useApi = Object(src_apiHelpers__WEBPACK_IMPORTED_MODULE_11__[/* useApi */ \"b\"])([formData]),\n      _useApi2 = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useApi, 2),\n      status = _useApi2[0],\n      callResetPassword = _useApi2[1];\n\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_6__[\"useRouter\"])();\n  var key = router.query.key;\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    if (status === 'success') {\n      setTimeout(function () {\n        router.push('/login');\n      }, 3500);\n    }\n  });\n  if (!key || typeof key !== 'string') return COPY.error;\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = Object(_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(e) {\n      return _Users_ayooluwaalfonso_code_krakeneduapp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return callResetPassword('/api/user/resetPassword/reset', {\n                key: key,\n                password: formData.password\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  switch (status) {\n    case 'normal':\n    case 'loading':\n      return react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* FormBox */ \"d\"], {\n        onSubmit: onSubmit,\n        width: 400,\n        ma: true\n      }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('h1', COPY.header), react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* LabelBox */ \"e\"], {\n        gap: 8\n      }, [react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('div', [react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('h4', COPY.passwordInput), react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('small.textSecondary', \"Minimum length 8 characters\")]), react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Form__WEBPACK_IMPORTED_MODULE_10__[/* PasswordInput */ \"e\"], {\n        type: 'password',\n        minLength: 8,\n        value: formData.password,\n        onChange: function onChange(e) {\n          return setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n            password: e.target.value\n          }));\n        }\n      })]), react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Button__WEBPACK_IMPORTED_MODULE_9__[/* Primary */ \"f\"], {\n        type: 'submit',\n        status: status,\n        style: {\n          justifySelf: 'end'\n        }\n      }, 'Submit')]);\n\n    case 'success':\n      return react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Layout__WEBPACK_IMPORTED_MODULE_8__[/* Box */ \"b\"], [react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('h1', \"Great\"), react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('p', 'You can now log in with your new password'), react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(next_link__WEBPACK_IMPORTED_MODULE_7___default.a, {\n        href: '/login'\n      }, react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()('a', react_hyperscript__WEBPACK_IMPORTED_MODULE_4___default()(components_Button__WEBPACK_IMPORTED_MODULE_9__[/* Primary */ \"f\"], 'Log In')))]);\n\n    case 'error':\n      return COPY.error;\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ResetPassword);\n\n/***/ })\n\n},[[\"oT8e\",0,2,1,3,4]]]);","inputSourceMap":{"version":3,"sources":["/Users/ayooluwaalfonso/code/krakeneduapp/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2FresetPassword&absolutePagePath=private-next-pages%2FresetPassword.ts!","/Users/ayooluwaalfonso/code/krakeneduapp/pages/resetPassword.ts"],"names":["COPY","header","button","passwordInput","confirmInput","error","h","Error","Link","href","ResetPassword","useState","password","confirmPassword","formData","setFormData","useApi","status","callResetPassword","router","useRouter","key","query","useEffect","setTimeout","push","onSubmit","e","preventDefault","FormBox","width","ma","LabelBox","gap","PasswordInput","type","minLength","value","onChange","target","Primary","style","justifySelf","Box"],"mappings":"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","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/resetPassword\",\n        function () {\n          return require(\"private-next-pages/resetPassword.ts\");\n        }\n      ]);\n    ","import h from 'react-hyperscript'\nimport { useState, useEffect } from 'react'\nimport {useRouter} from 'next/router'\nimport Link from 'next/link'\n\nimport { Box, FormBox, LabelBox} from 'components/Layout'\nimport {Primary} from 'components/Button'\nimport { Error, PasswordInput} from 'components/Form'\nimport {ResetMsg, ResetResult} from 'pages/api/user/resetPassword/[action]'\nimport { useApi } from 'src/apiHelpers'\n\nconst COPY = {\n  header: \"Reset Password\",\n  button: \"Reset Password\",\n  passwordInput: \"New Password\",\n  confirmInput: \"Confirm Password\",\n  error: h(Error, [\n    'Looks like that link is expired or invalid, please try to ', h(Link, {href:\"/login?reset\"}, h('a', 'reset your password')),\n    ' again'\n  ])\n}\n\nconst ResetPassword = ()=>{\n  let [formData, setFormData] = useState({password:'', confirmPassword: ''})\n  let [status, callResetPassword] = useApi<ResetMsg, ResetResult>([formData])\n  let router = useRouter()\n  let key = router.query.key as string\n\n  useEffect(()=>{\n    if(status === 'success') {\n      setTimeout(()=> {\n        router.push('/login')\n      }, 3500)\n    }\n  })\n\n  if(!key || typeof key !== 'string') return COPY.error\n\n  const onSubmit = async (e:React.FormEvent)=> {\n    e.preventDefault()\n    await callResetPassword('/api/user/resetPassword/reset', {key, password: formData.password})\n  }\n\n  switch(status) {\n    case 'normal':\n    case 'loading':\n      return h(FormBox, {onSubmit, width:400, ma: true }, [\n        h('h1', COPY.header),\n        h(LabelBox, {gap: 8}, [\n          h('div',[\n            h('h4', COPY.passwordInput),\n            h('small.textSecondary', \"Minimum length 8 characters\"),\n          ]),\n          h(PasswordInput, {\n            type: 'password',\n            minLength: 8,\n            value: formData.password,\n            onChange: e => setFormData({...formData, password:e.target.value})\n          }),\n        ]),\n        h(Primary, {type: 'submit', status, style: {justifySelf:'end'}}, 'Submit')\n      ])\n    case 'success': return h(Box, [\n      h('h1', \"Great\"),\n      h('p', 'You can now log in with your new password'),\n      h(Link, {href:'/login'}, h('a', h(Primary, 'Log In')))\n    ])\n    case 'error': return COPY.error\n  }\n}\n\nexport default ResetPassword\n"]}}