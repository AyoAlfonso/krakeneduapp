{"version":3,"sources":["webpack://_N_E/./components/Course/Enroll.ts","webpack://_N_E/./components/TodoList.ts","webpack://_N_E/./src/constants.ts","webpack://_N_E/./components/Cards/SmallCohortCard.ts","webpack://_N_E/./pages/courses/[slug]//index.ts"],"names":["Enroll","props","discounts","useLocalDiscounts","data","price","course","cost","discount","find","d","id","useEffect","a","callApi","code","res","status","result","deleted","max_redeems","redeems","setDiscounts","filter","type","amount","Math","floor","h","Box","gap","Cost","green","discounted","style","color","colors","textSecondary","duration","cohort_max_size","Text","source","prerequisites","disallowedTypes","children","accentSuccess","TodoParser","t","TodoList","items","i","useState","Array","length","fill","checked","setChecked","persistKey","savedValue","localStorage","getItem","localData","check","JSON","parse","e","setItem","stringify","Fragment","map","todo","index","CheckBox","Input","onChange","newValues","slice","currentTarget","DISCOURSE_URL","SmallCohortCard","started","Date","start_date","Link","href","as","courses","slug","passHref","Card","border","borderTop","borderRadius","cohortName","name","enrolled","facilitating","alignSelf","Pill","borderOnly","live","red","prettyDate","facilitators","join","COPY","Info","CoursePage","WrappedCoursePage","notFound","ErrorPage","user","useUserData","userCohorts","useUserCohorts","useCourseData","undefined","PageLoader","activeCohorts","course_cohorts","c","completed","cohort_facilitators","f","facilitator","people_in_cohorts","p","people","sort","sortByDateAndName","upcomingCohorts","isMaintainer","course_maintainers","maintainer","invited","invited_courses","Head","property","content","key","description","card_image","split","Banners","draft","TwoColumn","padding","backgroundColor","accentPeach","flatMap","cohort","Cohort","Seperator","grey95","display_name","username","Tabs","tabs","text","Cohorts","cohorts","link","bio","width","Sidebar","StickyWrapper","EnrollStatus","courseId","courseSlug","inviteOnly","invite_only","loggedIn","upcoming","Destructive","WatchCourse","reduce","acc","push","pastCohorts","router","useRouter","past","gridAutoColumns","textDecoration","cohortPrettyDate","alignItems","alignContent","justifySelf","textAlign","query","Primary","MarkCourseLive","mutate","state","setState","onClick","preventDefault","Modal","display","closeText","onExit","withComponent","Loader","TODOBanner","TwoColumnBanner","expanded","setExpanded","BannerContent","AccentImg","height","src","LinkButton"],"mappings":"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","file":"static/chunks/435e89fe4f1e2c992e828e345bd02f15d171fea0.ee554a9cbb0fd02a7a0b.js","sourcesContent":["import h from 'react-hyperscript'\nimport styled from '@emotion/styled'\n\nimport { Box } from '../Layout'\nimport {colors} from '../Tokens'\nimport { Course } from '../../src/data'\nimport { ReactElement, useEffect } from 'react'\nimport { useLocalDiscounts, setDiscounts } from 'src/clientData'\nimport { callApi } from 'src/apiHelpers'\nimport { GetDiscountResult } from 'pages/api/discounts/[code]'\nimport Text from 'components/Text'\n\ntype Props = {\n  course: Course\n}\n\nconst Enroll:React.FC<Props> = (props) => {\n  let {data: discounts} = useLocalDiscounts()\n  let price = props.course?.cost || 0\n  let discount = discounts?.find(d=>d.course == props.course?.id)\n  useEffect(()=>{\n    (async function(){\n      if(!discount || !discounts) return\n      let res = await callApi<null, GetDiscountResult>('/api/discounts/'+discount.code)\n      if(res.status !== 200 ||\n        res.result.deleted ||\n        (res.result.max_redeems !== 0\n          && res.result.max_redeems <= res.result.redeems)) {\n        setDiscounts(discounts.filter(d=>d.code!==discount?.code))\n      }\n    })()\n  }, [discount, discounts])\n  if(discount) {\n    if(discount.type === 'absolute') price = price - discount.amount\n    else price = price - (Math.floor((discount.amount/100)*price))\n  }\n  //Laying out the Enroll Panel\n  return h(Box, {gap:16}, [\n    h(Box, {gap:8}, [\n      discount ? h(Cost, {green: true}, '$'+price) : null,\n      h(Cost, {discounted: !!discount}, '$' + props.course?.cost),\n    ]),\n    h(Box, {gap: 8, style:{color: colors.textSecondary}}, [\n      h('b', props.course?.duration),\n      props.course?.cohort_max_size === 0 ? null : h('b', `Up to ${props.course?.cohort_max_size} learners`),\n      h(Box, {gap: 4}, [\n        h('b', 'Prerequisites'),\n        h(Text, {source: props.course?.prerequisites, disallowedTypes:[\"heading\" as const]})\n      ]),\n    ]),\n    props.children as ReactElement ,\n  ])\n}\n\nexport default Enroll\n\n\nconst Cost = styled('span')<{discounted?:boolean, green?: boolean}>`\nwidth: min-content;\nline-height: 56px;\nfont-size: 56px;\nfont-weight: bold;\n${props=>props.green? `color: ${colors.accentSuccess};`:''}\n${props=>props.discounted ? `\nfont-size: 32px;\nline-height: 32px;\nbackground: linear-gradient(20deg, transparent 45.75%, currentColor 47.5%, currentColor 52.5%, transparent 53.25%);\n`: ''}\n`\n\n// Add a wrapper around Enroll Panel so apply the sticky feature on screens above 768px\nexport const StickyWrapper = styled('div')`\nposition: sticky;\ntop: 32px;\n`\n","import h from 'react-hyperscript'\nimport * as t from 'runtypes'\nimport {useState, useEffect, Fragment} from 'react'\nimport { CheckBox, Input } from './Form'\n\nlet TodoParser = t.Array(t.Boolean)\n\nexport function TodoList(props: {items: Array< string | React.ReactElement | null>, persistKey?: string}) {\n  let items = props.items.filter(i=>!!i)\n  let [checked, setChecked] = useState (new Array(items.length).fill(false))\n  useEffect(() => {\n    if(!props.persistKey) return\n    let savedValue = localStorage.getItem(props.persistKey)\n    try {\n      let localData = TodoParser.check(JSON.parse(savedValue || ''))\n      setChecked(localData)\n    }\n    catch(e){}\n  },[])\n  useEffect(()=>{\n    if(!props.persistKey) return\n    localStorage.setItem(props.persistKey, JSON.stringify(checked))\n  },[checked])\n\n  return h(Fragment, items.map((todo, index)=>{\n    return h(CheckBox, [\n      h(Input, {\n        type: 'checkbox',\n        checked: checked[index],\n        onChange: e=> {\n          let newValues = checked.slice(0)\n          newValues[index] = e.currentTarget.checked\n          setChecked(newValues)\n        }\n      }),\n      todo\n    ])\n  }))\n}\n","export let DISCOURSE_URL = 'https://forum.krakenedu.com'\n","import h from 'react-hyperscript'\nimport Link from 'next/link'\n\nimport {colors, } from 'components/Tokens'\nimport {Box} from 'components/Layout'\nimport {Card} from '.'\nimport { Pill } from 'components/Pill'\nimport { cohortName, prettyDate} from 'src/utils'\n\ntype Cohort = {\n  name: string,\n  start_date: string,\n  facilitators: string[]\n  completed?: string | null,\n  live: boolean,\n  enrolled?:boolean,\n  facilitating?: boolean,\n  id: number,\n  courses: {\n    name: string,\n    slug: string\n  }\n  course: number,\n}\n\nexport const SmallCohortCard = (props: Cohort) => {\n  let started = new Date(props.start_date) < new Date()\n  return h(Link, {\n    href: \"/courses/[slug]/[id]/cohorts/[cohortId]\",\n    as:`/courses/${props.courses.slug}/${props.course}/cohorts/${props.id}`,\n    passHref: true,\n  }, [\n    h(Card, {style:{border: '1px solid', borderTop: '4px solid', borderRadius: '2px'}}, [\n      h(Box, {gap: 8}, [\n        h(Box, {h: true},[\n          h('h3', cohortName(props.name)),\n          props.enrolled || props.facilitating ? h(Box, {gap: 8, h: true, style:{alignSelf:\"center\"}}, [\n            props.facilitating ? h(Pill, {borderOnly: true}, 'facilitator') : null,\n            props.enrolled ? h(Pill, 'enrolled') : null,\n            !props.live ? h(Pill, {red: true, borderOnly: true},'draft') : null\n          ]): null,\n        ]),\n        h('div', [\n          h('h4', `${started ? \"Started\" : \"Starts\"} ${prettyDate(props.start_date)}`),\n          h('p', {style:{color: colors.textSecondary}},\n            `Facilitated by ${props.facilitators.join(', ')}`)\n        ])\n      ])\n    ])\n  ])\n}\n","import h from 'react-hyperscript'\nimport { useState, ReactElement } from 'react'\nimport Link from 'next/link'\nimport { InferGetStaticPropsType } from 'next'\nimport styled from '@emotion/styled'\nimport prisma from \"lib/prisma\";\nimport { Box, Seperator, TwoColumn, Sidebar } from 'components/Layout'\nimport {Tabs, StickyWrapper} from 'components/Tabs'\nimport { colors } from 'components/Tokens'\nimport Loader, { PageLoader } from 'components/Loader'\nimport { Info } from 'components/Form'\nimport {Pill} from 'components/Pill'\nimport Enroll from 'components/Course/Enroll'\nimport Text from 'components/Text'\nimport {SmallCohortCard} from 'components/Cards/SmallCohortCard'\nimport {TwoColumnBanner} from 'components/Banner'\nimport {Modal} from 'components/Modal'\nimport { Primary, Destructive, LinkButton} from 'components/Button'\nimport {WatchCourse} from 'components/Course/WatchCourse'\n\nimport { getTaggedPost } from 'src/discourse'\nimport {DISCOURSE_URL} from 'src/constants'\nimport { useUserData, useUserCohorts, useCourseData, Course } from 'src/data'\nimport { UpdateCourseMsg, UpdateCourseResponse} from 'pages/api/courses/[id]'\nimport { callApi } from 'src/apiHelpers'\nimport { cohortPrettyDate } from 'components/Cards/CohortCard'\nimport ErrorPage from 'pages/404'\nimport { courseDataQuery } from 'pages/api/courses/[id]'\nimport Head from 'next/head'\nimport { useRouter } from 'next/router'\nimport { AccentImg } from 'components/Images'\nimport { TodoList } from 'components/TodoList'\nimport { cohortName, sortByDateAndName } from 'src/utils'\n\nconst COPY = {\n  curriculumTab: \"Curriculum\",\n  cohortTab: \"All Cohorts\",\n  activeCohorts: \"Your Current Cohorts\",\n  settings: \"You can edit details, create new cohorts, and more.\",\n  enrollButton: \"Enroll in a cohort\",\n  updateCurriculum: (props: {id: string}) => h(Info, [\n    `💡 You can make changes to the curriculum by editing `,\n    h('a', {href: `${DISCOURSE_URL}/session/sso?return_path=/t/${props.id}`}, `this topic`),\n    ` in the forum`\n  ])\n}\n\ntype Props = InferGetStaticPropsType<typeof getStaticProps>\n\nconst WrappedCoursePage = (props: Props)=>props.notFound ? h(ErrorPage) : h(CoursePage, props)\nexport default WrappedCoursePage\n\nconst CoursePage = (props:Extract<Props, {notFound: false}>) => {\n  let {data: user} = useUserData()\n  let {data:userCohorts} = useUserCohorts()\n  let {data: course} = useCourseData(props.id, props.course || undefined)\n\n  if(!course) return h(PageLoader)\n\n  let activeCohorts = course.course_cohorts\n    .filter(c => {\n      if(!user) return false\n      return c.completed === null && (!!c.cohort_facilitators.find(f=>user&&f.facilitator===user.id)\n        || c.people_in_cohorts\n          .find(p => p.people.id === (user ? user.id : undefined)))\n    })\n    .sort(sortByDateAndName)\n\n  let enrolled = activeCohorts.filter(c=>!c.cohort_facilitators.find(f=>user&&f.facilitator===user.id)).length > 0\n  let upcomingCohorts = course.course_cohorts.filter(c=> (new Date(c.start_date) > new Date()) && c.live).sort(sortByDateAndName)\n\n  let isMaintainer = !!(course?.course_maintainers.find(maintainer => user && maintainer.maintainer === user.id))\n  let invited = !!userCohorts?.invited_courses.find(course=>course.id === props.course.id )\n\n  //Setting up the layout for the course page\n  return h('div', [\n    h(Head, {children: [\n      h('meta', {property:\"og:title\", content:course.name, key:\"og:title\"}),\n      h('meta', {property: \"og:description\", content: course.description, key: \"og:description\"}),\n      h('meta', {property: \"og:image\", content: course.card_image.split(',')[0], key: \"og:image\"}),\n      h('meta', {property: \"twitter:card\", content: \"summary\", key:\"twitter:card\"})\n    ]}),\n    h(Banners, {draft: course.status === 'draft', id: props.id, isMaintainer, slug: course.slug}),\n    h(TwoColumn, [\n      h(Box, {gap: 32}, [\n        h(Box, {gap: 16}, [\n          h('h1', course?.name),\n        ]),\n        h('p.big', course?.description || ''),\n\n        upcomingCohorts.length > 0 && (activeCohorts.length === 0)\n          ? h(Box, {padding: 32, style: {backgroundColor: colors.accentPeach}},[\n            ...upcomingCohorts.flatMap(cohort=>{\n              return [\n                h(Cohort, {\n                  cohort,\n                  enrolled: false, facilitating: false,\n                  invited,\n                  slug: course?.slug || '',\n                  cohort_max_size: course?.cohort_max_size || 0\n                }),\n                h(Seperator)]\n            }).slice(0, -1)\n          ])\n          : activeCohorts.length === 0 ? null : h(Box, {padding: 32, style: {backgroundColor: colors.grey95}}, [\n            h('h3', COPY.activeCohorts),\n            ...activeCohorts.map(cohort=> h(SmallCohortCard, {\n              ...cohort,\n              facilitators: cohort.cohort_facilitators.map(f=>f.people.display_name || f.people.username),\n              courses: {\n                name: course?.name || '',\n                slug: course?.slug || '',\n              },\n              facilitating: !!cohort.cohort_facilitators.find(f=>user&&f.facilitator===user.id),\n              enrolled: !cohort.cohort_facilitators.find(f=>user&&f.facilitator===user.id)\n            }))\n          ]),\n      ]),\n      h(Tabs, {tabs: {\n        [COPY.curriculumTab]:  h(Box, [\n          isMaintainer ? h(COPY.updateCurriculum, {id: props.content.id}) : null,\n          h(Text, {source: props.content.text})\n        ]),\n        [COPY.cohortTab]: h(Cohorts,{cohorts: course.course_cohorts, slug: course.slug, user: user ? user.id : '', invited, cohort_max_size: course?.cohort_max_size || 0}),\n        Facilitators: h(Box, {gap:32}, course.course_maintainers.map(maintainer=>{\n          return h(Box, {}, [\n            h('h3', maintainer.people.display_name || maintainer.people.username),\n            !maintainer.people.link ? null : h('a', {href: maintainer.people.link}, h('b', maintainer.people.link)),\n            !maintainer.people.bio ? null : h(Box, {width: 640}, h(Text, {source: maintainer.people.bio}))\n          ])\n        }))\n      }}),\n      h(Sidebar, [\n        h(StickyWrapper, [\n          h(Enroll, {course}, [\n            h(Box, [\n              h(EnrollStatus, {\n                courseId: course.id,\n                courseSlug: course.slug,\n                draft:course.status==='draft',\n                maintainer: isMaintainer,\n                inviteOnly:course.invite_only,\n                invited,\n                loggedIn: !!user,\n                enrolled,\n                upcoming:upcomingCohorts.length !== 0,\n              }),\n              h(Seperator),\n              !isMaintainer ? h(WatchCourse, {id: course.id}) : h(Box, [\n                h(Box, {gap:8}, [\n                  h('h3', `You maintain this ${course.type}`),\n                  h('p.textSecondary', COPY.settings),\n                ]),\n                h(Link, {href:'/courses/[slug]/[id]/settings', as:`/courses/${course.slug}/${course.id}/settings`}, h(Destructive, 'Settings'))\n              ])\n            ])\n          ])]),\n      ])\n    ])\n  ])\n}\n\nfunction EnrollStatus (props: {\n  draft:boolean,\n  maintainer:boolean,\n  inviteOnly:boolean,\n  invited:boolean,\n  loggedIn:boolean,\n  enrolled:boolean;\n  upcoming:boolean;\n  courseId:number;\n  courseSlug:string\n}) {\n  if (props.draft) {\n    if (props.maintainer) return h('span.accentRed', \"Learners can't enroll in this course until you publish it!\")\n    return h('span.accentRed', \"This course is still a draft. You can enroll once the creator publishes it!\")\n  }\n\n  if (props.enrolled){\n    if (props.upcoming) return h('span.accentSuccess', \"You're enrolled in an upcoming cohort. Feel free to enroll in another one though!\")\n    return  h('span.accentSuccess', \"You're enrolled in an upcoming cohort\")\n  }\n\n  if (!props.upcoming) {\n    if(props.maintainer) return h('span.accentRed', [\n      \"Looks like there aren't any cohorts planned. Create one \", h(Link, {href: \"/courses/[slug]/[id]/settings\", as: `/courses/${props.courseSlug}/${props.courseId}/settings`}, h('a', 'here')), '.'\n    ])\n    return h('span.accentRed', \"Looks like there aren't any cohorts planned :(\")\n  }\n\n  if (props.inviteOnly) {\n    if (props.maintainer) return h('span.accentRed', [\n      \"Learners need to be invited to enroll. Invite someone \", h(Link, {href: `/courses/${props.courseSlug}/${props.courseId}/settings`}, h('a', 'here')), '.'])\n    if(props.invited) return h('span.accentSuccess', \"You're invited!\")\n    if(props.loggedIn) return h('div', {}, h('span.accentRed', \"This course is invite only. Reach out to the facilitators if you're interested!\"))\n    return h('div', {}, h('span.accentRed', \"This course is invite only. If you've been invited, please log in.\"))\n  }\n  return null\n}\n\n\nconst Cohorts = (props:{cohorts: Course['course_cohorts'], user: string, slug: string, cohort_max_size: number, invited:boolean}) => {\n  let [pastCohorts, upcomingCohorts] = props.cohorts\n  .filter(c=>{\n    if(c.live) return true\n    return !!c.cohort_facilitators.find(f=>f.facilitator===props.user)\n  }).sort(sortByDateAndName)\n    .reduce((acc, cohort)=>{\n      let enrolled = !!cohort.people_in_cohorts.find(p => p.people.id === props.user)\n      let facilitating = !!cohort.cohort_facilitators.find(f=>f.facilitator === props.user)\n      acc[new Date(cohort.start_date)< new Date() ? 0 : 1].push(\n        h(Cohort, {\n          cohort,\n          enrolled, facilitating,\n          slug: props.slug,\n          cohort_max_size: props.cohort_max_size,\n          invited: props.invited\n        })\n      )\n      return acc\n    },[[],[]] as Array<Array<ReactElement>>)\n\n  return h(Box, {gap:32}, [\n    upcomingCohorts.length === 0 ? null : h('h2', \"Upcoming Cohorts\"),\n    ...upcomingCohorts,\n    upcomingCohorts.length === 0 || pastCohorts.length === 0 ? null : h(Seperator),\n    pastCohorts.length === 0 ? null : h('h2', 'Ongoing and Past Cohorts'),\n    ...pastCohorts\n    ])\n}\n\nexport const Cohort = (props: {\n  cohort: Course['course_cohorts'][0],\n  facilitating?: boolean,\n  enrolled?: boolean,\n  slug:string,\n  cohort_max_size: number,\n  invited: boolean\n}) => {\n  let id= props.cohort.id\n  let router = useRouter()\n  let past = new Date(props.cohort.start_date) < new Date()\n\n  return h(Box, {h: true, style:{gridAutoColumns:'auto'}}, [\n    h(Box, {gap: 4}, [\n      !props.enrolled && !props.facilitating ? null : h('div', [\n        props.enrolled ? h(Pill, 'enrolled') : null,\n        ' ',\n        props.facilitating ? h(Pill, {borderOnly: true}, 'facilitating') : null,\n        ' ',\n        !props.cohort.live ? h(Pill, {borderOnly: true, red: true}, 'draft') : null,\n      ]),\n      h('h3', {}, h(Link, {\n        href:'/courses/[slug]/[id]/cohorts/[cohortId]',\n        as:  `/courses/${props.slug}/${props.cohort.course}/cohorts/${id}`\n      }, h('a', {style: {textDecoration: 'none'}}, cohortName(props.cohort.name)))),\n      h(Box, {style: {color: colors.textSecondary}, gap: 4}, [\n        h('strong', cohortPrettyDate(props.cohort.start_date, props.cohort.completed)),\n        h('div', [\n          `Facilitated by `,\n          ...props.cohort.cohort_facilitators.flatMap(f=>{\n            return [h(Link, {href:`/people/${f.people.username}`}, h('a', f.people.display_name || f.people.username)), ', ']\n          }).slice(0, -1)\n        ])\n      ]),\n      props.cohort_max_size === 0 || past ? null : props.cohort_max_size > props.cohort.people_in_cohorts.length\n        ? h('span.accentSuccess', `${props.cohort_max_size - props.cohort.people_in_cohorts.length} ${props.cohort_max_size - props.cohort.people_in_cohorts.length === 1 ? 'spot' : 'spots'} left!`)\n        : h('span.accentRed', `Sorry! This cohort is full.`)\n    ]),\n    past || props.enrolled || props.facilitating ? null : h(Box, {gap:8, style: {alignItems: 'center', alignContent: 'center', justifySelf: 'right', textAlign: 'right'}}, [\n      h(Link, {\n        href: `/courses/${router.query.slug}/${props.cohort.course}/cohorts/${props.cohort.id}`\n      }, h('a', {}, h(Primary, 'See schedule')))\n    ])\n  ])\n}\n//feature to add a new cohort to a course\nfunction MarkCourseLive(props: {id:number, slug: string}) {\n  let {data:course, mutate} = useCourseData(props.id)\n  let [state, setState] = useState<'normal'|'confirm'|'loading'|'complete'>('normal')\n\n  const onClick = async (e: React.MouseEvent)  =>{\n    e.preventDefault()\n    if(!course) return\n    setState('loading')\n    let res = await callApi<UpdateCourseMsg, UpdateCourseResponse>(`/api/courses/${props.id}`, {status: 'live'})\n    if(res.status===200){\n      setState('normal')\n      mutate({...course, status: 'live'})\n    }\n  }\n\n  if(state === 'confirm' || state === 'loading') return h(\n    Modal,\n    { display: true, closeText: \"nevermind\", onExit: () => setState(\"normal\") },\n    [\n      h(Box, { gap: 32 }, [\n        h(\"h2\", { style: { textAlign: \"center\" } }, \"Are you sure?\"),\n        h(Box, { gap: 16 }, [\n          \"Before going live please check that you've done these things\",\n          h(Box.withComponent(\"ul\"), { gap: 16 }, [\n            h(\"li\", [\n              \"Edit important details in \",\n              h(\n                \"a\",\n                {\n                  href: `https://app.krakenedu.com/courses/${props.slug}/${props.id}/settings?tab=Details`,\n                },\n                \"course settings\"\n              ),\n              \".\",\n            ]),\n            h(\"li\", [\n              \"Written a \",\n              h(\n                \"a\",\n                {\n                  href: `${DISCOURSE_URL}/session/sso?return_path=/t/${props.id}`,\n                },\n                \"curriculum\"\n              ),\n              \".\",\n            ]),\n          ]),\n          h(\n            Primary,\n            { style: { justifySelf: \"center\" }, onClick },\n            state === \"loading\" ? h(Loader) : \"Go Live!\"\n          ),\n        ]),\n      ]),\n    ]\n  );\n\n  return h(Primary, {onClick: async e => {\n    e.preventDefault()\n    setState('confirm')\n  }}, \"Publish!\")\n}\n\n// Feature to edit course detail (length, prereqs, one line description)\n\n\n\n// Define Banners\nconst Banners = (props:{draft: boolean, id: number, slug:string, isMaintainer: boolean}) => {\n  if(props.draft && props.isMaintainer) {\n    if(props.isMaintainer){\n      return h(TODOBanner, props)\n    }\n    return h(TwoColumnBanner, {red: true}, h(Box, {gap:16},[\n      h(Box, {gap:16}, [\n        h('h3', \"This course isn't live yet!\"),\n        h('p',[`The maintainer is still working on getting this course in shape. Let them know\nif you have any feedback!`])\n      ])\n    ]))\n  }\n  return null\n}\n\n// Draft Course ToDo Banner\nconst TODOBanner = (props:{\n  id:number\n  slug:string\n}) => {\n  let [expanded, setExpanded] = useState(false)\n\n  return h(TwoColumnBanner, {red: true}, [\n    h(BannerContent, [\n      h(AccentImg, {height:32, width:36, src:\"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Seedling.png\"}),\n      h(Box, {gap:8}, [\n        h('h4', \"This course is still a draft\"),\n        h('p', 'It’s hidden from public view. People can’t see this page until you publish it.')\n      ]),\n      ... !expanded ? [] : [\n        h(AccentImg, {height:32, width:36, src:\"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Bud.png\"}),\n        h(Box, {gap:16}, [\n          h('h4', \"Before you publish this course make sure that you ...  \"),\n          h(TodoList, {\n            persistKey: \"course-creation-todo\",\n            items: [\n              h(\"span\", [\n                \"Edit important details, like description and price, in \", h('a', {href: `https://app.krakenedu.com/courses/${props.slug}/${props.id}/settings?tab=Details`}, \"course settings\"), \".\"\n              ]),\n              h(\"span\", [\n                \"Write a comprehensive curriculum for your course, by editing the \", h('a', {href: `${DISCOURSE_URL}/session/sso?return_path=/t/${props.id}`}, \"Curriculum topic\"), \" in the forum.\"\n              ]),\n              h(\"span\", [\n                \"Create or edit \", h('a', {href: `https://app.krakenedu.com/courses/${props.slug}/${props.id}/settings?tab=Templates`}, \"templates\"), \" for reusable forum topics so you don't need to rewrite them for every cohort you run (or you can add these later).\"\n              ]),\n              h(\"span\", [\n                \"Create your first cohort, in \", h('a', {href: `https://app.krakenedu.com/courses/${props.slug}/${props.id}/settings?tab=Cohorts`}, \"course settings\"), \". It will also be a draft that you need to edit before publishing. We'll guide you through it!\"\n              ])\n            ]\n          })\n        ]),\n        h(AccentImg, {height:32, width:36, src:\"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Flower.png\"}),\n        h(Box, {gap:16}, [\n          h('h4', \"Once you're ready, you can publish it here!\"),\n          h(MarkCourseLive, props)\n        ])\n      ]\n    ]),\n    h(LinkButton, {style:{justifySelf: 'right', textDecoration: 'none'}, onClick: ()=>setExpanded(!expanded)}, expanded ? \"hide checklist\" : \"show checklist\")\n  ])\n}\n\nexport const getStaticProps = async (ctx:any) => {\n  let id = parseInt(ctx.params?.id as string || '' )\n  if(Number.isNaN(id)) return {props: {notFound: true}} as const\n\n  let data = await courseDataQuery(id)\n  if(!data) return {props:{notFound: true}} as const\n  let content = await getTaggedPost(data.category_id, 'curriculum')\n\n  return {props: {notFound: false, content, id, course: data}, revalidate: 1} as const\n}\n\nexport const getStaticPaths = async () => {\n\n  let courses = await prisma.courses.findMany({select:{id: true, slug: true}})\n  return {paths:courses.map(course=>{\n    return {params: {id: course.id.toString(), slug: course.slug}}\n  }), fallback: true}\n}\n\n\nconst BannerContent = styled('div') `\ndisplay: grid; \ngrid-template-columns: min-content auto;\ngrid-column-gap: 16px;\ngrid-row-gap: 32px;\n`\n"],"sourceRoot":""}