_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[59],{R1ly:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return u}));var n=r("wTIg"),a=r("q1tI"),i=r("j+1P"),s=r.n(i),o=Object(n.a)("img",{target:"e1gjxmdy1"})("image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;display:block;border:none;height:",(function(e){return e.height?e.height+"px":"100px"}),";width:",(function(e){return e.width?e.width+"px":"100px"}),";");function u(e){var t=Object(a.useState)(!1),r=t[0],n=t[1],i=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t;null!==(t=i.current)&&void 0!==t&&t.complete&&!r&&setTimeout((function(){return n(!0)}),e.startLoop)}),[]),r?s()(o,{src:e.src2,alt:e.alt}):s()(o,{ref:i,onLoad:function(){setTimeout((function(){return n(!0)}),e.startLoop)},src:e.src1,alt:e.alt})}},g8FV:function(e,t,r){"use strict";r.r(t),r.d(t,"LoginHeader",(function(){return q}));var n=r("cpVT"),a=r("vJKn"),i=r.n(a),s=r("rg98"),o=r("xvhg"),u=r("wTIg"),c=r("j+1P"),p=r.n(c),d=r("q1tI"),f=r("20a2"),l=r("YFqc"),g=r.n(l),m=r("9Hbq"),b=r("rk+T"),w=r("Hzj1"),h=r("R1ly"),y=r("0CBl"),O=r("5++N");function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={emailOrUsernameInput:"Email or Username",passwordInput:"Password",resetPassword:"Reset password",loginHeader:"Log In",wrongLogin:p()("div",["The email/username and password don't match",p()("br"),"If you want, you can ",p()(g.a,{href:"/login?reset"},p()("a","reset your password here")),"."]),loginButton:"Log In"},P="Reset Password",k="Your account email",I="Reset Password",T="Check your Email",_=function(){var e=Object(d.useState)(""),t=e[0],r=e[1],n=Object(y.b)([t]),a=Object(o.a)(n,3),u=a[0],c=a[1],f=a[2],l=function(){var e=Object(s.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,c("/api/user/resetPassword/request",{email:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();switch(u){case"normal":case"loading":return p()(m.d,{onSubmit:l,width:400,ma:!0},[p()("h1",P),p()(m.e,{gap:16},[p()("h4",k),p()(b.d,{type:"email",required:!0,value:t,onChange:function(e){return r(e.currentTarget.value)}})]),p()("div",{style:{display:"grid",justifyItems:"end",gridGap:"8px"}},[p()(w.f,{type:"submit",status:u},I)])]);case"success":return p()(m.b,{gap:16,width:400,ma:!0},[p()(h.a,{src:"/img/plane.gif",alt:"an animated gif of a paper airplane taking off"}),p()("h1",T),"We sent an email with a password reset link to",p()(b.c,t),"It expires in 30 minutes.",p()("br"),p()(w.f,{style:{width:"100%"},onClick:function(){return f("normal")}},"Send another link")]);case"error":return p()(m.b,{width:400,ma:!0},[p()(b.b,"something went wrong, please refresh and try again")])}},q=Object(u.a)("div",{target:"ecx9ydq0"})({name:"1uaajjg",styles:"display:grid;grid-gap:16px;grid-template-columns:auto min-content;align-items:end;"});t.default=function(){var e=Object(f.useRouter)(),t=Object(d.useState)({emailOrUsername:"",password:""}),r=t[0],n=t[1],a=e.query.redirect,u=e.query.reset,c=Object(O.i)(),l=c.data,j=c.mutate,P=Object(y.b)([r],function(){var t=Object(s.a)(i.a.mark((function t(r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}if("/"===a[0]&&!a.startsWith("/sso")){t.next=3;break}return t.abrupt("return",window.location.assign(a));case 3:return t.next=5,j(r);case 5:return t.next=7,e.push(a);case 7:t.next=11;break;case 9:return t.next=11,e.push("/dashboard");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k=Object(o.a)(P,2),I=k[0],T=k[1],E=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),T("/api/login",r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){l&&e.push(a||"/dashboard")}),[l]),"undefined"!==typeof u?p()(_):p()(m.d,{onSubmit:E,width:400,ma:!0,gap:32},[p()(m.b,[p()(q,[p()("h1",x.loginHeader),p()(h.b,{src1:"/img/door-1.gif",src2:"/img/door-2.gif",alt:"an animated gif of a entrance to the sparkle void",startLoop:1200})]),p()("p.textSecondary",["Or ",p()(g.a,{href:"/signup"},p()("a","sign up"))," for a new account"])]),"error"===I?p()(b.b,{},x.wrongLogin):null,p()(m.e,{gap:8},[p()("h4",x.emailOrUsernameInput),p()(b.d,{type:"text",value:r.emailOrUsername,required:!0,onChange:function(e){return n(v(v({},r),{},{emailOrUsername:e.currentTarget.value}))}})]),p()(m.e,{gap:8},[p()("h4",x.passwordInput),p()(b.d,{type:"password",value:r.password,required:!0,onChange:function(e){return n(v(v({},r),{},{password:e.currentTarget.value}))}}),p()(g.a,{href:"/login?reset"},p()("a",{style:{justifySelf:"right"}},x.resetPassword))]),p()(w.f,{type:"submit",status:I,style:{justifySelf:"right"}},x.loginButton)])}},zuvP:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r("g8FV")}])}},[["zuvP",0,2,1,3,4]]]);
//# sourceMappingURL=login-0c04ee421d731d3403a7.js.map