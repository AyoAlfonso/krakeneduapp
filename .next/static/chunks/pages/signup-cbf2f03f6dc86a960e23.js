_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[69],{LAm1:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n("qygY")}])},R1ly:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("wTIg"),a=n("q1tI"),i=n("j+1P"),u=n.n(i),s=Object(r.a)("img",{target:"e1gjxmdy1"})("image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;display:block;border:none;height:",(function(e){return e.height?e.height+"px":"100px"}),";width:",(function(e){return e.width?e.width+"px":"100px"}),";");function o(e){var t=Object(a.useState)(!1),n=t[0],r=t[1],i=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t;null!==(t=i.current)&&void 0!==t&&t.complete&&!n&&setTimeout((function(){return r(!0)}),e.startLoop)}),[]),n?u()(s,{src:e.src2,alt:e.alt}):u()(s,{ref:i,onLoad:function(){setTimeout((function(){return r(!0)}),e.startLoop)},src:e.src1,alt:e.alt})}},qygY:function(e,t,n){"use strict";n.r(t),n.d(t,"SignUpHeader",(function(){return q}));var r=n("cpVT"),a=n("vJKn"),i=n.n(a),u=n("rg98"),s=n("xvhg"),o=n("wTIg"),c=n("j+1P"),l=n.n(c),p=n("q1tI"),m=n("20a2"),d=n("YFqc"),f=n.n(d),g=n("9Hbq"),h=n("rk+T"),b=n("Hzj1"),y=n("R1ly"),v=n("5++N"),w=n("0CBl"),j=n("mB65"),O=n("fdqv");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S="Create your account",E="We're hyped for you to join the KrakenEdu community! Let's learn together.",T=function(e){var t=Object(m.useRouter)(),n=Object(p.useState)(""),r=n[0],a=n[1],o=Object(w.b)([r],(function(){setTimeout((function(){t.push("/dashboard")}),3e3)})),c=Object(s.a)(o,2),d=c[0],v=c[1],j=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v("/api/signup/verify",{key:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){t.query.verifyEmail&&"string"===typeof t.query.verifyEmail&&v("/api/signup/verify",{key:t.query.verifyEmail})}),[]),t.query.verifyEmail&&null===d?null:"success"===d?l()(g.b,{width:400,ma:!0,gap:16},[l()("h1","All Done!"),l()("p.big","Click the button below if you're not redirected in a couple seconds"),l()(f.a,{href:"/dashboard"},l()("a",{},l()(b.f,"Back to Krakenedu")))]):l()(g.d,{onSubmit:j,width:400,ma:!0,gap:32},[l()(y.a,{src:"/img/plane.gif",alt:"an animated gif of a paper airplane taking off"}),l()("h1","Verify your email"),e.email?l()(g.b,{gap:8},["Sweet! We sent an email with a verification code to",l()(h.c,{},l()("b",e.email))]):null,l()(g.b,{gap:8},[l()("h4","Copy the code there and submit it here:"),l()(h.d,{spellCheck:!1,type:"text",value:r,onChange:function(e){return a(e.currentTarget.value.trim())}})]),"error"===d?l()(h.b,{},["Your email link is invalid or out of date, please try ",l()(f.a,{href:"/signup"},l()("a","signing up again")),"."]):null,l()(b.f,{type:"submit",status:d,style:{justifySelf:"right"}},"Confirm your email")])},q=Object(o.a)("div",{target:"e1qhha6s0"})({name:"1uaajjg",styles:"display:grid;grid-gap:16px;grid-template-columns:auto min-content;align-items:end;"});t.default=function(){var e=Object(p.useState)({email:"",username:"",password:"",newsletter:!1}),t=e[0],n=e[1],r=Object(w.b)([t],(function(){return _.push("/signup?verifyEmail")})),a=Object(s.a)(r,2),o=a[0],c=a[1],d=Object(p.useState)(null),x=d[0],P=d[1],C=Object(v.i)().data,_=Object(m.useRouter)();Object(p.useEffect)((function(){C&&_.push("/dashboard")}),[C]),Object(j.a)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.username){e.next=2;break}return e.abrupt("return",P(null));case 2:if(Object(O.h)(t.username)){e.next=4;break}return e.abrupt("return",P(null));case 4:return e.next=6,Object(w.a)("/api/get/username/"+t.username);case 6:404===e.sent.status?P(!0):P(!1);case 8:case"end":return e.stop()}}),e)}))),500,[t.username]);var L=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c("/api/signup/request",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return void 0!==_.query.verifyEmail?l()(T,{email:t.email,resendEmail:L}):l()(g.d,{onSubmit:L,width:400,ma:!0,gap:32},[l()(g.b,{gap:8},[l()(q,[l()("h1","Sign Up"),l()(y.b,{src1:"/img/sailboat-1.gif",src2:"/img/sailboat-2.gif",alt:"an animated gif of a sailboat, boatin'",startLoop:333})]),l()("p.big",E),l()("p.textSecondary",["Or ",l()(f.a,{href:"/login"},l()("a","log in"))," with an existing account."])]),"error"===o?l()(h.b,{},l()("div",["A user already exists with that email. Try ",l()(f.a,{href:"/login"},l()("a","logging in")),"."])):null,l()(g.e,{gap:8},[l()("div",[l()("h4","Username"),l()("small.textSecondary","Pick a unique username between 3-15 characters.")]),l()(h.d,{type:"text",name:"username",required:!0,minLength:3,maxLength:15,value:t.username,onChange:function(e){n(k(k({},t),{},{username:e.currentTarget.value})),Object(O.h)(e.currentTarget.value||"")?e.currentTarget.setCustomValidity(""):e.currentTarget.setCustomValidity("Your username must contain only letters, numbers, underscores, periods or dashes")}}),t.username.length<3?null:Object(O.h)(t.username)?null===x?"":x?l()("span.accentSuccess","Great! This username is available."):l()("span.accentRed","Sorry, that username is taken."):l()("span.accentRed","Your username must contain only letters, numbers, underscores, periods or dashes")]),l()(g.e,{gap:8},[l()("div",[l()("h4","Your Email"),l()("small.textSecondary","You'll have to verify this in a moment.")]),l()(h.d,{type:"email",name:"email",required:!0,value:t.email,onChange:function(e){return n(k(k({},t),{},{email:e.currentTarget.value}))}})]),l()(g.e,{gap:8},[l()("div",[l()("h4","Password"),l()("small.textSecondary","Minimum length 8 characters")]),l()(h.e,{name:"new-password",required:!0,minLength:8,value:t.password,onChange:function(e){return n(k(k({},t),{},{password:e.currentTarget.value}))}})]),l()(g.e,{gap:8},[l()("div",[l()("h4","Get email updates?"),l()("small.textSecondary","We send out occasional updates on new courses and features. We'll never spam or share your email.")]),l()(h.a,[l()(h.d,{type:"checkbox",name:"newsletter",checked:t.newsletter,onChange:function(e){n(k(k({},t),{},{newsletter:e.currentTarget.checked}))}}),"Sure! Gimme the updates."])]),l()(b.f,{status:o,style:{justifySelf:"end"},type:"submit"},S)])}}},[["LAm1",0,2,1,3,4]]]);
//# sourceMappingURL=signup-cbf2f03f6dc86a960e23.js.map