{"version":3,"sources":["webpack://_N_E/./components/Pill.ts","webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?fdeb","webpack://_N_E/./components/Course/Enroll.ts","webpack://_N_E/./components/TodoList.ts","webpack://_N_E/./src/paystack/use-paystack.ts","webpack://_N_E/./src/paystack/paystack-actions.ts","webpack://_N_E/./src/paystack/compress-data.ts","webpack://_N_E/./components/Images.ts","webpack://_N_E/./components/Course/SubEnrollButton.ts","webpack://_N_E/./components/Course/EnrollButton.ts","webpack://_N_E/./components/pages/cohorts/WelcomeModal.ts","webpack://_N_E/./components/pages/cohorts/CreateEvent.ts","webpack://_N_E/./components/pages/cohorts/Events.ts","webpack://_N_E/./pages/courses/[slug]//cohorts/[cohortId]/index.ts","webpack://_N_E/./src/constants.ts"],"names":["Pill","props","red","colors","accentRed","textSecondary","borderOnly","grey55","grey90","window","__NEXT_P","push","Enroll","discounts","useLocalDiscounts","data","price","course","cost","discount","find","d","id","useEffect","a","callApi","code","res","status","result","deleted","max_redeems","redeems","setDiscounts","filter","type","amount","Math","floor","h","Box","gap","Cost","green","discounted","style","color","duration","cohort_max_size","Text","source","prerequisites","disallowedTypes","children","accentSuccess","TodoParser","t","TodoList","items","i","useState","Array","length","fill","checked","setChecked","persistKey","savedValue","localStorage","getItem","localData","check","JSON","parse","e","setItem","stringify","Fragment","map","todo","index","CheckBox","Input","onChange","newValues","slice","currentTarget","usePaystackPayment","options","publicKey","firstname","lastname","phone","email","reference","metadata","currency","channels","label","plan","quantity","subaccount","transaction_charge","bearer","split","split_code","callback","onClose","paystackArgs","handler","PaystackPop","setup","openIframe","callPaystackPop","key","ref","compress","config","defaultConfig","Object","assign","Date","getTime","AccentImg","height","width","HalfLoopImg","looping","setLooping","imageRef","useRef","current","complete","setTimeout","startLoop","src","src2","alt","onLoad","src1","process","env","NEXT_PUBLIC_PAYSTACK_KEY","onSuccess","msg","toast","success","icon","error","paystackHook","initializePayment","console","log","SubEnrollButton","user","useUserData","router","useRouter","setError","useApi","zeroCost","query","slug","callEnroll","onClick","preventDefault","encodeURIComponent","asPath","getDiscounts","paystack","alignItems","Modal","display","Primary","disabled","invited","max_size","learners","EnrollButton","getStripe","stripe","redirectToCheckout","sessionId","undefined","WelcomeModal","onExit","replace","cohort","courses","shallow","textAlign","Info","prettyDate","start_date","Link","href","Secondary","justifySelf","margin","DISCOURSE_URL","category_id","CreateEvent","open","setOpen","name","start_time","end_time","location","description","everyone","people","event","setEvent","mutate","callCreateEvent","FormBox","onSubmit","d1","x","parseInt","t1","t2","end_date","toISOString","EventForm","state","timezone","toLocaleDateString","timeZoneName","padding","backgroundColor","grey95","LabelBox","required","value","gridAutoColumns","placeholder","Textarea","Select","p","includes","AttendeeList","gridTemplateColumns","maxWidth","AttendeePill","LinkButton","person","Cross","appBackground","CohortEvents","pastEvents","events","showPastEvents","setShowPastEvents","displayedEvents","sort","b","gridGap","SmallLinkButton","showCal","Calendar","TimelineContainer","Event","inCohort","facilitating","newEvent","mutateDelete","splice","first","last","editting","setEditing","expanded","setExpanded","past","useFormData","getFullYear","getMonth","getDate","toLocaleTimeString","hour","minute","hour12","people_in_events","username","setState","callUpdateEvent","deleteStatus","callDeleteEvent","EventContainer","selected","Dot","Destructive","fontWeight","weekday","month","day","toUpperCase","getTimeBetween","alignSelf","EventTitle","created_by","IconButton","Pencil","border","overflow","overflowWrap","display_name","join","size","grey80","CohortPage","WrappedCohortPage","notFound","ErrorPage","userCohorts","useUserCohorts","profile","useProfileData","useCohortData","cohortId","useCourseData","courseId","selectedTab","tab","PageLoader","invited_courses","people_in_cohorts","isFacilitator","cohort_facilitators","f","isStarted","Tabs","Artifacts","artifacts","text","Schedule","cohort_events","c","WhiteContainer","EmptyImg","curriculum","CohortMembers","tabKeys","keys","Head","property","content","card_image","welcome","user_calendar","calendar_id","Banners","enrolled","TwoColumn","gridColumn","imageRendering","cohortName","Sidebar","StickyWrapper","CourseDetails","fontSize","invite_only","VerticalTabs","tabs","route","URL","searchParams","set","completed","pathname","as","MarkCohortComplete","unenrollState","setUnenrollState","UnenrollModal","target","facilitator","className","pronouns","bio","marginRight","DestructiveSmallButton","personID","cohortID","removeMember","callUnenroll","hideCloseButton","justifyItems","MarkCohortLive","closeText","live","Loader","Seperator","forum","TODOBanner","TwoColumnBanner","round","BannerContent","textDecoration"],"mappings":"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","file":"static/chunks/pages/courses/[slug]/[id]/cohorts/[cohortId]-290b7af8c4f4ec5e8670.js","sourcesContent":["import styled from '@emotion/styled'\nimport {colors} from './Tokens'\nexport const Pill = styled('span')<{borderOnly?: boolean, red?: boolean}>`\nheight: min-content;\nwidth: fit-content;\nfont-weight: bold;\nfont-family: Roboto Mono;\npadding: 2px 8px;\nfont-size: 0.75rem;\nborder-radius: 4px;\ncolor: ${props => props.red ? colors.accentRed : colors.textSecondary};\n${props=> props.borderOnly\n? `border: 2px solid ${props.red ? colors.accentRed : colors.grey55};`\n: `background-color: ${colors.grey90};`\n}\n`\n","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/courses/[slug]/[id]/cohorts/[cohortId]\",\n        function () {\n          return require(\"private-next-pages/courses/[slug]/[id]/cohorts/[cohortId]/index.ts\");\n        }\n      ]);\n    ","import h from 'react-hyperscript'\nimport styled from '@emotion/styled'\n\nimport { Box } from '../Layout'\nimport {colors} from '../Tokens'\nimport { Course } from '../../src/data'\nimport { ReactElement, useEffect } from 'react'\nimport { useLocalDiscounts, setDiscounts } from 'src/clientData'\nimport { callApi } from 'src/apiHelpers'\nimport { GetDiscountResult } from 'pages/api/discounts/[code]'\nimport Text from 'components/Text'\n\ntype Props = {\n  course: Course\n}\n\nconst Enroll:React.FC<Props> = (props) => {\n  let {data: discounts} = useLocalDiscounts()\n  let price = props.course?.cost || 0\n  let discount = discounts?.find(d=>d.course == props.course?.id)\n  useEffect(()=>{\n    (async function(){\n      if(!discount || !discounts) return\n      let res = await callApi<null, GetDiscountResult>('/api/discounts/'+discount.code)\n      if(res.status !== 200 ||\n        res.result.deleted ||\n        (res.result.max_redeems !== 0\n          && res.result.max_redeems <= res.result.redeems)) {\n        setDiscounts(discounts.filter(d=>d.code!==discount?.code))\n      }\n    })()\n  }, [discount, discounts])\n  if(discount) {\n    if(discount.type === 'absolute') price = price - discount.amount\n    else price = price - (Math.floor((discount.amount/100)*price))\n  }\n  //Laying out the Enroll Panel\n  return h(Box, {gap:16}, [\n    h(Box, {gap:8}, [\n      discount ? h(Cost, {green: true}, '$'+price) : null,\n      h(Cost, {discounted: !!discount}, '$' + props.course?.cost),\n    ]),\n    h(Box, {gap: 8, style:{color: colors.textSecondary}}, [\n      h('b', props.course?.duration),\n      props.course?.cohort_max_size === 0 ? null : h('b', `Up to ${props.course?.cohort_max_size} learners`),\n      h(Box, {gap: 4}, [\n        h('b', 'Prerequisites'),\n        h(Text, {source: props.course?.prerequisites, disallowedTypes:[\"heading\" as const]})\n      ]),\n    ]),\n    props.children as ReactElement ,\n  ])\n}\n\nexport default Enroll\n\n\nconst Cost = styled('span')<{discounted?:boolean, green?: boolean}>`\nwidth: min-content;\nline-height: 56px;\nfont-size: 56px;\nfont-weight: bold;\n${props=>props.green? `color: ${colors.accentSuccess};`:''}\n${props=>props.discounted ? `\nfont-size: 32px;\nline-height: 32px;\nbackground: linear-gradient(20deg, transparent 45.75%, currentColor 47.5%, currentColor 52.5%, transparent 53.25%);\n`: ''}\n`\n\n// Add a wrapper around Enroll Panel so apply the sticky feature on screens above 768px\nexport const StickyWrapper = styled('div')`\nposition: sticky;\ntop: 32px;\n`\n","import h from 'react-hyperscript'\nimport * as t from 'runtypes'\nimport {useState, useEffect, Fragment} from 'react'\nimport { CheckBox, Input } from './Form'\n\nlet TodoParser = t.Array(t.Boolean)\n\nexport function TodoList(props: {items: Array< string | React.ReactElement | null>, persistKey?: string}) {\n  let items = props.items.filter(i=>!!i)\n  let [checked, setChecked] = useState (new Array(items.length).fill(false))\n  useEffect(() => {\n    if(!props.persistKey) return\n    let savedValue = localStorage.getItem(props.persistKey)\n    try {\n      let localData = TodoParser.check(JSON.parse(savedValue || ''))\n      setChecked(localData)\n    }\n    catch(e){}\n  },[])\n  useEffect(()=>{\n    if(!props.persistKey) return\n    localStorage.setItem(props.persistKey, JSON.stringify(checked))\n  },[checked])\n\n  return h(Fragment, items.map((todo, index)=>{\n    return h(CheckBox, [\n      h(Input, {\n        type: 'checkbox',\n        checked: checked[index],\n        onChange: e=> {\n          let newValues = checked.slice(0)\n          newValues[index] = e.currentTarget.checked\n          setChecked(newValues)\n        }\n      }),\n      todo\n    ])\n  }))\n}\n","import {PaystackProps} from './types';\nimport {callPaystackPop} from './paystack-actions';\n\nexport default function usePaystackPayment(\n  options: PaystackProps,\n): (callback?: Function, onClose?: Function) => void {\n  const {\n    publicKey,\n    firstname,\n    lastname,\n    phone,\n    email,\n    amount,\n    reference,\n    metadata = {},\n    currency = 'NGN',\n    channels,\n    label = '',\n    plan = '',\n    quantity = '',\n    subaccount = '',\n    transaction_charge = 0,\n    bearer = 'account',\n    split,\n    split_code,\n  } = options;\n\n  function initializePayment(callback?: Function, onClose?: Function): void {\n      const paystackArgs: Record<string, any> = {\n        callback: callback ? callback : (): any => null,\n        onClose: onClose ? onClose : (): any => null,\n        key: publicKey,\n        ref: reference,\n        email,\n        firstname,\n        lastname,\n        phone,\n        amount,\n        currency,\n        plan,\n        quantity,\n        'data-custom-button': options['data-custom-button'] || '',\n        channels,\n        subaccount,\n        transaction_charge,\n        bearer,\n        label,\n        metadata,\n        split,\n        split_code,\n      };\n      callPaystackPop(paystackArgs);\n  }\n\n  return initializePayment;\n}\n","export const callPaystackPop = (paystackArgs: Record<string, any>): void => {\n  //@ts-ignore\n  const handler = window.PaystackPop && window.PaystackPop.setup(paystackArgs);\n  handler && handler.openIframe();\n};\n","// @ts-nocheck\nimport usePaystackPayment from \"./use-paystack\";\n\nexport default function compress(config, defaultConfig){\n    return usePaystackPayment(Object.assign(config, defaultConfig, { reference: new Date().getTime() })) as const\n}","import styled from '@emotion/styled'\nimport { useState, useEffect, useRef } from 'react'\nimport h from 'react-hyperscript'\n\nexport let TitleImg = styled('img')<{height?: number, width: number}>`\nimage-rendering: pixelated;\nimage-rendering: crisp-edges;\ndisplay: block;\nborder: 2px solid;\nheight: ${props=> props.height ? props.height +'px' : 'auto'};\nwidth: ${props=> props.width}px;\n`\n\nexport let AccentImg = styled('img')<{height?: number, width?: number}>`\nimage-rendering: pixelated;\nimage-rendering: -moz-crisp-edges;\nimage-rendering: crisp-edges;\ndisplay: block;\nborder: none;\nheight: ${props=> props.height ? props.height +'px' : '100px'};\nwidth: ${props=> props.width ? props.width +'px' : '100px'};\n`\n\nexport function HalfLoopImg(props:\n    {\n        src1:string,\n        src2:string,\n        alt:string,\n        startLoop:number,\n    }) {\n    let [looping, setLooping] = useState(false)\n    let imageRef = useRef<HTMLImageElement>(null)\n    useEffect(()=> {\n      if(imageRef.current?.complete && !looping) {\n        setTimeout(()=>setLooping(true), props.startLoop)\n      }\n    }, [])\n  \n    if(!looping) {\n      return h(AccentImg, {ref: imageRef, onLoad: () => {\n        setTimeout(()=>setLooping(true), props.startLoop)\n      }, src: props.src1, alt: props.alt })\n    }\n    return h(AccentImg, {src: props.src2, alt: props.alt })\n  }","import h from \"react-hyperscript\";\nimport { useUserData } from \"src/data\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport { useApi } from \"src/apiHelpers\";\nimport { EnrollMsg, EnrollResponse } from \"pages/api/cohorts/[cohortId]/enroll\";\nimport { getDiscounts, setDiscounts } from \"src/clientData\";\nimport { Box } from \"components/Layout\";\nimport { Modal } from \"components/Modal\";\nimport { Primary } from \"components/Button\";\nimport compress from \"src/paystack/compress-data\"\nimport toast from \"react-hot-toast\";\n// import {PaystackProps} from 'src/paystack/types';\n// import Toast from 'light-toast';\n\nconst errorNotify = (msg: string) =>\n  toast.error(msg, {\n    icon: \"😟\",\n  });\n\nconst successNotify = (msg: string) =>\n  toast.success(msg, {\n    icon: \"👏\",\n  });\n\nconst defaultConfig = {\n  publicKey: process.env.NEXT_PUBLIC_PAYSTACK_KEY,\n};\n\nconst onSuccess = () => {\n  successNotify(\"Your payment was successful!\");\n};\n\nconst onClose = () => {\n  errorNotify(\"Your payment failed, try again?\");\n};\n\nconst paystackHook = (config:{}) => {\n  try {\n    let initializePayment = compress(config, defaultConfig)\n    // @ts-ignore\n    initializePayment(onSuccess, onClose)();\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const SubEnrollButton: React.FC<{\n  id: number;\n  course: number;\n  max_size: number;\n  learners: number;\n  invited: boolean;\n}> = (props) => {\n  let { data: user } = useUserData();\n  let router = useRouter();\n  let [error, setError] = useState(false);\n  let [status, callEnroll] = useApi<EnrollMsg, EnrollResponse>(\n    [],\n    async (res) => {\n    \n      if (res.zeroCost)\n        await router.push(\n          \"/courses/[slug]/[id]/cohorts/[cohortId]\",\n          `/courses/${router.query.slug}/${props.course}/cohorts/${props.id}?welcome`\n        );\n      paystackHook(res);\n    }\n  );\n\n  let onClick = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    if (user === false)\n      await router.push(\"/login?redirect=\" + encodeURIComponent(router.asPath));\n    if (!props.id) return;\n    let discount = getDiscounts().find((d) => d.course === props.course);\n    let res = await callEnroll(`/api/cohorts/${props.id}/enroll`, {\n      discount: discount?.code,\n      paystack: true,\n    });\n\n    if (res.status === 403) {\n      setError(true);\n      setDiscounts(\n        getDiscounts().filter(\n          (d) => res.status === 403 && d.code !== res.result.discount\n        )\n      );\n    }\n  };\n\n  return h(Box, { gap: 4, style: { alignItems: \"center\" } }, [\n    h(Modal, { display: error }, [\n      h(\"h3\", \"Sorry, the discount code you're using is no longer valid\"),\n    ]),\n    h(\n      Primary,\n      {\n        onClick,\n        status,\n        disabled:\n          !props.invited ||\n          (props.max_size !== 0 && props.max_size === props.learners),\n      },\n      props.children as React.ReactElement\n    ),\n  ]);\n};\n","import h from 'react-hyperscript'\nimport { useUserData } from \"src/data\"\nimport { useRouter } from \"next/router\"\nimport { useState } from \"react\"\nimport { useApi } from \"src/apiHelpers\"\nimport { EnrollMsg, EnrollResponse } from \"pages/api/cohorts/[cohortId]/enroll\"\nimport { getDiscounts, setDiscounts } from \"src/clientData\"\nimport { Box } from \"components/Layout\"\nimport { Modal } from \"components/Modal\"\nimport { Primary } from \"components/Button\"\nimport { getStripe } from 'src/utils'\n\nexport const EnrollButton:React.FC<{\n  id:number,\n  course: number,\n  max_size: number,\n  learners: number,\n  invited: boolean\n}> = (props) => {\n  let {data: user} = useUserData()\n  let router = useRouter()\n  let [error, setError] = useState(false)\n  let [status, callEnroll] = useApi<EnrollMsg, EnrollResponse>([], async (res)=>{\n    let stripe = await getStripe()\n    if(res.zeroCost) await router.push('/courses/[slug]/[id]/cohorts/[cohortId]', `/courses/${router.query.slug}/${props.course}/cohorts/${props.id}?welcome`)\n    else await stripe?.redirectToCheckout({sessionId: res.sessionId})\n  })\n\n  let onClick= async (e:React.MouseEvent)=> {\n    e.preventDefault()\n    if(user === false) await router.push('/login?redirect=' + encodeURIComponent(router.asPath))\n    if(!props.id) return\n    let discount = getDiscounts().find(d=>d.course === props.course)\n    let res = await callEnroll(`/api/cohorts/${props.id}/enroll`, {discount: discount?.code as string | undefined, paystack: undefined})\n    if(res.status === 403) {\n      setError(true)\n      setDiscounts(getDiscounts().filter(d=>res.status === 403 && d.code !== res.result.discount))\n    }\n  }\n\n  return  h(Box, {gap: 4, style:{alignItems: 'center'}}, [\n    h(Modal, {display: error}, [\n      h('h3', \"Sorry, the discount code you're using is no longer valid\")\n    ]),\n    h(Primary, {onClick, status, disabled: !props.invited || (props.max_size !==0 && props.max_size === props.learners)},\n      props.children as React.ReactElement),\n    props.max_size === 0 ? null : props.max_size > props.learners\n      ? h('span.accentSuccess', `${props.max_size - props.learners} ${props.max_size - props.learners === 1 ? 'spot' : 'spots'} left!`)\n      : h('span.accentRed', `Sorry! This cohort is full.`)\n  ])\n}\n","import h from 'react-hyperscript'\nimport { Cohort } from 'src/data'\nimport { Modal } from 'components/Modal'\nimport { Box } from 'components/Layout'\nimport { Info} from 'components/Form'\nimport { prettyDate } from 'src/utils'\nimport { Primary, Secondary } from 'components/Button'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport { DISCOURSE_URL } from 'src/constants'\n\nexport const WelcomeModal = (props: {display:boolean, cohort:Cohort} ) => {\n  let router = useRouter()\n  return h(\n    Modal,\n    {\n      display: props.display,\n      onExit: () => {\n        router.replace(\n          `/courses/[slug]/[id]/cohorts/[cohortId]`,\n          `/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}`,\n          { shallow: true }\n        );\n      },\n    },\n    h(Box, { gap: 32, width: 640, style: { textAlign: \"center\" } }, [\n      h(\"h2\", \"You're enrolled!\"),\n      h(\n        Info,\n        {},\n        h(Box, [\n          h(\n            \"b\",\n            `This cohort starts on ${prettyDate(props.cohort.start_date)}`\n          ),\n          h(Box, { gap: 8 }, [\n            h(\n              Link,\n              {\n                href: \"/calendar\",\n              },\n              h(\"a\", [\n                h(\n                  Secondary,\n                  { style: { justifySelf: \"center\" } },\n                  \"Add to calendar\"\n                ),\n              ])\n            ),\n            h(\"p\", [\n              h(\"small.textSecondary\", \"If you’ve added to calendar from\"),\n              h(\n                \"small.textSecondary\",\n                \"KrakenEdu before, you don’t need to do this. \"\n              ),\n            ]),\n          ]),\n        ])\n      ),\n      h(Box, [\n        h(\n          \"b\",\n          `Head to the cohort forum to introduce yourself and see what you'll be doing on your first day`\n        ),\n        h(\n          \"a\",\n          {\n            style: { margin: \"auto\" },\n            href: `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`,\n          },\n          h(Primary, \"Get started\")\n        ),\n      ]),\n    ])\n  );\n}\n","import h from 'react-hyperscript'\nimport { Secondary, Primary, LinkButton } from 'components/Button'\nimport { FormBox, LabelBox, Box } from 'components/Layout'\nimport { colors } from 'components/Tokens'\nimport {Cross} from 'components/Icons'\nimport { useState } from 'react'\nimport { Input, Select, Textarea } from 'components/Form'\nimport { useApi } from 'src/apiHelpers'\nimport { CreateEventMsg, CreateEventResponse } from 'pages/api/events'\nimport { Cohort } from 'src/data'\nimport styled from '@emotion/styled'\nimport { Pill } from 'components/Pill'\n\ntype Event = {\n  name: string,\n  start_date: string,\n  start_time: string,\n  end_time: string,\n  location: string,\n  description: string\n  everyone: boolean\n  people: string[]\n}\n\nexport const CreateEvent = (props: {\n  cohort:number,\n  people: string[],\n  mutate: (e:Cohort[\"cohort_events\"][0])=>void\n}) => {\n  let [open, setOpen] = useState(false)\n  let [event, setEvent] = useState<Event>({\n    name: '',\n    start_date: '',\n    start_time: '',\n    end_time: '',\n    location: '',\n    description: '',\n    everyone: false,\n    people: []\n  })\n  let [status, callCreateEvent] = useApi<CreateEventMsg, CreateEventResponse>([event], (e)=>{\n    if(e.type === 'cohort') props.mutate(e.event)\n    setEvent({\n      everyone: false,\n      people:[],\n      name: '',\n      start_date: '',\n      start_time: '',\n      end_time: '',\n      location: '',\n      description: ''\n    })\n    setOpen(false)\n  })\n\n  let onSubmit = (e: React.FormEvent) =>{\n    e.preventDefault()\n\n    let d1 = event.start_date.split('-').map(x=>parseInt(x))\n    let t1 = event.start_time.split(':').map(x=>parseInt(x))\n    let t2 = event.end_time.split(':').map(x=>parseInt(x))\n    let start_date = new Date(d1[0], d1[1] -1, d1[2], t1[0], t1[1])\n    let end_date = new Date(d1[0], d1[1] - 1, d1[2], t2[0], t2[1])\n\n    callCreateEvent('/api/events', {\n      type: 'cohort',\n      people: event.people,\n      cohort: props.cohort,\n      name: event.name,\n      description: event.description,\n      location: event.location,\n      start_date: start_date.toISOString(),\n      end_date: end_date.toISOString()\n    })\n  }\n  return h(Box, [\n    h(Secondary, {disabled: open, onClick: () => setOpen(true)}, '+ Add New Event'),\n    !open ? null\n      : h(FormBox, {onSubmit}, [\n        h(EventForm, {state: event, onChange: setEvent, people: props.people}),\n        h(Box, {h: true, style:{justifySelf: \"right\"}}, [\n          h(Secondary, {onClick: ()=>setOpen(!open)}, \"Cancel\"),\n          h(Primary, {type: 'submit', status}, \"Create Event\")\n        ])\n      ])\n  ])\n}\n\nexport const EventForm = (props:{onChange: (e: Event)=>void, state: Event, people: string[]}) => {\n  let timezone = new Date().toLocaleDateString('en-us',{timeZoneName:\"short\"}).split(', ')[1]\n  return h(Box, {width: 640, padding: 32, gap: 32, style: {backgroundColor: colors.grey95}}, [\n      h(LabelBox, {gap:8}, [\n        h('h4', \"Event Name\"),\n        h(Input, {\n          type: 'text',\n          required: true,\n          onChange: e=>props.onChange({...props.state, name: e.currentTarget.value}),\n          value: props.state.name\n        })\n      ]),\n      h(Box, {h: true, gap: 32, style:{gridAutoColumns: 'auto'}}, [\n        h(LabelBox, {gap:8}, [\n          h('h4', 'Date'),\n          h(Input, {\n            type: 'date',\n            placeholder: 'yyyy-mm-dd',\n            required: true,\n            value: props.state.start_date,\n            onChange: e => props.onChange({...props.state, start_date: e.currentTarget.value})\n          })\n        ]),\n        h(LabelBox, {gap:8}, [\n          h('h4', 'Start Time ' + `(${timezone})`),\n          h(Input, {\n            type: 'time',\n            placeholder: '23:59',\n            required: true,\n            value: props.state.start_time,\n            onChange: e => props.onChange({...props.state, start_time: e.currentTarget.value})\n          })\n        ]),\n        h(LabelBox, {gap:8}, [\n          h('h4', 'End Time ' + `(${timezone})`),\n          h(Input, {\n            type: \"time\",\n            required: true,\n            value: props.state.end_time,\n            onChange: e => props.onChange({...props.state, end_time: e.currentTarget.value})\n          })\n        ]),\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('div', [\n          h('h4', \"Location\"),\n          h('small.textSecondary', \"A link to where the conversation will happen (like Zoom)\")\n        ]),\n        h(Input, {\n          type: 'text',\n            required: true,\n          value: props.state.location,\n          onChange: e => props.onChange({...props.state, location: e.currentTarget.value})\n        })\n      ]),\n      h(LabelBox, {gap: 8}, [\n        h('h4', \"Description\"),\n        h(Textarea, {\n          value: props.state.description,\n          onChange: e => props.onChange({...props.state, description: e.currentTarget.value})\n        })\n      ]),\n    h(Box, [\n      h('h4', \"Attendees\"),\n      h(Select, {onChange:(e)=>{\n        if(e.currentTarget.value !== ''){\n          props.onChange({...props.state, people: [...props.state.people, e.currentTarget.value]})\n          e.currentTarget.value = ''\n        }\n      }}, [\n        h('option', {value:''}, props.state.people.length === 0 ? 'Everyone' : 'Select another attendee'),\n        ...props.people\n          .filter(p=>!props.state.people.includes(p))\n          .map(p=>h('option', {value: p}, p))\n      ]),\n      h(AttendeeList, props.state.people.map(p=> h('div', {style:{display:'grid', gridTemplateColumns: 'auto min-content', maxWidth: '400px'}}, [\n        h(AttendeePill, [\n        p, ' ', h(LinkButton, {style:{color: colors.textSecondary}, onClick:(e)=>{\n          e.preventDefault()\n          props.onChange({...props.state, people: props.state.people.filter(person=>person!==p)})\n        }}, h(Cross, {width: 10}))\n        ])\n      ])))\n    ])\n  ])\n}\n\nlet AttendeeList = styled('div')`\ndisplay: flex;\nflex-wrap: wrap;\n`\n\nlet AttendeePill = styled(Pill)`\nbackground-color: ${colors.appBackground};\nmargin: 0 8px 8px 0;\n`\n","import h from 'react-hyperscript'\nimport { getTimeBetween } from 'src/utils'\nimport { useState } from 'react'\nimport { Box, FormBox } from 'components/Layout'\nimport styled from '@emotion/styled'\nimport Link from 'next/link'\nimport { colors } from 'components/Tokens'\nimport {Calendar, Pencil} from 'components/Icons'\nimport { EventForm } from './CreateEvent'\nimport { SmallLinkButton, LinkButton, Primary, IconButton, Destructive } from 'components/Button'\nimport { useApi } from 'src/apiHelpers'\nimport { UpdateEventMsg, UpdateEventResult, DeleteEventResult } from 'pages/api/events/[id]'\nimport Text from 'components/Text'\nimport { Cohort, useUserData } from 'src/data'\nimport { Pill } from 'components/Pill'\nimport { useFormData } from 'src/hooks'\n\nexport const CohortEvents = (props: {\n  facilitating: boolean,\n  inCohort: boolean,\n  cohort: number,\n  people: string[],\n  events:Cohort[\"cohort_events\"],\n  mutate: (E:Cohort[\"cohort_events\"])=>void,\n  showCal: boolean,\n})=>{\n  let {data:user} = useUserData()\n  let pastEvents = props.events.filter((event)=>new Date() > new Date(event.events.end_date))\n  let [showPastEvents, setShowPastEvents] = useState(pastEvents.length === props.events.length)\n\n  let displayedEvents = props.events\n        .filter((event)=>showPastEvents ? true : new Date() < new Date(event.events.end_date) )\n        .sort((a, b) => new Date(a.events.start_date) > new Date(b.events.start_date) ? 1 : -1)\n  return h(Box, [\n    // (inCohort || isFacilitator) && cohort.cohort_events.length > 0 ? h(Link, {href: \"/calendar\"}, \n    h(Box, {h:true, gap:0, style: {gridTemplateColumns: 'auto min-content', gridGap:0}}, [\n\n      pastEvents.length === 0 ? null : h(SmallLinkButton, {textSecondary: true, onClick: ()=>{\n        setShowPastEvents(!showPastEvents)\n      }}, showPastEvents ? \"hide past events\" : \"show past events\"),\n      !props.showCal ? null :\n        h(Link, {href: \"/calendar\"}, h(SmallLinkButton, {textSecondary: true, style:{justifySelf: 'end'}},\n        h(Box, {h:true, gap:8, style:{textAlign:'right'}}, ['add to your calendar ', Calendar]),\n      ))\n\n    ]),\n\n    h(TimelineContainer, {},\n      displayedEvents\n        .map((event,index) => h(Event, {\n          user: user ? user.id : undefined,\n          inCohort: props.inCohort,\n          key: event.events.id,\n          facilitating: props.facilitating,\n          event,\n          people: props.people,\n          cohort: props.cohort,\n          mutate: (newEvent) => {\n            let events = props.events.slice(0)\n            events[index] === newEvent\n            return props.mutate(events)\n          },\n          mutateDelete: ()=>{\n            let events = props.events.slice(0)\n            events.splice(index, 1)\n            return props.mutate(events)\n          },\n          first: showPastEvents ? index === pastEvents.length : index === 0,\n          last: index === displayedEvents.length -1,\n        }))\n     )\n  ])\n\n}\n\nconst Event = (props: {\n  event:Cohort[\"cohort_events\"][0],\n  user?: string,\n  facilitating: boolean\n  inCohort: boolean\n  people: string[]\n  cohort: number,\n  last: boolean,\n  first: boolean,\n  mutate: (e:Cohort[\"cohort_events\"][0])=>void,\n  mutateDelete: ()=>void,\n})=>{\n  let [editting, setEditing] = useState(false)\n  let [expanded, setExpanded] = useState(props.first)\n  let event = props.event\n  let start_date = new Date(event.events.start_date)\n  let end_date = new Date(event.events.end_date)\n  let past = end_date < new Date()\n\n  let {state, setState} = useFormData({\n    everyone: !event.everyone,\n    name: event.events.name,\n    location: event.events.location,\n    description: event.events.description,\n    start_date: `${start_date.getFullYear()}-${('0'+(start_date.getMonth()+1)).slice(-2)}-${('0'+start_date.getDate()).slice(-2)}`,\n    start_time: start_date.toLocaleTimeString([], {hour:\"2-digit\", minute: \"2-digit\", hour12: false}),\n    end_time: end_date.toLocaleTimeString([], {hour:\"2-digit\", minute: \"2-digit\", hour12: false}),\n    people: event.events.people_in_events.map(p=>p.people.username)\n  }, [event])\n\n  let[status, callUpdateEvent] = useApi<UpdateEventMsg, UpdateEventResult>([props], async (event)=>{\n    if(event.type === 'cohort') props.mutate(event.data)\n    setEditing(false)\n  })\n\n  let [deleteStatus, callDeleteEvent] = useApi<null, DeleteEventResult>([], ()=>{\n    setEditing(false)\n    props.mutateDelete()\n  })\n\n  const onSubmit = (e: React.FormEvent)=>{\n    e.preventDefault()\n    let event = state\n\n    let d1 = event.start_date.split('-').map(x=>parseInt(x))\n    let t1 = event.start_time.split(':').map(x=>parseInt(x))\n    let t2 = event.end_time.split(':').map(x=>parseInt(x))\n    let start_date = new Date(d1[0], d1[1] -1, d1[2], t1[0], t1[1])\n    let end_date = new Date(d1[0], d1[1] - 1, d1[2], t2[0], t2[1])\n\n    callUpdateEvent('/api/events/'+props.event.events.id, {\n      type: 'cohort',\n      cohort: props.cohort,\n      data: {\n        name: event.name,\n        description: event.description,\n        location: event.location,\n        start_date: start_date.toISOString(),\n        end_date: end_date.toISOString(),\n        people: event.people\n      }\n    })\n  }\n\n  return h(EventContainer, {last: props.last, selected: expanded}, [\n    h(Dot, {selected: expanded, onClick: ()=>setExpanded(event.events.description === '' ? false : !expanded), past}),\n    editting\n      ? h(FormBox, {onSubmit}, [\n      h(EventForm, {onChange: setState, state, people: props.people}),\n      h(Box, {h: true, style:{justifySelf: \"right\", alignItems: \"center\"}}, [\n        h(LinkButton, {textSecondary: true, onClick: ()=>setEditing(false)}, \"cancel\"),\n        h(Destructive, {status: deleteStatus, onClick: (e)=>{\n          e.preventDefault()\n          callDeleteEvent('/api/events/'+props.event.events.id, null, \"DELETE\")\n        }}, \"Delete Event\"),\n        h(Primary, {type: 'submit', status}, \"Save Changes\")\n      ])\n    ])\n      : h(Box, [\n        h(Box, [\n          h(Box, {gap: 8}, [\n            h('p.textSecondary', {style: {color: past ? colors.grey55 : undefined}}, [\n              h('b', {style:{fontWeight:\"900\"}}, start_date.toLocaleDateString([], {weekday: 'short', month: \"short\", day: \"numeric\"}).toUpperCase()),\n              ' ' + start_date.toLocaleTimeString([], {hour: \"numeric\", minute: \"2-digit\", hour12: true, timeZoneName: 'short'}) +\n                ` | ` + getTimeBetween(start_date, end_date) + ' hrs ',\n              (()=>{\n                if(event.everyone) return null\n                switch(event.events.people_in_events.length) {\n                  case 1: return h(Pill, {style:{alignSelf:\"center\"}}, \"Solo\")\n                  case 2: return h(Pill, {style:{alignSelf:\"center\"}}, \"1:1\")\n                  default: return h(Pill, {style:{alignSelf:\"center\"}}, \"Group\")\n                }\n              })()\n            ]),\n            h(Box, {h: true, style:{gridTemplateColumns:\"auto auto min-content\"}}, [\n              h(EventTitle, {past, onClick: ()=>setExpanded(!expanded)}, [\n                event.events.name\n              ]),\n              props.facilitating || props.user === event.events.created_by ? h(IconButton, {\n                style: {alignSelf: 'baseline', justifySelf: 'right'},\n                onClick: ()=>setEditing(true)\n              }, Pencil) : null\n            ]),\n          ]),\n          event.events.location && expanded ? h('a', {href: event.events.location}, h(Primary,  \"Join Event\")) : null,\n        ]),\n        !expanded || event.events.description === '' ? null\n          : h(Box, [\n            h('div', {\n              style: {padding: '32px', backgroundColor: 'white', border: 'dotted 1px', overflow:'auto', overflowWrap: \"break-word\"}}, h(Text, {source: event.events.description})),\n            event.events.people_in_events.length === 0 ? null : h('p.textSecondary', [h('b', 'Attendees: '), event.events.people_in_events.map(p=>p.people.display_name || p.people.username).join(', ')])\n          ])\n      ])\n  ])\n}\n\nconst Dot = styled('div')<{selected: boolean, past: boolean}>`\n${p => {\nlet size = p.selected ? 24 : 16\nreturn `\nwidth: ${size}px;\nheight: ${size}px;\nmargin-right: ${p.selected ? 32 : 34}px;\n`}}\nbox-sizing: border-box;\nborder: 4px solid;\nbackground-color: white;\nborder-radius: 50%;\n\n${p=>p.past ? `background-color: ${colors.grey80};` : ''}\n\n&:hover {\ncursor: pointer;\n}\n`\n\nconst EventTitle = styled('h3')<{past: boolean}>`\n${p=>p.past ? `color: ${colors.textSecondary};` : ''}\n&:hover {\ncursor: pointer;\n}\n`\nconst TimelineContainer = styled('div')`\ndisplay: grid;\ngrid-gap: 32px;\nborder-left: 4px solid;\npadding-left: 32px;\n`\n\nconst EventContainer = styled('div')<{last?: boolean, selected: boolean}>`\nbox-sizing: border-box;\nmargin-left: -${p=>p.selected ? 46 : 42}px;\ndisplay: grid;\ngrid-template-columns: min-content auto;\nmax-width: 1024px;\n${p=>p.last ? `background-color: ${colors.appBackground};` : ''}\n`\n","import h from 'react-hyperscript'\n\nimport styled from '@emotion/styled'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport {useState, useEffect, Fragment} from 'react'\nimport { InferGetStaticPropsType } from 'next'\n\nimport CourseDetails from 'components/Course/Enroll'\nimport { EnrollButton } from 'components/Course/EnrollButton';\nimport { SubEnrollButton } from 'components/Course/SubEnrollButton';\n\nimport { TwoColumn, Box, LabelBox, Seperator, Sidebar, WhiteContainer} from 'components/Layout'\nimport { VerticalTabs, StickyWrapper } from 'components/Tabs'\nimport { Primary, Destructive, DestructiveSmallButton, Secondary, LinkButton } from 'components/Button'\nimport Loader, { PageLoader } from 'components/Loader'\nimport { CheckBox, Info, Input } from 'components/Form'\nimport { Modal } from 'components/Modal'\nimport {TwoColumnBanner} from 'components/Banner'\nimport Text from 'components/Text'\nimport {WelcomeModal} from 'components/pages/cohorts/WelcomeModal'\n\nimport { cohortName, prettyDate} from 'src/utils'\nimport {  getTaggedPost } from 'src/discourse'\nimport {DISCOURSE_URL} from 'src/constants'\nimport { callApi, useApi } from 'src/apiHelpers'\nimport { useCohortData, useUserCohorts, useUserData, useCourseData, Cohort, useProfileData } from 'src/data'\nimport ErrorPage from 'pages/404'\nimport { cohortDataQuery, UpdateCohortMsg, UpdateCohortResponse } from 'pages/api/cohorts/[cohortId]'\nimport { courseDataQuery } from 'pages/api/courses/[id]'\nimport Head from 'next/head'\nimport { CohortEvents } from 'components/pages/cohorts/Events'\nimport { CreateEvent } from 'components/pages/cohorts/CreateEvent'\nimport { AccentImg } from 'components/Images'\nimport { TodoList } from 'components/TodoList'\nimport { UnEnrollMsg, UnEnrollResponse } from 'pages/api/cohorts/[cohortId]/enroll'\n\ntype Props = InferGetStaticPropsType<typeof getStaticProps>\nconst WrappedCohortPage = (props: Props)=>  props.notFound ? h(ErrorPage) : h(CohortPage, props)\nexport default WrappedCohortPage\nconst CohortPage = (props: Extract<Props, {notFound:false}>) => {\n  let router = useRouter()\n  let {data: user} = useUserData()\n  let {data: userCohorts} = useUserCohorts()\n  let {data:profile} = useProfileData(user ? user.username : undefined)\n  let {data: cohort, mutate} = useCohortData(props.cohortId, props.cohort)\n  let {data: course} = useCourseData(props.courseId, props.course)\n  let selectedTab = router.query.tab as string | undefined\n\n  useEffect(()=>{\n    mutate(undefined, true)\n  }, [!!cohort])\n\n\n  if(!cohort || !course) return h(PageLoader)\n\n  let invited = !!userCohorts?.invited_courses.find(course=>course.id === props.course.id )\n  let inCohort = cohort.people_in_cohorts.find(p => p.person === (user ? user.id : undefined))\n  let isFacilitator = !!user && !!cohort.cohort_facilitators.find(f=>user &&f.people.username === user.username)\n  let isStarted = cohort && new Date() > new Date(cohort.start_date)\n\n  let Tabs = {\n    Artifacts: props.artifacts.text === '' ? null : h(Box, {gap: 64}, [\n      h(Box, {gap: 32},[\n        h(Box, [\n          h(Text, {source: props.artifacts?.text})\n        ]),\n      ])\n    ]),\n    Schedule: cohort.cohort_events.length === 0 && !isFacilitator ? null : h(Box, {gap: 32}, [\n      isFacilitator || inCohort ? h(CreateEvent, {\n        cohort: cohort.id,\n        people: [...cohort.people_in_cohorts.map(p=>p.people.username), ...cohort.cohort_facilitators.map(f=>f.people.username)],\n        mutate: (c)=>{\n          if(!cohort) return\n          mutate({...cohort, cohort_events: [...cohort.cohort_events, c]})\n        }}) : null,\n      h(Box, [\n        cohort.cohort_events.length === 0\n          ? h(WhiteContainer, [\n            h(Box, {gap:16, style: {maxWidth: 400, textAlign: 'center', margin: 'auto'}}, [\n              h( EmptyImg, {src: '/img/empty.png'}),\n              h('small.textSecondary', \"Events are great for scheduling live calls or other important cohort dates. Learners can add these to their calendars. Looks like you haven't created any events yet. Hit the button above to schedule one!!\" ),\n            ])])\n          : h(CohortEvents, {\n            facilitating: isFacilitator,\n            inCohort:!!inCohort,\n            people: cohort.people_in_cohorts.map(p=>p.people.username),\n            cohort: cohort.id,\n            events: cohort.cohort_events.filter(c=>{\n              if(!user || !cohort) return c.everyone\n              if(isFacilitator) return true\n              return c.everyone || c.events.people_in_events.find(p=>user&&p.people.username===user.username)\n            }),\n            mutate: (events)=>{\n              if(!cohort) return\n              mutate({\n                ...cohort, cohort_events: events})\n            },\n            showCal: (inCohort || isFacilitator) && cohort.cohort_events.length > 0\n          })\n      ])\n    ]),\n    [course.type === 'club' ? \"Details\" : \"Curriculum\"]: h(Box, [\n      !isFacilitator ? null : h(Info, [\n        `💡 You can make changes to this page by editing `,\n        h('a', {href: `${DISCOURSE_URL}/session/sso?return_path=/t/${props.curriculum?.id}`}, `this topic`),\n        ` in the forum`\n      ]),\n      h(Text, {source:props.curriculum?.text})\n    ]),\n    Members: h(CohortMembers, {cohort: cohort, isFacilitator, mutate, user: user ? user.id : undefined})\n      } as {[k:string]:React.ReactElement}\n  let tabKeys = Object.keys(Tabs).filter(t=>!!Tabs[t])\n\n  return h(\"div\", {}, [\n    h(Head, {\n      children: [\n        h(\"meta\", {\n          property: \"og:title\",\n          content: course.name,\n          key: \"og:title\",\n        }),\n        h(\"meta\", {\n          property: \"og:description\",\n          content: \"Starting \" + prettyDate(cohort.start_date),\n          key: \"og:description\",\n        }),\n        h(\"meta\", {\n          property: \"og:image\",\n          content: course.card_image.split(\",\")[0],\n          key: \"og:image\",\n        }),\n        h(\"meta\", {\n          property: \"twitter:card\",\n          content: \"summary\",\n          key: \"twitter:card\",\n        }),\n      ],\n    }),\n    h(WelcomeModal, {\n      display: router.query.welcome !== undefined,\n      cohort,\n      user_calendar: profile ? profile.calendar_id : \"\",\n    }),\n    h(Banners, {\n      cohort,\n      mutate,\n      enrolled: !!inCohort,\n      facilitating: isFacilitator,\n    }),\n    h(Box, { gap: 32 }, [\n      h(TwoColumn, [\n        h(Box, { gap: 8, style: { gridColumn: 1 } }, [\n          course.type === \"course\"\n            ? null\n            : h(\n                Box,\n                { h: true },\n                props.course.card_image\n                  .split(\",\")\n                  .map((src) =>\n                    h(\"img\", { src, style: { imageRendering: \"pixelated\" } })\n                  )\n              ),\n          h(\"h1\", cohortName(cohort.name)),\n          h(\n            Link,\n            {\n              href: `/courses/${cohort.courses.slug}/${cohort.courses.id}`,\n            },\n            h(\"a.notBlue\", {}, h(\"h3.textSecondary\", cohort?.courses.name))\n          ),\n          h(\"p.big\", cohort.description),\n        ]),\n        Tabs[selectedTab ? selectedTab : tabKeys[0]],\n        h(Sidebar, {}, [\n          h(StickyWrapper, [\n            h(Box, { gap: 16 }, [\n              inCohort || isStarted || isFacilitator\n                ? null\n                : h(CourseDetails, { course }),\n              inCohort || isStarted || isFacilitator\n                ? null\n                : \n            h(Box, [\n               h(LabelBox,{style:{fontSize: '2rem'}} ,\"Join this cohort\"),\n                h(SubEnrollButton, {\n                      id: cohort.id,\n                      course: course.id,\n                      max_size: course.cohort_max_size,\n                      learners: cohort.people_in_cohorts.length,\n                      invited: !course.invite_only || invited,\n                    },  \"via Paystack\"),\n                h(EnrollButton,\n                    {\n                      id: cohort.id,\n                      course: course.id,\n                      max_size: course.cohort_max_size,\n                      learners: cohort.people_in_cohorts.length,\n                      invited: !course.invite_only || invited,\n                    },\n                    \"via Stripe\"\n                  ),\n                   ]),\n              h(Box, [\n                h(\"h3\", \"Information\"),\n                h(VerticalTabs, {\n                  selected:\n                    selectedTab && Tabs[selectedTab] ? selectedTab : tabKeys[0],\n                  tabs: tabKeys,\n                  onChange: (tab) => {\n                    let route = new URL(window.location.href);\n                    route.searchParams.set(\"tab\", tab);\n                    router.replace(route, undefined, { shallow: true });\n                  },\n                }),\n              ]),\n              inCohort || isFacilitator || cohort.completed\n                ? h(Box, {}, [\n                    !isFacilitator\n                      ? null\n                      : h(\n                          Link,\n                          { href: window.location.pathname + \"/settings\" },\n                          h(\"a\", {}, h(Primary, \"Cohort Settings\"))\n                        ),\n                    !inCohort && !isFacilitator\n                      ? null\n                      : h(Box, [\n                          h(\n                            \"a\",\n                            {\n                              href: `${DISCOURSE_URL}/session/sso?return_path=/c/${cohort.category_id}`,\n                            },\n                            h(Secondary, \"The Forum\")\n                          ),\n                          !isFacilitator\n                            ? null\n                            : h(\n                                Link,\n                                {\n                                  href:\n                                    \"/courses/[slug]/[id]/cohorts/[cohortId]/templates\",\n                                  as: `/courses/${cohort.courses.slug}/${cohort.courses.id}/cohorts/${cohort.id}/templates`,\n                                },\n                                h(Secondary, \"Forum Post from Template\")\n                              ),\n                          !cohort.completed && isFacilitator && isStarted\n                            ? h(MarkCohortComplete, { cohort, mutate })\n                            : null,\n                        ]),\n                  ])\n                : null,\n            ]),\n          ]),\n        ]),\n      ]),\n    ]),\n  ]);\n}\n\n\nexport let EmptyImg = styled ('img') `\nimage-rendering: pixelated;\nimage-rendering: -moz-crisp-edges;\nimage-rendering: crisp-edges;\ndisplay: block;\nmargin: auto auto;\nborder: none;\nheight: 200px;\nwidth: 200px;\n`\n\nexport const CohortMembers = (props:{cohort:Cohort, isFacilitator: boolean, user?: string, mutate: (c:Cohort)=>void}) => {\n  let [unenrollState, setUnenrollState] = useState<{personID:string, username: string, cohortID:number, display_name?:string, removeMember:()=>void}>()\n  return h(Fragment, [\n    !unenrollState\n      ? null\n      : h(UnenrollModal, {\n          display: !!unenrollState,\n          onExit: () => setUnenrollState(undefined),\n          ...unenrollState,\n        }),\n    h(Box, { gap: 16 }, [\n      h(\"h3\", \"Facilitators\"),\n      props.isFacilitator\n        ? null\n        : h(Info, [\n            `Questions about this `,\n            props.cohort.courses.type === \"club\" ? `club` : `course`,\n            `? `,\n            h(\n              \"a\",\n              {\n                href: `https://forum.krakenedu.com/new-message?groupname=${props.cohort.courses.slug}-m`,\n                target: `_blank`,\n              },\n              `Message the facilitator`\n            ),\n            ` on the forum.`,\n          ]),\n      ...props.cohort.cohort_facilitators.map((f) =>\n        h(Box, [\n          props.user === f.facilitator\n            ? h(Info, [\n                `💡 You can edit your bio in the profile tab on your `,\n                h(Link, { href: \"/dashboard\" }, h(\"a\", \"dashboard\")),\n              ])\n            : null,\n          h(\"h3\", [\n            ``,\n            h(\n              Link,\n              {\n                href: \"/people/[id]\",\n                as: `/people/${f.people.username}`,\n              },\n              h(\n                \"a\",\n                { className: \"notBlue\" },\n                f.people.display_name || f.people.username\n              )\n            ),\n            f.people.pronouns\n              ? h(\"span.textSecondary\", {}, ` (${f.people.pronouns})`)\n              : null,\n          ]),\n          h(Text, { source: f.people.bio || \"\" }),\n        ])\n      ),\n\n      // message facilitator - shows for logged in and anon users; hidden on things you're facilitating\n\n      props.cohort.people_in_cohorts.length === 0\n        ? null\n        : h(Box, { h: true }, [\n            h(\"h4\", [\n              \"Members \",\n              h(\n                \"span.textSecondary\",\n                `(${props.cohort.people_in_cohorts.length}${\n                  props.cohort.courses.cohort_max_size !== 0\n                    ? `/${props.cohort.courses.cohort_max_size}`\n                    : \"\"\n                })`\n              ),\n            ]),\n            !props.isFacilitator\n              ? null\n              : h(\n                  \"a\",\n                  {\n                    href: `mailto:?bcc=${props.cohort.people_in_cohorts\n                      .map((p) => p.people.email)\n                      .join(\",\")}`,\n                  },\n                  \"email everyone\"\n                ),\n          ]),\n      ...props.cohort.people_in_cohorts.map((person) => {\n        return h(\n          \"div\",\n          { style: { display: \"grid\", gridTemplateColumns: \"auto auto\" } },\n          [\n            h(Box, { h: true }, [\n              h(\n                Link,\n                {\n                  href: \"/people/[id]\",\n                  as: `/people/${person.people.username}`,\n                },\n                [\n                  h(\n                    \"a\",\n                    { className: \"notBlue\" },\n                    person.people.display_name || person.people.username\n                  ),\n                ]\n              ),\n              person.people.pronouns\n                ? h(\"span.textSecondary\", {}, ` (${person.people.pronouns})`)\n                : null,\n            ]),\n            !props.isFacilitator\n              ? null\n              : h(\"div\", { style: { justifySelf: \"right\" } }, [\n                  h(\n                    \"a\",\n                    {\n                      style: { marginRight: \"10px\" },\n                      href: `mailto:${person.people.email}`,\n                    },\n                    \"email\"\n                  ),\n                  h(\n                    DestructiveSmallButton,\n                    {\n                      onClick: () => {\n                        setUnenrollState({\n                          personID: person.person,\n                          cohortID: props.cohort.id,\n                          username: person.people.username,\n                          display_name: person.people.display_name,\n                          removeMember: () => {\n                            props.mutate({\n                              ...props.cohort,\n                              people_in_cohorts: props.cohort.people_in_cohorts.filter(\n                                (p) => p.person !== person.person\n                              ),\n                            });\n                          },\n                        });\n                      },\n                    },\n                    \"unenroll\"\n                  ),\n                ]),\n          ]\n        );\n      }),\n    ]),\n  ]);\n}\n\nconst UnenrollModal = (props:{\n  personID: string,\n  username: string,\n  cohortID:number,\n  display_name?: string,\n  removeMember: ()=>void\n  display: boolean,\n  onExit: ()=>void\n})=>{\n  let [status, callUnenroll] = useApi<UnEnrollMsg, UnEnrollResponse>([])\n  return h(Modal, {display: props.display, onExit:props.onExit, hideCloseButton: true} ,[\n    status === 'success'\n      ? h(Box, {style:{textAlign:'center', justifyItems:'center'}}, [\n        h('h2', \"Unenrolled!\"),\n        h('p', [`You've unenrolled `, h('b', props.display_name || props.username), ` from this cohort`]),\n        h('p', [`They'll be refunded within 5 business days`]),\n        h(Secondary, {onClick:props.onExit, style:{width:\"250px\"}}, \"exit\")\n      ])\n      : h(Box, {gap:32, style:{textAlign:'center', justifyItems:'center'}}, [\n        h(Box,[\n          h('h2', \"Un-Enroll and Issue Refund\"),\n          h('p', [\n            `You are about to un-enroll `, h('b', props.display_name || props.username), ` from this cohort`\n          ]),\n        ]),\n        h(Box, {gap:8}, [\n          h(Destructive, {status, onClick:async ()=>{\n            let result = await  callUnenroll(`/api/cohorts/${props.cohortID}/enroll`, {\n              person: props.personID\n            }, \"DELETE\")\n            if(result.status===200){\n              props.removeMember()\n            }\n          }, style:{width:\"250px\"}}, 'Un-enroll'),\n          h(Secondary, {onClick:props.onExit, style:{width:\"250px\"}}, \"Cancel\")\n        ])\n      ])\n  ])\n}\n\n// Button to Publish Draft Cohort\nconst MarkCohortLive = (props:{cohort:Cohort, mutate:(c:Cohort)=>void})=> {\n  let [state, setState] = useState<'normal' | 'confirm' | 'loading'| 'complete' >('normal')\n  if(state === 'confirm' || state === 'loading') return h(Modal, {display: true, closeText:\"nevermind\", onExit: ()=> setState('normal')}, [\n    h(Box, {gap: 32}, [\n      h('h2', \"Are you sure?\"),\n      h(Box, {gap: 16, style: {textAlign: 'right'}}, [\n        h(Primary, {onClick: async e => {\n          e.preventDefault()\n          setState('loading')\n          let res = await callApi<UpdateCohortMsg, UpdateCohortResponse>(`/api/cohorts/${props.cohort.id}`, {data: {live: true}})\n          if(res.status === 200) props.mutate({...props.cohort, live: res.result.live})\n          setState('complete')\n        }}, state === 'loading' ? h(Loader) : 'Publish!'),\n      ])\n    ])\n  ])\n\n  return h(Primary, {style: {justifySelf:\"center\"}, onClick: async e => {\n    e.preventDefault()\n    setState('confirm')\n  }}, 'Publish!')\n}\n//End Button to publish cohort\n\n//Modal to complete cohort\nconst MarkCohortComplete = (props:{cohort:Cohort, mutate:(c:Cohort)=>void})=> {\n  let [state, setState] = useState<'normal' | 'confirm' | 'loading'| 'complete' >('normal')\n\n  if (state === \"confirm\" || state === \"loading\")\n    return h(\n      Modal,\n      {\n        display: true,\n        closeText: \"nevermind\",\n        onExit: () => setState(\"normal\"),\n      },\n      [\n        h(Box, { gap: 32 }, [\n          h(\"h2\", { style: { textAlign: \"center\" } }, \"Are you sure?\"),\n          h(Box, { gap: 16 }, [\n            \"Before closing this course, please...\",\n            h(Box, { gap: 16 }, [\n              h(CheckBox, [\n                h(Input, {\n                  type: \"checkbox\",\n                }),\n                h(\"span\", [\n                  \"Use the \",\n                  h(\n                    Link,\n                    {\n                      href: `http://krakenedu.com/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}/templates?template=Artifact`,\n                    },\n                    \"Artifact template\"\n                  ),\n                  \" to publicly share any artifacts or final projects produced in the cohort\",\n                ]),\n              ]),\n              h(CheckBox, [\n                h(Input, {\n                  type: \"checkbox\",\n                }),\n                h(\"span\", [\n                  \"Use the \",\n                  h(\n                    Link,\n                    {\n                      href: `http://krakenedu.com/courses/${props.cohort.courses.slug}/${props.cohort.courses.id}/cohorts/${props.cohort.id}/templates?template=Retro`,\n                    },\n                    \"Retrospective template\"\n                  ),\n                  \" to post a cohort retro in the forum.\",\n                ]),\n              ]),\n              h(Seperator),\n              h(\"span\", [\n                \"You can find more information about artifacts and retros in our \",\n                h(\n                  Link,\n                  {\n                    href: `https://app.krakenedu.com/manual/facilitators#facilitating-a-cohort`,\n                  },\n                  \"facilitator guide\"\n                ),\n                \".\",\n              ]),\n            ]),\n          ]),\n          h(\n            Primary,\n            {\n              style: { justifySelf: \"center\" },\n              onClick: async (e) => {\n                e.preventDefault();\n                setState(\"loading\");\n                let res = await callApi<UpdateCohortMsg, UpdateCohortResponse>(\n                  `/api/cohorts/${props.cohort.id}`,\n                  { data: { completed: true } }\n                );\n                if (res.status === 200)\n                  props.mutate({\n                    ...props.cohort,\n                    completed: res.result.completed,\n                  });\n                setState(\"complete\");\n              },\n            },\n            state === \"loading\" ? h(Loader) : \"Mark this cohort complete\"\n          ),\n        ]),\n      ]\n    );\n\n  return h(Destructive, {onClick: async e => {\n    e.preventDefault()\n    setState('confirm')\n  }}, 'Mark as complete')\n}\n//end modal to complete cohorts\n\n\n// Defining Banners (upcoming-facilitator, upcoming-learner, draft)\nconst Banners = (props:{\n  cohort: Cohort\n  mutate: (c:Cohort)=>void\n  facilitating?: boolean,\n  enrolled?: boolean,\n})=>{\n  let isStarted = (new Date(props.cohort.start_date)).getTime() - (new Date()).getTime()\n  let forum = `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`\n\n  if(props.facilitating && !props.cohort.live) return h(TODOBanner, props)\n\n  if(props.cohort.completed && (props.enrolled || props.facilitating))  return h(TwoColumnBanner, [\n    h(Box, {gap: 8, className: \"textSecondary\"}, [\n      h('h4', `You completed this course on ${prettyDate(props.cohort.completed || '')}!`),\n      h('p', [`This cohort's `, h('a', {href: forum}, 'private forum'), ` will always be open! Feel free to come back whenever`])\n    ])\n  ])\n\n  if(isStarted > 0 && (props.enrolled || props.facilitating)) {\n    if(props.facilitating) {\n      return h(TwoColumnBanner, [\n          h(Box, {gap: 8, className: \"textSecondary\"}, [\n            h('h4', `You're facilitating in ${Math.round(isStarted / (1000 * 60 * 60 * 24))} days `),\n            h('p', [\n              `Check out the `,\n              h('a', {href: forum}, 'forum'),\n              ` and meet the learners. You can also read our `, h('a', {href: \"/manual/facilitators\"}, 'facilitator guide'), ` in the Krakenedu Manual`\n            ])\n          ])\n      ])\n    }\n    return h(TwoColumnBanner, [\n        h(Box, {gap: 8, className: \"textSecondary\"}, [\n          h('h4', `You start in ${Math.round(isStarted / (1000 * 60 * 60 * 24))} days `),\n          h('p', [\n            `Check out the `,\n            h('a', {href: forum}, 'forum'),\n            ` while you're waiting. You can introduce yourself and learn more about what you'll be doing when your cohort starts!`\n          ])\n        ])\n    ])\n  }\n  return null\n}\n\nconst TODOBanner = (props:{\n  cohort:Cohort, \n  mutate:(c:Cohort)=>void\n}) => {\n  let [expanded, setExpanded] = useState(false)\n\n  return h(TwoColumnBanner, { red: true }, [\n    h(BannerContent, [\n      h(AccentImg, {\n        height: 32,\n        width: 36,\n        src:\n          \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Seedling.png\",\n      }),\n      h(Box, { gap: 8 }, [\n        h(\"h4\", \"This cohort is still a draft\"),\n        h(\n          \"p\",\n          \"It’s hidden from public view. People can’t join until you publish it.\"\n        ),\n      ]),\n\n      ...(!expanded\n        ? []\n        : [\n            h(AccentImg, {\n              height: 32,\n              width: 36,\n              src:\n                \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Bud.png\",\n            }),\n            h(Box, { gap: 16 }, [\n              h(\n                \"h4\",\n                \"Before you publish this cohort make sure that you ...  \"\n              ),\n              h(TodoList, {\n                persistKey: \"cohort-publish-todo-\" + props.cohort.id,\n                items: [\n                  \"Add events to your cohort schedule for any live calls or important dates people need to remember.\",\n                  h(\"span\", [\n                    \"Fill out \",\n                    h(\n                      Link,\n                      {\n                        href: `https://app.krakenedu.com/dashboard?tab=Profile`,\n                      },\n                      \"your bio\"\n                    ),\n                    \" and tell people more about you.\",\n                  ]),\n                  h(\"span\", [\n                    \"Fill out the \",\n                    h(\n                      \"a\",\n                      {\n                        href: `${DISCOURSE_URL}/session/sso?return_path=/c/${props.cohort.category_id}`,\n                      },\n                      \"Getting Started topic\"\n                    ),\n                    \" in the forum with any first steps learners should take. This will be linked in the welcome email sent to everyone who enrolls.\",\n                  ]),\n                ],\n              }),\n            ]),\n\n            h(AccentImg, {\n              height: 32,\n              width: 36,\n              src:\n                \"https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/Flower.png\",\n            }),\n            h(Box, { gap: 16 }, [\n              h(\n                \"h4\",\n                \"Once you're ready, hit publish and start spreading the word!\"\n              ),\n              h(MarkCohortLive, { cohort: props.cohort, mutate: props.mutate }),\n            ]),\n          ]),\n    ]),\n\n    h(\n      LinkButton,\n      {\n        style: { justifySelf: \"right\", textDecoration: \"none\" },\n        onClick: () => setExpanded(!expanded),\n      },\n      expanded ? \"hide checklist\" : \"show checklist\"\n    ),\n  ]);\n}\n\n\nconst BannerContent = styled('div') `\ndisplay: grid; \ngrid-template-columns: min-content auto;\ngrid-column-gap: 16px;\ngrid-row-gap: 32px;\n\n`\n\n//End Bannera\n\nexport const getStaticProps = async (ctx:any)=>{\n  let courseId = parseInt((ctx.params?.id as string) || \"\");\n  if (Number.isNaN(courseId)) return { props: { notFound: true } } as const;\n\n  let course = await courseDataQuery(courseId);\n  if (!course) return { props: { notFound: true } } as const;\n\n  let cohortId = parseInt((ctx.params?.cohortId as string) || \"\");\n  if (Number.isNaN(cohortId)) return { props: { notFound: true } } as const;\n  let cohort = await cohortDataQuery(cohortId);\n\n  if (!cohort) return { props: { notFound: true } } as const;\n\n  let [artifacts, curriculum] = await Promise.all([\n    getTaggedPost(cohort.category_id, \"artifact\"),\n    getTaggedPost(cohort.courses.category_id, \"curriculum\"),\n  ]);\n\n  return {\n    props: {\n      notFound: false,\n      courseId,\n      cohortId,\n      cohort,\n      course,\n      curriculum,\n      artifacts,\n    },\n    revalidate: 1,\n  } as const;\n}\n\nexport const getStaticPaths = () => {\n  return {paths:[], fallback: true}\n}\n","export let DISCOURSE_URL = 'https://forum.krakenedu.com'\n"],"sourceRoot":""}