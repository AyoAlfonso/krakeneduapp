{"version":3,"sources":["webpack://_N_E/./components/pages/courses/settings/Discounts.ts","webpack://_N_E/./components/IconPicker.ts","webpack://_N_E/./pages/courses/[slug]//settings/index.ts","webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?1075"],"names":["Discounts","props","useDiscounts","course","discounts","data","mutate","useState","name","type","limited_uses","amount","max_redeems","undefined","newDiscount","setNewDiscount","useApi","res","concat","status","callCreateDiscount","h","Box","gap","width","padding","style","backgroundColor","colors","accentPeach","FormBox","onSubmit","e","preventDefault","LabelBox","Input","required","value","onChange","currentTarget","alignSelf","Radio","selected","items","component","parseInt","Primary","map","discount","DiscountItem","delete","filter","d","code","PageLoader","ref","useRef","callDelete","redeems","alignItems","onFocus","selectionEnd","length","textDecoration","color","readOnly","Secondary","disabled","onClick","current","select","document","execCommand","selectionStart","blur","Destructive","Icons","IconPicker","icons","x","IconGrid","icon","src","alt","split","key","newIcons","slice","setIcons","IconDisplay","index","LinkButton","justifySelf","COPY","cancelCohort","href","CourseSettings","useCourseData","id","user","useUserData","router","useRouter","useEffect","course_maintainers","find","maintainer","push","BackButton","as","query","slug","Tabs","tabs","Cohorts","CohortSettings","Details","EditDetails","Invites","Templates","CourseTemplates","WrappedCourseSettingsPage","notFound","ErrorPage","AddCohort","Seperator","course_cohorts","cohort","facilitating","cohort_facilitators","f","facilitator","Cohort","enrolled","cohort_max_size","invited","start_date","start_time","facilitators","newCohort","setNewCohort","callCreateCohort","timezone","Date","toLocaleDateString","timeZoneName","a","date","time","start","courseId","toISOString","result","people_in_cohorts","courses","Error","Info","Select","people","display_name","username","m","Pill","IconButton","f2","Cross","height","placeholder","success","emailOrUsername","setEmailOrUsername","invite_only","setInviteOnly","valid","setValid","callInviteToCourse","updateStatus","callUpdateCourse","useDebouncedEffect","includes","callApi","onSubmitInvite","email","onSubmitToggleInviteOnly","CheckBox","checked","useFormData","card_image","description","prerequisites","cost","duration","state","form","changed","reset","setState","maxLength","join","Textarea","SubmitButtons","Maintainers","newMaintainer","setNewMaintainer","Link","course_templates","sort","b","flatMap","template","gridAutoColumns","DeleteTemplate","templateName","Fragment","Modal","display","closeText","onExit","textAlign","t","window","__NEXT_P"],"mappings":"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","file":"static/chunks/pages/courses/[slug]/[id]/settings-b320fbf33c60119d6b78.js","sourcesContent":["import { useState, useRef } from \"react\"\nimport h from 'react-hyperscript'\nimport { useDiscounts } from \"src/data\"\nimport { CreateDiscountMsg, CreateDiscountResult } from \"pages/api/courses/[id]/discounts\"\nimport { useApi } from \"src/apiHelpers\"\nimport { Box, FormBox, LabelBox } from \"components/Layout\"\nimport { Input, Radio } from \"components/Form\"\nimport { PageLoader } from \"components/Loader\"\nimport { Primary, Secondary, Destructive } from \"components/Button\"\nimport { course_discounts } from \"@prisma/client\"\nimport { DeleteDiscountResult } from \"pages/api/discounts/[code]\"\nimport { colors } from \"components/Tokens\"\n\nexport function Discounts(props: {course:number}) {\n  let {data: discounts, mutate} = useDiscounts(props.course)\n  let [newDiscount, setNewDiscount] = useState<CreateDiscountMsg & {limited_uses: boolean}>({\n    name: '',\n    type: \"absolute\",\n    limited_uses: false,\n    amount: 0,\n    max_redeems: undefined\n  })\n  let [status, callCreateDiscount] = useApi<CreateDiscountMsg, CreateDiscountResult>([newDiscount, mutate], (res)=>{\n    if(!discounts) return\n    mutate(discounts.concat([res]))\n  })\n  let onSubmit = (e:React.FormEvent) => {\n    e.preventDefault()\n    callCreateDiscount(`/api/courses/${props.course}/discounts`, newDiscount)\n  }\n  return h(Box, {gap:32}, [\n    h(Box, {width: 640, padding: 32, style:{backgroundColor: colors.accentPeach}}, [\n    h(FormBox, {gap:32, onSubmit, width: 400}, [\n      h('h3', \"Add a New Discount\"),\n      h(LabelBox, {gap:8}, [\n        h('h4', \"Discount Name\"),\n        h(Input, {\n          type: 'text',\n          required: true,\n          value: newDiscount.name,\n          onChange:e =>setNewDiscount({...newDiscount, name: e.currentTarget.value})\n        })\n      ]),\n      h(Box, {h: true, gap:64}, [\n        h(LabelBox, {gap:8}, [\n          h('h4', \"Type\"),\n          h('div', {style: {alignSelf: 'center', padding: '13px 0px'}}, [\n            h(Radio, {\n              h: true,\n              name: 'type',\n              selected: newDiscount.type,\n              onChange: (value) => {\n                setNewDiscount({...newDiscount, type: value as typeof newDiscount.type})\n              },\n              items: [\n                {value: \"percentage\", component: h('span', '%')},\n                {value: 'absolute', component: h('span', \"$\")}\n              ]\n            })\n          ])\n        ]),\n        h(LabelBox, {gap:8}, [\n          h('h4', \"Amount Off\"),\n          h(Input, {\n            type: 'number',\n            value: newDiscount.amount,\n            onChange: e=>setNewDiscount({...newDiscount, amount: parseInt(e.currentTarget.value)})\n          })\n        ])\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', \"Usage Restrictions\"),\n        h(Radio, {\n          name:\"usage-restrictions\",\n          selected: newDiscount.limited_uses ? 'limited' : 'unlimited',\n          onChange: (value) => {\n            setNewDiscount({...newDiscount, limited_uses: value === 'limited'})\n          },\n          items: [\n            {value: 'unlimited', component: h('p', `Unlimited uses. Discount is valid until you cancel it`)},\n            {value: 'limited', component: h('p', `Limited uses. Discount is only valid for a number of uses`)}\n          ]\n        })\n      ]),\n      newDiscount.limited_uses ? h(LabelBox,  {gap: 8}, [\n        h('h4', 'Max uses'),\n        h(Input, {\n          type: 'number',\n          value: newDiscount.max_redeems,\n          onChange: e=> {\n            setNewDiscount({...newDiscount, max_redeems: parseInt(e.currentTarget.value)})\n          }\n        })\n      ]) : null,\n      h(Primary, {type: 'submit', status}, \"Create New Discount\")\n    ]),\n    ]),\n    h('h2', \"Discounts\"),\n    h('p', `Copy the Share Links below and send them to people to offer them a discounted rate on your course!)`),\n    !discounts\n      ? h(PageLoader)\n      : h(Box, {gap: 32}, discounts.map(discount => h('div', [\n        h(DiscountItem, {discount, delete:()=>{\n          if(!discounts) return\n          mutate(discounts.filter(d=>d.code !== discount.code))\n        }})\n      ])))\n  ])\n}\n\nfunction DiscountItem(props: {discount: course_discounts, delete: ()=>void}) {\n  let ref = useRef<HTMLInputElement | null>(null)\n  let [status, callDelete] = useApi<null, DeleteDiscountResult>([props], props.delete)\n  return h(Box, { gap: 8 }, [\n    h(\"h3\", props.discount.name),\n    h(\"div\", [\n      h(\n        \"span.textSecondary\",\n        `${\n          props.discount.type === \"absolute\"\n            ? \"$\" + props.discount.amount\n            : props.discount.amount + \"%\"\n        } off`\n      ),\n      h(\n        \"span.textSecondary\",\n        ` | Redeemed ${\n          props.discount.max_redeems === 0\n            ? props.discount.redeems\n            : `${props.discount.redeems}/${props.discount.max_redeems}`\n        } times`\n      ),\n    ]),\n    h(Box, { h: true, style: { alignItems: \"center\" } }, [\n      h(Input, {\n        onFocus: (e) => {\n          e.currentTarget.selectionEnd = e.currentTarget.value.length;\n        },\n        style: { width: \"360px\", textDecoration: \"underline\", color: \"blue\" },\n        readOnly: true,\n        value: `https://app.krakenedu.com/discount?discount=${props.discount.code}`,\n        ref: ref,\n      }),\n      h(\n        Secondary,\n        {\n          disabled:\n            props.discount.max_redeems !== 0 &&\n            props.discount.max_redeems <= props.discount.redeems,\n          onClick: (e) => {\n            e.preventDefault();\n            if (!ref.current) return;\n            ref.current.select();\n            document.execCommand(\"copy\");\n            ref.current.selectionEnd = ref.current.selectionStart;\n            ref.current.blur();\n          },\n        },\n        \"Copy\"\n      ),\n      h(\n        Destructive,\n        {\n          status,\n          onClick: (e) => {\n            e.preventDefault();\n            callDelete(\"/api/discounts/\" + props.discount.code, null, \"DELETE\");\n          },\n        },\n        \"Delete\"\n      ),\n    ]),\n  ]);\n}\n","import styled from \"@emotion/styled\"\nimport h from 'react-hyperscript'\nimport { Box } from \"./Layout\"\nimport { LinkButton } from \"./Button\"\n\nconst Icons = [\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Lightbulb.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Sparkle.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Picture.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Video.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/MusicNote.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Potion.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Plant.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Puzzle.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Chart.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/MoneyBag.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Camera.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Numbers.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Crayon.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/House.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Book.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Present.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Earth.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Shapes.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/Heart.png',\n  'https://hyperlink-data.nyc3.cdn.digitaloceanspaces.com/icons/EmojiSet/SpeechBubble.png'\n]\n\nexport const IconPicker = (props:{icons: string[], setIcons: (icons:string[])=>void}) =>{\n  let icons = props.icons.filter(x=>!!x)\n  return h(Box, {width: 400}, [\n    h(IconGrid, Icons.map(icon => h('img', {\n      src: icon,\n      alt: icon.split('/')[icon.length - 1],\n      key: icon,\n      onClick: ()=>{\n        let newIcons = icons.slice(0)\n        if(newIcons.length === 3)  newIcons = [icon]\n        else newIcons[newIcons.length] = icon\n        props.setIcons(newIcons)\n      }\n    }))),\n    h(Box, {gap:8}, [\n      h(IconDisplay, icons.map((icon, index)=> h('img', {key: index, src: icon}))),\n      h(LinkButton, {\n        style:{justifySelf: 'right'},\n        type: 'reset',\n        onClick: ()=>{\n          props.setIcons([])\n        }}, 'Clear')\n    ])\n  ])\n}\n\nconst IconGrid = styled('div')`\ndisplay: grid;\ngrid-template-columns: repeat(auto-fill, 32px);\ngrid-gap: 32px;\n`\n\nconst IconDisplay = styled('div')`\nbox-sizing: border-box;\nheight: 64px;\nbackground-color: white;\ndisplay: grid;\ngrid-template-columns: repeat(3, 32px);\njustify-content: center;\ngrid-gap: 16px;\npadding: 16px;\nwidth: 100%;\nborder: 1px solid;\n`\n","import h from 'react-hyperscript'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport { useState, useEffect, Fragment } from 'react'\nimport { InferGetStaticPropsType } from 'next'\nimport styled from '@emotion/styled'\n\nimport { Tabs } from 'components/Tabs'\nimport { useApi, callApi } from 'src/apiHelpers'\nimport { Course, useCourseData, useUserData } from 'src/data'\nimport { PageLoader } from 'components/Loader'\nimport { Box, Seperator, LabelBox, FormBox } from 'components/Layout'\nimport { Info, Error, Select, Input, Textarea, CheckBox } from 'components/Form'\nimport { Primary, Destructive, Secondary, BackButton, IconButton } from 'components/Button'\nimport {Discounts} from 'components/pages/courses/settings/Discounts'\nimport ErrorPage from 'pages/404'\nimport { useDebouncedEffect, useFormData } from 'src/hooks'\nimport { courseDataQuery, UpdateCourseMsg, UpdateCourseResponse } from 'pages/api/courses/[id]'\nimport { CheckUsernameResult } from 'pages/api/get/[...item]'\nimport { CreateCohortMsg, CreateCohortResponse } from 'pages/api/cohorts'\nimport { InviteToCourseMsg, InviteToCourseResponse } from 'pages/api/courses/[id]/invite'\nimport { Modal } from 'components/Modal'\nimport { DeleteTemplateResult } from 'pages/api/courses/[id]/templates/[templateId]'\nimport { getTaggedPost } from 'src/discourse'\nimport { Cohort } from '..'\nimport { IconPicker } from 'components/IconPicker'\nimport { Cross } from 'components/Icons'\nimport { Pill } from 'components/Pill'\n\nconst COPY = {\n  cancelCohort: h(\"p.textSecondary\", [\n    `Contact us at `,\n    h(\"a\", { href: \"mailto:contact@krakenedu.com\" }, `contact@krakenedu.com`),\n    ` to cancel a cohort. Optionally,  let us know the reason youâ€™re cancelling (weâ€™re curious ðŸ¤“)`,\n  ]),\n};\n\ntype Props = InferGetStaticPropsType<typeof getStaticProps>\nconst WrappedCourseSettingsPage = (props: Props)=>props.notFound ? h(ErrorPage) : h(CourseSettings, props)\nfunction CourseSettings(props:Extract<Props, {notFound:false}>){\n  let {data: course, mutate} = useCourseData(props.id, props.course || undefined)\n  let {data: user} = useUserData()\n  let router = useRouter()\n\n  useEffect(()=>{\n    if(user === undefined) return\n    if(course) {\n      let isMaintainer = !!(course.course_maintainers.find(maintainer => user && maintainer.maintainer === user.id))\n      if(!isMaintainer) router.push('/')\n    }\n  }, [user, course])\n  if(!course || !user) return h(PageLoader)\n\n  return h(Box, { gap: 64, width: 640 }, [\n    h(Box, { gap: 16 }, [\n      h(\n        BackButton,\n        {\n          href: \"/courses/[slug]/[id]\",\n          as: `/courses/${router.query.slug}/${router.query.id}`,\n        },\n        course.type === \"club\" ? \"Club\" : \"Course\"\n      ),\n      h(\"h1\", \"Settings\"),\n      h(\"p.big\", [\n        `KrakenEdu is new and some things can only be done manually for now! To add a new maintainer, remove a cohort, or anything else you don't see here, please email `,\n        h(\"a\", { href: \"mailto:help@krakenedu.com\" }, \"help@krakenedu.com\"),\n      ]),\n    ]),\n    h(Tabs, {\n      tabs: {\n        Cohorts: h(CohortSettings, { course, mutate }),\n        Details: h(EditDetails, { course, mutate }),\n        Invites: h(Invites, { course, mutate }),\n        Templates: h(CourseTemplates, { course, mutate }),\n        Discounts: h(Discounts, { course: course.id }),\n      },\n    }),\n  ]);\n}\n\nexport default WrappedCourseSettingsPage\n\n\nfunction CohortSettings(props:{course:Course, mutate: (course:Course)=>void}) {\n  let {data: user} = useUserData()\n  return h(Box, {gap: 32}, [\n    h(AddCohort, props),\n    h(Seperator),\n    h(Box, {gap: 16}, [\n      h('h3', \"Cancel a Cohort\"),\n      COPY.cancelCohort\n    ]),\n    h(Box, [\n      h('h3', \"All Cohorts\"),\n      h(Box, {gap:32}, props.course.course_cohorts.map((cohort)=>{\n        let facilitating = !!cohort.cohort_facilitators.find(f=>user&&f.facilitator === user.id)\n        return h(Cohort, {\n          cohort,\n          enrolled: false,\n          facilitating,\n          slug: props.course.slug,\n          cohort_max_size: props.course.cohort_max_size,\n          invited: true\n        })\n      })),\n    ])\n  ])\n}\n\n//feature to add a new cohort to a course\nconst AddCohort = (props:{course:Course, mutate:(c:Course)=>void})=> {\n  let [newCohort, setNewCohort] = useState({start_date: '', start_time: '', facilitators: [] as string[]})\n  let [status, callCreateCohort] = useApi<CreateCohortMsg, CreateCohortResponse>([newCohort])\n\n  let timezone = new Date().toLocaleDateString('en-us',{timeZoneName:\"short\"}).split(', ')[1]\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n\n    let date = newCohort.start_date.split('-').map(x=>parseInt(x))\n    let time = newCohort.start_time.split(':').map(x=>parseInt(x))\n    let start = new Date(date[0], date[1] -1, date[2], time[0], time[1])\n\n    let res = await callCreateCohort(`/api/cohorts`, {courseId: props.course.id, facilitators:newCohort.facilitators, start: start.toISOString()})\n    if(res.status === 200) props.mutate({\n        ...props.course,\n        course_cohorts: [...props.course.course_cohorts, {...res.result, people_in_cohorts:[], courses: {name: props.course.name}}]\n      })\n  }\n\n  return h(FormBox, {onSubmit, gap: 32, style: {width: 400}}, [\n    h('h2', 'Add a new Cohort'),\n    status === 'error' ? h(Error, 'An error occured') : null,\n    status === 'success' ? h(Info, 'Cohort created!') : null,\n    h(LabelBox, {gap:8}, [\n      h('h4', \"Facilitator\"),\n      h(Select, {\n        required: true,\n        onChange: (e:React.ChangeEvent<HTMLSelectElement>)=> setNewCohort({...newCohort, facilitators: [...newCohort.facilitators, e.currentTarget.value]})\n      }, [\n        h('option', {value: ''}, \"Select a facilitator\"),\n        ...(props.course.course_maintainers.map(maintainer => {\n          return h('option', {value: maintainer.maintainer}, maintainer.people.display_name || maintainer.people.username)\n        })||[])\n      ]),\n      h(Box, {h:true}, newCohort.facilitators.map(f=>{\n        let facilitator = props.course.course_maintainers.find(m=>m.maintainer === f)\n        if(!facilitator) return null\n        return h(Pill, {}, h(Box, {h:true, gap:4}, [\n          h('p', facilitator.people.display_name || facilitator.people.username),\n          h(IconButton, {onClick:e=>{\n            e.preventDefault()\n            setNewCohort({...newCohort, facilitators:newCohort.facilitators.filter(f2=>f2!==f)})\n          }}, h(Cross, {width: 10, height:10}))\n        ]))\n      }))\n    ]),\n    h(Box, {h: true, gap: 32}, [\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Start Date'),\n      h(Input, {\n        type: 'date',\n        placeholder: 'yyyy-mm-dd',\n        required: true,\n        value: newCohort.start_date,\n        onChange: e => setNewCohort({...newCohort, start_date: e.currentTarget.value})\n      })\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', `Start time (${timezone})`),\n      h(Input, {\n        type: 'time',\n        placeholder: '23:59',\n        required: true,\n        value: newCohort.start_time,\n        onChange: e => setNewCohort({...newCohort, start_time: e.currentTarget.value})\n      })\n    ]),\n    ]),\n    h(Primary, {\n      style: {justifySelf: 'right'},\n      status,\n      type: 'submit',\n      success: status === 'success',\n      disabled: !newCohort.start_date || newCohort.facilitators.length===0\n    }, 'Add a new Cohort'),\n  ])\n}\n\nconst Invites = (props:{course:Course, mutate: (c:Course) => void})=> {\n  let [emailOrUsername, setEmailOrUsername] = useState('')\n  let [invite_only, setInviteOnly] = useState(props.course.invite_only)\n  let [valid, setValid] = useState<null | boolean>(null)\n  let [status, callInviteToCourse] = useApi<InviteToCourseMsg, InviteToCourseResponse>([emailOrUsername], ()=>setEmailOrUsername(''))\n  let [updateStatus, callUpdateCourse] = useApi<UpdateCourseMsg, UpdateCourseResponse>([])\n\n  useDebouncedEffect(async ()=>{\n    if(emailOrUsername.includes('@') || emailOrUsername === '') return setValid(null)\n    let res = await callApi<null, CheckUsernameResult>('/api/get/username/'+emailOrUsername)\n    if(res.status===404) setValid(false)\n    else setValid(true)\n  }, 500, [emailOrUsername])\n  useEffect(()=>setValid(null),[emailOrUsername])\n\n  let onSubmitInvite = async (e: React.FormEvent)=>{\n    e.preventDefault()\n    let x = emailOrUsername.includes('@') ? {email: emailOrUsername} : {username: emailOrUsername}\n    callInviteToCourse(`/api/courses/${props.course.id}/invite`, {...x})\n  }\n\n  let onSubmitToggleInviteOnly = async (e:React.FormEvent)=>{\n    e.preventDefault()\n    let res = await callUpdateCourse(`/api/courses/${props.course.id}`, {invite_only})\n    if(res.status === 200) props.mutate({...props.course, ...res.result})\n  }\n\n  return h(Box, { gap: 16, width: 400 }, [\n    h(\"h2\", \"Invites\"),\n    h(Box, { gap: 32 }, [\n      h(FormBox, { onSubmit: onSubmitToggleInviteOnly }, [\n        h(LabelBox, { gap: 8, width: 400 }, [\n          h(\"div\", [\n            h(\"h4\", \"Invite Only\"),\n            h(\n              \"small.textSecondary\",\n              `Learners cannot enroll in an invite only course unless you have sent them an\ninvite. The invite allows them enroll in any cohort and does not expire.`\n            ),\n          ]),\n          h(CheckBox, [\n            h(Input, {\n              type: \"checkbox\",\n              checked: invite_only,\n              onChange: (e) => setInviteOnly(e.currentTarget.checked),\n            }),\n            \"Make this course invite only\",\n          ]),\n        ]),\n        h(\n          Primary,\n          {\n            style: { justifySelf: \"right\" },\n            status: updateStatus,\n            type: \"submit\",\n            disabled: props.course.invite_only === invite_only,\n          },\n          \"Change\"\n        ),\n      ]),\n      !props.course.invite_only\n        ? null\n        : h(FormBox, { onSubmit: onSubmitInvite, gap: 32, width: 400 }, [\n            h(LabelBox, { gap: 8 }, [\n              h(\"h4\", \"Invite someone to enroll\"),\n              h(\n                \"small.textSecondary\",\n                `Invite someone with their username or email. Invitee does not need a KrakenEdu account to be invited, but they will need an account to enroll.`\n              ),\n              h(Input, {\n                type: emailOrUsername.includes(\"@\") ? \"email\" : \"text\",\n                value: emailOrUsername,\n                onChange: (e) => setEmailOrUsername(e.currentTarget.value),\n              }),\n              valid === null\n                ? null\n                : valid\n                ? h(\"span.accentSuccess\", \"Great, found @\" + emailOrUsername)\n                : h(\n                    \"span.accentRed\",\n                    \"We can't find a user with that username\"\n                  ),\n            ]),\n            h(\n              Primary,\n              {\n                style: { justifySelf: \"right\" },\n                status,\n                type: \"submit\",\n                disabled: !emailOrUsername.includes(\"@\") && valid !== true,\n              },\n              \"Invite\"\n            ),\n          ]),\n    ]),\n  ]);\n}\n\nconst EditDetails = (props: {course: Course, mutate:(course:Course)=>void}) => {\n  let {state, form, changed, reset, setState} = useFormData({\n    name: props.course.name,\n    card_image: props.course.card_image,\n    cohort_max_size: props.course.cohort_max_size,\n    description: props.course.description,\n    prerequisites: props.course.prerequisites,\n    cost: props.course.cost,\n    duration: props.course.duration\n  }, [props.course])\n  let [status, callUpdateCourse] = useApi<UpdateCourseMsg, UpdateCourseResponse>([])\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    let res = await callUpdateCourse(`/api/courses/${props.course.id}`, {...state})\n    if(res.status === 200) props.mutate({...props.course, ...res.result})\n  }\n\n  return h(FormBox, {onSubmit, gap:32, style:{width: 400}}, [\n    h('h2', 'Edit Details'),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Name'),\n      h(Input, {\n        type: 'text',\n        maxLength: 50,\n        ...form.name\n      }),\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Cost (USD)'),\n      h(Input, {\n        type: 'number',\n        ...form.cost\n      })\n    ]),\n    props.course.type === 'course' ? null : h(Box,  [\n      h(\"div\", [\n        h('h4', \"Emojis\"),\n        h('small.textSecondary', \"Select three emojis to describe your club! Repeats ok.\")\n      ]),\n      h(IconPicker, {\n        icons: state.card_image.split(','),\n        setIcons: (icons:string[]) => {\n          setState({...state, card_image: icons.join(',')})\n        }\n      })\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('div', [\n        h('h4', \"Cohort Size\"),\n        h('small.textSecondary', \"How many learners can enroll in a cohort. Set to 0 for no limit.\")\n      ]),\n      h(Input, {\n        type: 'number',\n        required: true,\n        ...form.cohort_max_size\n      })\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Description'),\n      h(Textarea, {\n        maxLength: 200,\n        ...form.description\n        }),\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Prerequisites'),\n      h(Textarea, form.prerequisites)\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', 'Duration'),\n      h(Input, form.duration)\n    ]),\n    h(SubmitButtons, [\n      h(Destructive, {disabled: !changed, onClick: (e)=>{\n        e.preventDefault()\n        reset()\n      }}, \"Discard Changes\"),\n        h(Primary, {type: 'submit', disabled: !changed, status}, 'Save Changes')\n    ]),\n    h(Maintainers, props)\n  ])\n}\n\nfunction Maintainers (props: {course: Course, mutate: (c: Course)=>void}) {\n  let [newMaintainer, setNewMaintainer] = useState('')\n  return h(Box, [\n    h('h3', \"Maintainers\"),\n    ...props.course.course_maintainers.map(m=>{\n      return m.people.display_name || m.people.username\n    }),\n    h('h4', \"Add a maintainer\"),\n    h(FormBox, [\n      h(Input, {value: newMaintainer, onChange:(e)=>setNewMaintainer(e.currentTarget.value)}),\n      h(Primary, {type:'submit'}, \"Add\")\n    ])\n  ])\n}\n\nfunction CourseTemplates (props: {course: Course, mutate: (c:Course)=>void}) {\n  return h(Box, {gap: 32}, [\n    h(Box, [\n      h('p', `Each cohort comes with its own community space, and templates to help you populate its structure with topics.`),\n      h('ul', {style: {'margin': 'auto 0'}}, [\n        h('li', [\n          h('b', 'Prepopulated'), \n          h('span', ' topics are automatically posted when each new cohort is created')\n        ]),\n        h('li', [\n          h('b', 'Triggered'), \n          h('span', ' topics can be posted by the facilitator from the cohort settings (editable before publishing, so useful for creating multiple topics from one template)')\n        ])\n      ]),\n      h('p', `You can edit the default templates we've provided below, or add new ones!`),\n      h(Link, {\n        href: '/courses/[slug]/[id]/settings/templates/[templateId]',\n        as:`/courses/${props.course.slug}/${props.course.id}/settings/templates/new`\n      }, h('a', {}, h(Primary, \"+ Add A New Template\"))),\n    ]),\n    h(Box, {}, props.course.course_templates\n      .sort((a, b)=>  a.name > b.name ? 1 : -1)\n      .sort((a)=> a.required ? -1 : 1)\n      .flatMap(template => {\n        return [\n          h(Box, {h: true, style: {gridAutoColumns: 'auto'}},[\n            h('div', [\n              h('h3', template.name),\n              h('span.textSecondary', template.type ==='prepopulated' ? \"Prepopulated for all cohorts\" : \"Manually published by facilitator\")\n            ]),\n            h(Box, {h: true, style:{justifySelf: 'end', alignItems: 'center'}}, [\n              template.required ? null : h(DeleteTemplate, {course: props.course, mutate: props.mutate, templateName: template.name}),\n              h(Link, {\n                href: '/courses/[slug]/[id]/settings/templates/[templateId]',\n                as: `/courses/${props.course.slug}/${props.course.id}/settings/templates/${template.name}`\n              }, h('a', {}, h(Secondary, 'Edit')))\n            ])\n          ]),\n          h(Seperator)\n        ]}).slice(0, -1))\n  ])\n}\n\nfunction DeleteTemplate(props:{templateName:string, course:Course, mutate:(c:Course)=>void}) {\n  let [state, setState] = useState<'normal' | 'confirm'>('normal')\n  let [status, callDelete] = useApi<null, DeleteTemplateResult>([props])\n  return h(Fragment, [\n    h(Destructive, {onClick: ()=>setState('confirm')}, 'Delete'),\n    h(Modal, {display: state !== 'normal', closeText:\"nevermind\", onExit: ()=>setState('normal')}, [\n      h(Box, {gap:32, style: {textAlign: 'center'}}, [\n        h('h3', \"Are you sure?\"),\n        h('p', \"You can't undo this action!\"),\n        h(Primary, {style: {justifySelf:\"center\"}, status, onClick:async ()=>{\n          let res = await callDelete(`/api/courses/${props.course.id}/templates/${props.templateName}`, null, \"DELETE\")\n          if(res.status ===200) {\n            props.mutate({\n              ...props.course,\n              course_templates: props.course.course_templates\n                .filter(t=>t.name!==props.templateName)\n            })\n            setState('normal')\n          }\n        }}, \"Yup delete it\"),\n      ])\n    ])\n  ])\n}\n\n\nconst SubmitButtons = styled('div')`\njustify-self: right;\ndisplay: grid;\ngrid-template-columns: auto auto;\ngrid-gap: 16px;\n`\n\nexport const getStaticProps = async (ctx:any) => {\n  let id = parseInt(ctx.params?.id as string || '' )\n  if(Number.isNaN(id)) return {props: {notFound: true}} as const\n\n  let data = await courseDataQuery(id)\n  if(!data) return {props:{notFound: true}} as const\n  let content = await getTaggedPost(data.category_id, 'curriculum')\n\n  return {props: {notFound: false, id, course: data, content}, revalidate: 1} as const\n}\n\nexport const getStaticPaths = () => {\n  return {paths:[], fallback: true}\n}\n","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/courses/[slug]/[id]/settings\",\n        function () {\n          return require(\"private-next-pages/courses/[slug]/[id]/settings/index.ts\");\n        }\n      ]);\n    "],"sourceRoot":""}