_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{V5Xn:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/courses/[slug]/[id]/settings/templates/[templateId]",function(){return n("uAbH")}])},u5GO:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("wTIg"),a=n("j+1P"),i=n.n(a),o=n("BTHN"),c=n("mirl"),s=n("mB65"),u=n("q1tI"),p=n("9Hbq"),l=n("Hzj1");function d(e){var t=Object(s.c)("(max-width:640px)"),n=Object(u.useState)("edit"),r=n[0],a=n[1];return t?i()(p.b,{gap:4},[i()("div",{style:{justifySelf:"right"}},["preview"===r?i()(l.e,{onClick:function(){return a("edit")}},"edit"):i()(l.e,{onClick:function(){return a("preview")}},"preview")]),"preview"===r?i()(f,{},i()(o.a,{source:e.value})):i()(b,e)]):i()(g,[i()(b,e),i()(f,{height:e.height},i()(o.a,{source:e.value}))])}var g=Object(r.a)("div",{target:"efj9xzw0"})({name:"17v6q2h",styles:"display:grid;max-width:1200px;grid-template-columns:50% 50%;"}),b=Object(r.a)("textarea",{target:"efj9xzw1"})("box-sizing:border-box;height:",(function(e){return e.height?e.height:512}),"px;padding:16px;font-family:'Lato',sans-serif;border-color:",c.d.grey55," !important;border:1px solid;border-radius:2px 0 0 2px;resize:none;font-size:inherit;line-height:inherit;"),f=Object(r.a)("div",{target:"efj9xzw2"})("overflow:scroll;box-sizing:border-box;padding:16px;font-size:16px;height:",(function(e){return e.height?e.height:512}),"px;background-color:",c.d.accentPeach,";border-radius:0 2px 2px 0;")},uAbH:function(e,t,n){"use strict";n.r(t);var r=n("cpVT"),a=n("vJKn"),i=n.n(a),o=n("rg98"),c=n("j+1P"),s=n.n(c),u=n("20a2"),p=n("0CBl"),l=n("kacE"),d=n("q1tI"),g=n("9Hbq"),b=n("rk+T"),f=n("Hzj1"),h=n("u5GO");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=Object(u.useRouter)(),t=e.query.templateId,n=e.query.id,r=Object(p.c)(n?"/api/courses/".concat(n,"/templates"):void 0),a=r.data,c=r.mutate,m=a?a.find((function(e){return e.name===t})):void 0,w=Object(d.useState)(m||{name:"",content:"",type:"prepopulated",title:""}),v=w[0],x=w[1],j=Object(d.useState)("normal"),O=j[0],T=j[1];if(Object(d.useEffect)((function(){m&&x(m)}),[m]),"new"!==t&&void 0===a)return s()(l.a);var q=function(){var r=Object(o.a)(i.a.mark((function r(o){var s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),T("loading"),"new"!==t){r.next=9;break}return r.next=5,Object(p.a)("/api/courses/".concat(n,"/templates"),v);case 5:200===(s=r.sent).status&&a&&(a.push(s.result),c(a)),r.next=13;break;case 9:return r.next=11,Object(p.a)("/api/courses/".concat(n,"/templates/").concat(t),v);case 11:200===(s=r.sent).status&&a&&(s.result.name!==t&&e.replace("/courses/[slug]/[id]/settings/templates/[templateId]","/courses/".concat(e.query.slug,"/").concat(e.query.id,"/settings/templates/").concat(s.result.name),{shallow:!0}),c(null===a||void 0===a?void 0:a.map((function(e){return 200===s.status&&m&&e.name===m.name?s.result:e}))));case 13:200===s.status&&(T("success"),"new"===t&&e.push("/courses/[slug]/[id]/settings/templates/[templateId]","/courses/".concat(e.query.slug,"/").concat(e.query.id,"/settings/templates/").concat(s.result.name)));case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),k="new"!==t&&m&&!(v.name!==m.name||v.title!==m.title||v.content!==m.content||v.type!==m.type);return s()(g.b,{gap:32},[s()(g.b,{width:640},[s()(f.a,{href:"/courses/[slug]/[id]/settings",as:"/courses/".concat(e.query.slug,"/").concat(n,"/settings")},"Settings"),s()("h2","new"===e.query.templateId?"Add New Template":"Edit Template"),s()("p.big","Create templates for topics to either be included in every new cohort's forum, or to be triggered by a facilitator at any time.")]),s()(g.d,{onSubmit:q,gap:32},[s()(g.e,{width:400,gap:8},[s()("h4","Template Name"),s()(b.d,{disabled:(null===m||void 0===m?void 0:m.required)||void 0,type:"text",value:v.name,onChange:function(e){return x(y(y({},v),{},{name:e.currentTarget.value}))}})]),s()(g.e,{width:640,gap:8},[s()("h4","Type"),s()(b.f,{disabled:(null===m||void 0===m?void 0:m.required)||void 0,name:"type",selected:v.type,onChange:function(e){x(y(y({},v),{},{type:e}))},items:[{value:"prepopulated",component:s()("div",[s()("h4","Prepopulated"),s()("span.textSecondary","This topic will automatically be posted when each new cohort is created.")])},{value:"triggered",component:s()("div",[s()("h4","Triggered"),s()("span.textSecondary","This topic will be posted when the facilitator triggers it from the cohort settings page.")])}]})]),s()(g.e,{width:400,gap:8},[s()(g.b,{gap:4},[s()("h4","Default Topic Title"),s()("p.textSecondary","Default title of the published topic. For a triggered template, you'll be able to edit before publishing.")]),s()(b.d,{type:"text",value:v.title,onChange:function(e){return x(y(y({},v),{},{title:e.currentTarget.value}))}})]),s()(g.e,{gap:8},[s()(g.b,{gap:4},[s()("h4","Default Topic Body"),s()(g.b,{width:400},[s()("p.textSecondary","Default body text of the published topic. For a triggered template, you'll be able to edit before publishing."),s()("p.textSecondary",["You can use Markdown to format ",s()("a",{href:"https://commonmark.org/help/"},"(quick reference)"),"."])])]),s()(h.a,{value:v.content,onChange:function(e){return x(y(y({},v),{},{content:e.currentTarget.value}))}})]),s()(g.b,{h:!0,gap:8,style:{justifySelf:"end"}},[s()(f.b,{disabled:k,onClick:function(e){e.preventDefault(),m&&x(m)}},"Discard Changes"),s()(f.f,{status:O,type:"submit",disabled:k},"new"===t?"Create New Template":"Update Template")])])])}}},[["V5Xn",0,2,1,3,4,5,7]]]);
//# sourceMappingURL=[templateId]-a7e123b8cbf1e92b4b7a.js.map