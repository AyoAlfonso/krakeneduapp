_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{"9OSZ":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/[id]",function(){return n("XTjc")}])},XTjc:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return q}));var a=n("z7pX"),r=n("vJKn"),i=n.n(r),o=n("dhJC"),c=n("cpVT"),s=n("rg98"),u=n("xvhg"),d=n("j+1P"),p=n.n(d),l=n("+Xui"),m=n("fdqv"),f=n("9Hbq"),g=n("mirl"),v=n("BTHN"),b=n("Hzj1"),h=n("5++N"),_=n("kacE"),O=n("q1tI"),y=n("dxER"),j=n("rk+T"),w=n("0CBl"),x=n("20a2"),S=n("lnWS"),k=n("YFqc"),E=n.n(k),P=n("Zp4/"),D=n("g4pe"),C=n.n(D);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=!0;t.default=function(e){return e.notFound?p()(l.default):p()(I,e)};var I=function(e){var t,n,a=Object(h.i)().data,r=Object(h.e)(e.id),c=r.data,d=r.mutate,v=Object(O.useState)(!1),j=v[0],x=v[1],S=new Date(e.start_date),k=new Date(e.end_date),E=Object(O.useState)({name:e.name,cost:(null===(t=e.standalone_events)||void 0===t?void 0:t.cost)||0,max_attendees:(null===(n=e.standalone_events)||void 0===n?void 0:n.max_attendees)||0,description:e.description,start_date:"".concat(S.getFullYear(),"-").concat(("0"+(S.getMonth()+1)).slice(-2),"-").concat(("0"+S.getDate()).slice(-2)),start_time:S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),end_time:k.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),location:e.location}),P=E[0],D=E[1];Object(O.useEffect)((function(){var e,t;if(c){var n=new Date(c.start_date),a=new Date(c.end_date);D({name:c.name,cost:(null===(e=c.standalone_events)||void 0===e?void 0:e.cost)||0,max_attendees:(null===(t=c.standalone_events)||void 0===t?void 0:t.max_attendees)||0,description:c.description,start_date:"".concat(n.getFullYear(),"-").concat(("0"+(n.getMonth()+1)).slice(-2),"-").concat(("0"+n.getDate()).slice(-2)),start_time:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),end_time:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),location:c.location})}}),[c]);var T=Object(w.b)([]),q=Object(u.a)(T,2),I=q[0],R=q[1];if(void 0===e||!c)return p()(_.a);if(!e.standalone_events)return p()(l.default);var F=function(){var t=Object(s.a)(i.a.mark((function t(n){var a,r,c,s,u,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=Object(m.b)(P.start_date,P.start_time).toISOString(),r=Object(m.b)(P.start_date,P.end_time).toISOString(),t.next=5,R("/api/events/"+e.id,{data:N(N({},P),{},{start_date:a,end_date:r}),type:"standalone"});case 5:200===(c=t.sent).status&&"standalone"===c.result.type&&(s=c.result.data,u=s.events,p=Object(o.a)(s,["events"]),d(N(N({},u),{},{standalone_events:p,cohort_events:[]})),x(!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return j?p()(f.d,{onSubmit:F},[p()("h1","Edit Event"),p()(y.EventForm,{onChange:D,state:P}),p()("div",{style:{backgroundColor:g.d.appBackground,position:"sticky",bottom:"0",padding:"16px 0",margin:"-16px 0",width:"100%"}},[p()(f.b,{h:!0,style:{justifyContent:"right"}},[p()(b.b,{onClick:function(){return x(!1)}},"Cancel"),p()(b.f,{type:"submit",status:I},"Submit")])])]):p()("div",[a&&e.people.id===a.id?p()(L,{start_date:e.start_date,setEditting:x}):null,p()(C.a,{children:[p()("title",{key:"title"},c.name),p()("meta",{property:"og:title",content:c.name,key:"og:title"}),p()("meta",{property:"og:description",content:c.description.slice(0,140)+"...",key:"og:description"}),p()("meta",{property:"og:image",content:"https://app.krakenedu.com/img/favicon.png",key:"og:image"}),p()("meta",{property:"twitter:card",content:"summary",key:"twitter:card"})]}),p()(z,N(N({notFound:!1},c),{},{facilitating:!!a&&e.people.id===a.id,rsvpd:!!c.people_in_events.find((function(e){return a&&e.person===a.id})),mutate:d}))])},z=function(e){if(!e.standalone_events)return p()(l.default);var t=e.people_in_events.map((function(e){return e.people.email})).concat(e.no_account_rsvps.map((function(e){return e.email})));return p()(f.h,[p()(f.b,{gap:32,width:640},[p()("h1",e.name)]),p()(f.b,{gap:32},[p()(v.a,{source:e.description}),p()(f.f),p()(f.b,{},[p()("h2","Facilitated by ".concat(e.people.display_name||e.people.username)),p()(v.a,{source:e.people.bio||""}),p()(f.b,{h:!0},[p()("h4",["Attending ",p()("span.textSecondary",0!==e.standalone_events.max_attendees?"(".concat(e.people_in_events.length+e.no_account_rsvps.length,"/").concat(e.standalone_events.max_attendees,")"):"(".concat(e.people_in_events.length+e.no_account_rsvps.length,")"))]),e.facilitating?p()("a",{href:"mailto:?bcc=".concat(t.join(","))},"email everyone"):null])].concat(Object(a.a)(e.people_in_events.map((function(e){return p()(f.b,{h:!0,gap:4},[p()(E.a,{href:"/people/[id]",as:"/people/".concat(e.people.username)},[p()("a",{className:"notBlue"},e.people.display_name||e.people.username)]),e.people.pronouns?p()("span.textSecondary",{}," (".concat(e.people.pronouns,")")):null])}))),Object(a.a)(e.no_account_rsvps.map((function(e){return p()(f.b,{h:!0,gap:4},[e.name])})))))]),p()(f.g,[p()(S.a,[p()(f.b,[p()(R,N(N({},e.standalone_events),{},{attendees:e.people_in_events.length+e.no_account_rsvps.length,facilitating:e.facilitating,id:e.id,start_date:e.start_date,end_date:e.end_date,mutate:e.mutate,rsvpd:e.rsvpd,location:e.location}))])])])])},L=function(e){return new Date(e.start_date)>new Date?p()(P.a,{red:!0},[p()("span",{style:{alignSelf:"center"}},"You're facilitating this event"),p()(b.g,{onClick:function(){return e.setEditting(!0)}},"Edit Event")]):p()(P.a,{red:!0},[p()("span",{style:{alignSelf:"center"}},"Congrats! You hosted this event on ".concat(Object(m.f)(e.start_date),". You can edit the description to add any artifacts.")),p()(b.g,{onClick:function(){return e.setEditting(!0)}},"Edit Event")])},R=function(e){var t=new Date(e.start_date),n=new Date(e.end_date),a=t.toLocaleTimeString([],{hour12:!0,minute:"2-digit",hour:"numeric"}),r=n.toLocaleTimeString([],{hour12:!0,minute:"2-digit",hour:"numeric",timeZoneName:"short"});return p()(f.b,{style:{alignSelf:"center"}},[p()("div",{style:{alignSelf:"center"}},[p()("h1",0!==e.cost?"$".concat(e.cost):"FREE"),p()("h3","".concat(t.toLocaleDateString([],{weekday:"short"})," ").concat(Object(m.f)(e.start_date))),p()("h4.textSecondary","@ ".concat(a," - ").concat(r))]),p()(F,e),!e.rsvpd&&e.max_attendees?p()("b","".concat(e.attendees,"/").concat(e.max_attendees," spots filled")):null])},F=function(e){var t=Object(w.b)([]),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(h.i)().data,d=Object(x.useRouter)(),l=Object(O.useState)({email:"",name:""}),g=l[0],v=l[1],_=Object(m.c)(g,v);return new Date(e.end_date)<new Date?p()("p.big","This event has concluded"):e.max_attendees&&e.attendees>=e.max_attendees?p()("p.big","Sorry, this event is full!"):e.rsvpd||e.facilitating?p()("a",{href:e.location},p()(b.f,"Join Event")):0!==e.cost||c?p()(b.f,{onClick:function(){var t=Object(s.a)(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==c){t.next=4;break}d.push("/login?redirect="+encodeURIComponent(d.asPath)),t.next=16;break;case 4:return t.next=6,o("/api/events/".concat(e.id,"/rsvp"));case 6:if(200!==(n=t.sent).status){t.next=16;break}if(!n.result.enrolled){t.next=12;break}e.mutate((function(t){return t&&c?N(N({},t),{},{people_in_events:[{person:c.id,event:e.id,people:{username:c.username,display_name:c.display_name||"",pronouns:"",email:""}}]}):t})),t.next=16;break;case 12:return t.next=14,Object(m.d)();case 14:null===(a=t.sent)||void 0===a||a.redirectToCheckout({sessionId:n.result.sessionId});case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),status:r},"RSVP"):"success"===r?p()("p.accentSuccess","You're RSVP'd! Check your email for an event invite, and any updates"):p()(f.d,{onSubmit:function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,o("/api/events/".concat(e.id,"/rsvp"),{email:_.email.value,name:_.name.value});case 3:200===t.sent.status&&e.mutate((function(e){return e&&c?N(N({},e),{},{no_accounts_rsvps:[].concat(Object(a.a)(e.no_account_rsvps),[{name:_.name.value,email:""}])}):e}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},[p()(j.d,N({placeholder:"Your email",type:"email"},_.email)),p()(j.d,N({placeholder:"Your name"},_.name)),p()(f.b,{gap:4,style:{justifySelf:"right",textAlign:"right"}},[p()(b.f,{status:r,type:"submit"},"RSVP"),p()(E.a,{href:"/login?redirect=".concat(encodeURIComponent(d.asPath))},p()("a","or sign in"))])])}},dhJC:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,"a",(function(){return a}))},dxER:function(e,t,n){"use strict";n.r(t),n.d(t,"EventForm",(function(){return y}));var a=n("vJKn"),r=n.n(a),i=n("cpVT"),o=n("rg98"),c=n("xvhg"),s=n("j+1P"),u=n.n(s),d=n("20a2"),p=n("q1tI"),l=n("rk+T"),m=n("Hzj1"),f=n("9Hbq"),g=n("0CBl"),v=n("5++N"),b=n("fdqv"),h=n("u5GO");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=Object(b.c)(e.state,e.onChange),n=(new Date).toLocaleDateString("en-us",{timeZoneName:"short"}).split(", ")[1];return u()(f.b,[u()(f.e,{gap:8,width:400},[u()("h4","Event Name"),u()(l.d,O({},t.name))]),u()(f.e,{gap:8},[u()("h4","Description"),u()(h.a,O({height:400},t.description))]),u()(f.f),u()(f.b,{h:!0,gap:32,width:640,style:{gridAutoColumns:"auto"}},[u()(f.e,{gap:8},[u()("h4","Date"),u()(l.d,O({type:"date",required:!0},t.start_date))]),u()(f.e,{gap:8},[u()("h4","Start Time "+"(".concat(n,")")),u()(l.d,O({type:"time",required:!0},t.start_time))]),u()(f.e,{gap:8},[u()("h4","End Time "+"(".concat(n,")")),u()(l.d,O({type:"time",required:!0},t.end_time))])]),u()(f.e,{gap:8,width:400},[u()("div",[u()("h4","Location"),u()("small.textSecondary","Like a Zoom, Jitsi, or Google Meet link")]),u()(l.d,O(O({},t.location),{},{required:!0}))]),u()(f.e,{gap:8,width:400},[u()("div",[u()("h4","Max participants"),u()("small.textSecondary","Set to 0 for no limit")]),u()(l.d,O({type:"number",min:0},t.max_attendees))]),u()(f.e,{gap:8,width:400},[u()("h4","Cost"),u()(l.d,O({type:"number",min:0},t.cost))])])};t.default=function(){var e=Object(v.i)().data,t=Object(d.useRouter)(),n=Object(p.useState)({name:"",cost:0,max_attendees:0,description:"",start_date:"",start_time:"",end_time:"",location:""}),a=n[0],i=n[1],s=Object(g.b)([]),l=Object(c.a)(s,2),h=l[0],_=l[1];!1===e&&t.push("/");var j=function(){var e=Object(o.a)(r.a.mark((function e(n){var i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i=Object(b.b)(a.start_date,a.start_time).toISOString(),o=Object(b.b)(a.start_date,a.end_time).toISOString(),e.next=5,_("/api/events",O(O({},a),{},{type:"standalone",start_date:i,end_date:o}));case 5:200===(c=e.sent).status&&t.push("/events/"+c.result.event.events.id);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u()(f.d,{onSubmit:j},[u()("h1","Create a New Event"),u()(y,{onChange:i,state:a}),u()(m.f,{status:h,type:"submit"},"Submit")])}},u5GO:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("wTIg"),r=n("j+1P"),i=n.n(r),o=n("BTHN"),c=n("mirl"),s=n("mB65"),u=n("q1tI"),d=n("9Hbq"),p=n("Hzj1");function l(e){var t=Object(s.c)("(max-width:640px)"),n=Object(u.useState)("edit"),a=n[0],r=n[1];return t?i()(d.b,{gap:4},[i()("div",{style:{justifySelf:"right"}},["preview"===a?i()(p.e,{onClick:function(){return r("edit")}},"edit"):i()(p.e,{onClick:function(){return r("preview")}},"preview")]),"preview"===a?i()(g,{},i()(o.a,{source:e.value})):i()(f,e)]):i()(m,[i()(f,e),i()(g,{height:e.height},i()(o.a,{source:e.value}))])}var m=Object(a.a)("div",{target:"efj9xzw0"})({name:"17v6q2h",styles:"display:grid;max-width:1200px;grid-template-columns:50% 50%;"}),f=Object(a.a)("textarea",{target:"efj9xzw1"})("box-sizing:border-box;height:",(function(e){return e.height?e.height:512}),"px;padding:16px;font-family:'Lato',sans-serif;border-color:",c.d.grey55," !important;border:1px solid;border-radius:2px 0 0 2px;resize:none;font-size:inherit;line-height:inherit;"),g=Object(a.a)("div",{target:"efj9xzw2"})("overflow:scroll;box-sizing:border-box;padding:16px;font-size:16px;height:",(function(e){return e.height?e.height:512}),"px;background-color:",c.d.accentPeach,";border-radius:0 2px 2px 0;")}},[["9OSZ",0,2,1,3,4,5,7,12]]]);
//# sourceMappingURL=[id]-6b82948ef629d3310f62.js.map