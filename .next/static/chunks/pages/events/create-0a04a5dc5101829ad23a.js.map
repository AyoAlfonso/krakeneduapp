{"version":3,"sources":["webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?bc8f","webpack://_N_E/./pages/events/create.ts","webpack://_N_E/./components/EditorWithPreview.ts"],"names":["window","__NEXT_P","push","EventForm","props","f","formHelper","state","onChange","timezone","Date","toLocaleDateString","timeZoneName","split","h","Box","LabelBox","gap","width","Input","name","EditorWithPreview","height","description","Seperator","style","gridAutoColumns","type","required","start_date","start_time","end_time","location","min","max_attendees","cost","CreateEvent","user","useUserData","data","router","useRouter","useState","formData","setFormData","useApi","status","callCreateEvent","onSubmit","e","a","preventDefault","dateFromDateAndTimeInputs","toISOString","end_date","result","event","events","id","FormBox","Primary","mobile","useMediaQuery","mode","setMode","justifySelf","LinkButton","onClick","Preview","Text","source","value","Editor","EditorPreviewContainer","colors","grey55","accentPeach"],"mappings":"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","file":"static/chunks/pages/events/create-0a04a5dc5101829ad23a.js","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/events/create\",\n        function () {\n          return require(\"private-next-pages/events/create.ts\");\n        }\n      ]);\n    ","import h from 'react-hyperscript'\nimport { useRouter } from 'next/router'\nimport { useState } from 'react'\n\nimport { Input } from 'components/Form'\nimport { Primary } from 'components/Button'\nimport { LabelBox, FormBox, Box, Seperator } from 'components/Layout'\n\nimport { useApi } from 'src/apiHelpers'\nimport { useUserData } from 'src/data'\nimport { CreateEventMsg, CreateEventResponse } from 'pages/api/events'\nimport { dateFromDateAndTimeInputs, formHelper } from 'src/utils'\nimport EditorWithPreview from 'components/EditorWithPreview'\n\ntype EventInput = {\n  name: string,\n  cost: number,\n  max_attendees: number,\n  description: string,\n  start_date: string,\n  start_time: string,\n  end_time: string,\n  location: string\n}\n\nconst CreateEvent = ()=> {\n  let {data: user} = useUserData()\n  let router = useRouter()\n  let [formData, setFormData] = useState({\n    name: '',\n    cost: 0,\n    max_attendees: 0,\n    description: '',\n    start_date: '',\n    start_time: '',\n    end_time: '',\n    location: '',\n  })\n  let [status, callCreateEvent] = useApi<CreateEventMsg, CreateEventResponse>([])\n\n  if(user === false) router.push('/')\n\n  const onSubmit = async (e:React.FormEvent) => {\n    e.preventDefault()\n\n    let start_date = dateFromDateAndTimeInputs(formData.start_date, formData.start_time).toISOString()\n    let end_date =dateFromDateAndTimeInputs(formData.start_date, formData.end_time).toISOString()\n\n    let result = await callCreateEvent('/api/events', {...formData, type: 'standalone', start_date, end_date})\n    if(result.status === 200) router.push('/events/'+result.result.event.events.id)\n  }\n\n  return h(FormBox, {onSubmit}, [\n    h('h1', 'Create a New Event'),\n    h(EventForm, {onChange: setFormData, state: formData}),\n    h(Primary, {status, type: 'submit'}, 'Submit'),\n  ])\n}\n\nexport const EventForm = (props: {onChange: (e:EventInput)=>void, state:EventInput})=>{\n  let f = formHelper(props.state, props.onChange)\n  let timezone = new Date().toLocaleDateString('en-us',{timeZoneName:\"short\"}).split(', ')[1]\n  return h(Box, [\n    h(LabelBox, {gap:8, width: 400}, [\n      h('h4', \"Event Name\"),\n      h(Input, {...f.name})\n    ]),\n    h(LabelBox, {gap:8}, [\n      h('h4', \"Description\"),\n      h(EditorWithPreview, {height: 400, ...f.description})\n    ]),\n    h(Seperator),\n    h(Box, {h: true, gap: 32, width: 640, style:{gridAutoColumns: 'auto'}}, [\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Date'),\n        h(Input, {\n          type: 'date',\n          required: true,\n          ...f.start_date,\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'Start Time ' + `(${timezone})`),\n        h(Input, {\n          type: 'time',\n          required: true,\n          ...f.start_time\n        })\n      ]),\n      h(LabelBox, {gap:8}, [\n        h('h4', 'End Time ' + `(${timezone})`),\n        h(Input, {\n          type: \"time\",\n          required: true,\n          ...f.end_time\n        })\n      ]),\n    ]),\n    h(LabelBox, {gap: 8, width: 400}, [\n      h('div', [\n        h('h4', \"Location\"),\n        h('small.textSecondary', 'Like a Zoom, Jitsi, or Google Meet link'),\n      ]),\n      h(Input, {...f.location,required:true})\n    ]),\n    h(LabelBox, {gap: 8, width: 400, }, [\n      h('div', [\n        h('h4', \"Max participants\"),\n        h('small.textSecondary', \"Set to 0 for no limit\"),\n      ]),\n      h(Input, {type: 'number',  min: 0, ...f.max_attendees})\n    ]),\n    h(LabelBox, {gap:8, width:400},[\n      h('h4',\"Cost\"),\n      h(Input, {type: 'number', min: 0, ...f.cost})\n    ]),\n  ])\n}\n\nexport default CreateEvent\n","import h from 'react-hyperscript'\nimport styled from '@emotion/styled'\nimport Text from './Text'\nimport {colors} from './Tokens'\nimport { useMediaQuery } from 'src/hooks'\nimport { useState } from 'react'\nimport { Box } from './Layout'\nimport { LinkButton } from './Button'\n\nexport default function EditorWithPreview(props:{height?: number, value: string, onChange: (e:React.ChangeEvent<HTMLTextAreaElement>)=>void}) {\n  let mobile = useMediaQuery('(max-width:640px)')\n\n  let [mode, setMode] = useState<'edit'|'preview'>('edit')\n  if(mobile) return h(Box, {gap:4}, [\n    h('div', {style:{justifySelf: 'right'}}, [\n      mode === 'preview'\n        ? h(LinkButton, {onClick: ()=>setMode('edit')}, 'edit')\n        : h(LinkButton, {onClick: ()=>setMode('preview')}, 'preview'),\n    ]),\n    mode === 'preview'\n      ? h(Preview, {}, h(Text, {source: props.value}))\n      : h(Editor, props),\n  ])\n  return h(EditorPreviewContainer, [\n    h(Editor, props),\n    h(Preview, {height:props.height}, h(Text, {source: props.value}))\n  ])\n}\nlet EditorPreviewContainer = styled('div')`\ndisplay: grid;\nmax-width: 1200px;\ngrid-template-columns: 50% 50%;\n`\n\nlet Editor = styled('textarea')<{height?:number}>`\nbox-sizing: border-box;\nheight: ${props=>props.height ? props.height : 512}px;\npadding: 16px;\nfont-family: 'Lato', sans-serif;\nborder-color: ${colors.grey55} !important;\nborder: 1px solid;\nborder-radius: 2px 0 0 2px;\nresize: none;\nfont-size: inherit;\nline-height: inherit;\n`\n\nlet Preview = styled('div')<{height?:number}>`\noverflow: scroll;\nbox-sizing: border-box;\npadding: 16px;\nfont-size: 16px;\nheight: ${props=>props.height ? props.height : 512}px;\nbackground-color:${colors.accentPeach};\nborder-radius: 0 2px 2px 0;\n`\n"],"sourceRoot":""}